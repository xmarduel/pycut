<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
  <title>CNC Tutorial</title>
  <link href="doc/css/prism.css" rel="stylesheet">
  <link href="doc/css/simpletree.css" rel="stylesheet">
  <link href="cnc-doc/css/cnc.css" rel="stylesheet"> 
  <script type="text/javascript" src="doc/js/prism.js">
 </script>
</head>

<body>
<!-- ----------------------------------------------------------------------------------------------------------->
<!-- ----------------------------------------------------------------------------------------------------------->

<div class="sidenav">
<h3 class="title_sidenav">Contents</h3>
<ul class="tree">
  <li><a href="#P-01">Introduction</a></li>
  <li><a href="#P-02">Grbl Settings</a> 
    <ul>
      <li><a href="#P-GRBL-001">Step idle delay, milliseconds</a></li>
      <li><a href="#P-GRBL-002">Step port invert, mask</a></li>
      <li><a href="#P-GRBL-003">Direction port invert, mask</a></li>
      <li><a href="#P-GRBL-004">Step enable invert, boolean</a></li>
      <li><a href="#P-GRBL-005">Limit pins invert, boolean</a></li>
      <li><a href="#P-GRBL-006">Probe pin invert, boolean</a></li>
      <li><a href="#P-GRBL-010">Status report, mask</a></li>
      <li><a href="#P-GRBL-011">Junction deviation, mm</a></li>
      <li><a href="#P-GRBL-012">rc tolerance, mm</a></li>
      <li><a href="#P-GRBL-013">Report inches, boolean</a></li>
      <li><a href="#P-GRBL-020">Soft limits, boolean</a></li>
      <li><a href="#P-GRBL-021">Hard limits, boolean</a></li>
      <li><a href="#P-GRBL-022">Homing cycle, boolean</a></li>
      <li><a href="#P-GRBL-023">Homing dir invert, mask</a></li>
      <li><a href="#P-GRBL-024">Homing feed, mm/min</a></li>
      <li><a href="#P-GRBL-025">Homing seek, mm/min</a></li>
      <li><a href="#P-GRBL-026">Homing debounce, milliseconds</a></li>
      <li><a href="#P-GRBL-027">Homing pull-off, mm</a></li>
      <li><a href="#P-GRBL-030">Max spindle speed, RPM</a></li>
      <li><a href="#P-GRBL-031">Min spindle speed, RPM</a></li>
      <li><a href="#P-GRBL-032">Laser mode, boolean</a></li>
      <li><a href="#P-GRBL-100">X steps/mm</a></li>
      <li><a href="#P-GRBL-101">Y steps/mm</a></li>
      <li><a href="#P-GRBL-102">Z steps/mm</a></li>
      <li><a href="#P-GRBL-110">X Max rate, mm/min</a></li>
      <li><a href="#P-GRBL-111">Y Max rate, mm/min</a></li>
      <li><a href="#P-GRBL-112">Z Max rate, mm/min</a></li>
      <li><a href="#P-GRBL-120">X Acceleration, mm/sec^2</a></li>
      <li><a href="#P-GRBL-121">Y Acceleration, mm/sec^2</a></li>
      <li><a href="#P-GRBL-122">Z Acceleration, mm/sec^2</a></li>
      <li><a href="#P-GRBL-130">X Max travel, mm</a></li>
      <li><a href="#P-GRBL-131">Y Max travel, mm</a></li>
      <li><a href="#P-GRBL-132">Z Max travel, mm</a></li>
    </ul>
  </li>
  <li><a href="#P-21">Grbl Errors Codes</a></li>
  <li><a href="#P-22">Upgrading the CNC 1310</a>
  <li><a href="#P-23">Upgrading the CNC 1419</a>
   <ul>
      <li><a href="#P-23-01">Spindle</a></li>
      <li><a href="#P-23-02">Stepper Motors</a></li>
      <li><a href="#P-23-03">Controller Board</a></li>
    </ul>
  </li>
  <li><a href="#P-03">First Steps - How to (not) crash the machine</a></li>
  <li><a href="#P-04">Tools Tutorials</a> 
    <ul>
      <li><a href="#P-04-01">Offline Controller</a> 
        <ul>
          <li><a href="#P-04-01-01">Zero positionning</a></li>
		  <li><a href="#P-04-01-02">Testing the Max Travels</a></li>
		  <li><a href="#P-04-01-03">Testing the Soft Limits</a></li>
        </ul>
      </li>
      <li><a href="#P-04-02">Candle</a> 
        <ul>
          <li><a href="#P-04-02-01">Lesson1 - Jogging</a></li>
          <li><a href="#P-04-02-02">Lesson2 - Calibration</a></li>
          <li><a href="#P-04-02-03">Lesson3 - Controlling the spindle</a></li>
          <li><a href="#P-04-02-04">Lesson4 - Setting Machine Zeros Coordinates</a></li>
        </ul>
      </li>
      <li><a href="#P-04-09">Laser GRBL</a> </li>
      <li><a href="#P-04-03">Easel</a> 
        <ul>
          <li><a href="#P-04-03-01">Lesson1 - Milling a rectangle - Spindle Control Off</a></li>
          <li><a href="#P-04-03-02">Lesson2 - Milling a rectangle - Spindle Control On</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#P-06">Cnc offsets and machine reference explained</a></li>
  <li><a href="#P-07">Setting the datums on your cnc machine</a></li>
  <li><a href="#P-08">Tool length Compensation Explained</a></li>
  <li><a href="#P-09">G28 Code demistified</a></li>
  <li><a href="#P-17">Most useful G Codes</a> 
    <ul>
      <li><a href="#P17-G00">G00 G-Code Command</a></li>
	  <li><a href="#P17-G01">G01 G-Code Command</a></li>
	  <li><a href="#P17-G02">G02 G-Code Command</a></li>
	  <li><a href="#P17-G03">G03 G-Code Command</a></li>
	  <li><a href="#P17-G04">G04 G-Code Command</a></li>
	  <li><a href="#P17-G17">G17 G-Code Command</a></li>
	  <li><a href="#P17-G18">G18 G-Code Command</a></li>
	  <li><a href="#P17-G19">G19 G-Code Command</a></li>
	  <li><a href="#P17-G21">G21 G-Code Command</a></li>
	  <li><a href="#P17-G20">G20 G-Code Command</a></li>
	  <li><a href="#P17-G40">G40 G-Code Command</a></li>
	  <li><a href="#P17-G41">G41 G-Code Command</a></li>
	  <li><a href="#P17-G42">G42 G-Code Command</a></li>
	  <li><a href="#P17-G43">G43 G-Code Command</a></li>
	  <li><a href="#P17-G53">G53 G-Code Command</a></li>
	  <li><a href="#P17-G54">G54 G-Code Command</a></li>
      <li><a href="#P17-G77">G77 G-Code Command</a></li>
      <li><a href="#P17-G80">G80 G-Code Command</a></li>
      <li><a href="#P17-G81">G81 G-Code Command</a></li>
	  <li><a href="#P17-G83">G83 G-Code Command</a></li>
      <li><a href="#P17-G84">G84 G-Code Command</a></li>
	  <li><a href="#P17-G98">G98 G-Code Command</a></li>
      <li><a href="#P17-G99">G99 G-Code Command</a></li>
    </ul>
  </li>
  <li><a href="#P-10">Limits Switches</a></li>
  <li><a href="#P-18">Cnc Milling Equipment</a></li>
  <li><a href="#P-11">Cnc Milling Machine Terminology</a></li>
  <li><a href="#P-12">Types of Mill Cutters</a></li>
  <li><a href="#P-16">Feeds And Speeds</a></li>
  <li><a href="#P-19">MCode Reference</a> 
    <ul>
      <li><a href="#mcode:m0-m1">M0 M1 - Program Pause</a></li>
      <li><a href="#mcode:m2-m30">M2 M30 - Program End</a></li>
      <li><a href="#mcode:m60">M60 - Pallet Change Pause</a></li>
      <li><a href="#mcode:m3-m4-m5">M3 M4 M5 - Spindle Control</a></li>
      <li><a href="#mcode:m6">M6 - Tool Change</a></li>
      <li><a href="#mcode:m7-m8-m9">M7 M8 M9 - Coolant Control</a></li>
      <li><a href="#mcode:m19">M19 - Orient Spindle</a></li>
      <li><a href="#mcode:m48-m49">M48 M49 - Feed &amp; Spindle Overrides Enable/Disable</a></li>
      <li><a href="#mcode:m50">M50 - Feed Override Control</a></li>
      <li><a href="#mcode:m51">M51 - Spindle Override Control</a></li>
      <li><a href="#mcode:m52">M52 - Adaptive Feed Control</a></li>
      <li><a href="#mcode:m53">M53 - Feed Stop Control</a></li>
      <li><a href="#mcode:m61">M61 - Set Current Tool Number</a></li>
      <li><a href="#mcode:m62-m65">M62-M65 - Output Control</a></li>
      <li><a href="#mcode:m66">M66 - Input Control</a></li>
      <li><a href="#mcode:m67">M67 - Analog Output Control</a></li>
      <li><a href="#mcode:m68">M68 - Analog Output Control</a></li>
      <li><a href="#mcode:m70">M70 - Save Modal State</a></li>
      <li><a href="#mcode:m71">M71 - Invalidate Stored Modal State</a></li>
      <li><a href="#mcode:m72">M72 - Restore Modal State</a></li>
      <li><a href="#mcode:m73">M73 - Save Autorestore Modal State</a></li>
      <li><a href="#mcode:m98-m99">M98 M99 - Call and Return From Subprogram</a></li>
      <li><a href="#mcode:m100-m199">M100-M199 - User Defined M-Codes</a></li>
    </ul>
  </li>
  <li><a href="#P-20">GCode Reference</a> 
    <ul>
      <li><a href="#gcode:g0">G0 - Rapid Move</a></li>
      <li><a href="#gcode:g1">G1 - Linear Move</a></li>
      <li><a href="#gcode:g2">G2,G3 - Arc Move</a></li>
      <li><a href="#gcode:g4">G4 - Dwell</a></li>
      <li><a href="#gcode:g5">G5 - Cubic Spline</a></li>
      <li><a href="#gcode:g5.1">G5.1 - Quadratic Spline</a></li>
      <li><a href="#gcode:g5.2-g5.3">G5.2,G5.3 - NURBS Block</a></li>
      <li><a href="#gcode:g7">G7 - Lathe Diameter Mode</a></li>
      <li><a href="#gcode:g8">G8 - Lathe Radius Mode</a></li>
	  
      <li><a href="#gcode:g10-L0">G10 L0 - Reload Tool Table Data</a></li>
	  <li><a href="#gcode:g10-L1">G10 L1 - Set Tool Table</a></li>
      <li><a href="#gcode:g10-L2">G10 L2 - Set Coordinate System</a></li>
      
      <li><a href="#gcode:g10-L10">G10 L10 - Set Tool Table</a></li>
	  <li><a href="#gcode:g10-L11">G10 L11 - Set Tool Table</a></li>
      <li><a href="#gcode:g10-L20">G10 L20 - Set Coordinate System</a></li>
      <li><a href="#gcode:g17">G17,G19.1 - Plane Select</a></li>
      <li><a href="#gcode:g20">G20,G21 - Units</a></li>
      <li><a href="#gcode:g28">G28,G28.1 - Go/Set Predefined Position</a></li>
      <li><a href="#gcode:g30">G30,G30.1 - Go/Set Predefined Position</a></li>
      <li><a href="#gcode:g33">G33 - Spindle Synchronized Motion</a></li>
      <li><a href="#gcode:g33.1">G33.1 - Rigid Tapping</a></li>
      <li><a href="#gcode:g38.n">G38.n - Straight Probe</a></li>
      <li><a href="#gcode:g40">G40 - Compensation Off</a></li>
      <li><a href="#gcode:g41">G41,G42 - Cutter Compensation</a></li>
      <li><a href="#gcode:g41.1">G41.1,G42.1 - Dynamic Cutter Compensation</a></li>
      <li><a href="#gcode:g43">G43 - Tool Length Offset </a></li>
      <li><a href="#gcode:g43.1">G43.1 - Dynamic Tool Length Offset</a></li>
      <li><a href="#gcode:g43.2">G43.2 - Apply additional Tool Length Offset</a></li>
      <li><a href="#gcode:g49">G49 - Cancel Tool Length Compensation</a></li>
      <li><a href="#gcode:g52">G52 - Local Coordinate System Offset</a></li>
      <li><a href="#gcode:g53">G53 - Move in Machine Coordinates</a></li>
      <li><a href="#gcode:g54">G54,G59.3 - Select Coordinate System</a></li>
      <li><a href="#gcode:g61">G61 - Exact Path Mode</a></li>
      <li><a href="#gcode:g61.1">G61.1 - Exact Stop Mode</a></li>
      <li><a href="#gcode:g64">G64 - Path Blending</a></li>
      <li><a href="#gcode:g73">G73 - Drilling Cycle with Chip Breaking</a></li>
      <li><a href="#gcode:g74">G74 - Left-hand Tapping Cycle, Dwell</a></li>
      <li><a href="#gcode:g76">G76 - Threading Cycle</a></li>
      <li><a href="#gcode:g80">G80 - Cancel Canned Cycle</a></li>
      <li><a href="#gcode:g81">G81 - Drilling Cycle</a></li>
      <li><a href="#gcode:g82">G82 - Drilling Cycle, Dwell</a></li>
      <li><a href="#gcode:g83">G83 - Peck Drilling Cycle</a></li>
      <li><a href="#gcode:g84">G84 - Right-hand Tapping Cycle, Dwell</a></li>
      <li><a href="#gcode:g85">G85 - Boring Cycle, Feed Out</a></li>
      <li><a href="#gcode:g86">G86 - Boring Cycle, Spindle Stop, Rapid Move Out</a></li>
      <li><a href="#gcode:g87">G87 - Back Boring Cycle</a></li>
      <li><a href="#gcode:g88">G88 - Boring Cycle, Spindle Stop, Manual Out</a></li>
      <li><a href="#gcode:g89">G89 - Boring Cycle, Dwell, Feed Out</a></li>
      <li><a href="#gcode:g90-g91">G90,G91 - Distance Mode</a></li>
      <li><a href="#gcode:g90.1-g91.1">G90.1,G91.1 - Cancel G92 Offsets</a></li>
      <li><a href="#gcode:g92">G92 - Coordinate System Offsets</a></li>
      <li><a href="#gcode:g92.1-g92.2">G92.1,G92.2 - Reset G92 Offsets</a></li>
      <li><a href="#gcode:g92.3">G92.3 - Restore G92 Offsets</a></li>
      <li><a href="#gcode:g93-g94-g95">G93,G94,G95 - Feed Modes</a></li>
      <li><a href="#gcode:g96-g97">G96,G97 - Spindle Control Mode</a></li>
      <li><a href="#gcode:g98-99">G98,G99 - Canned Cycle Return Level</a></li>
    </ul>
  </li>
  <li><a href="#P-99">Spindles Kits</a> 
    <ul>
      <li><a href="#P-99-01">Brushless 250W - Diameter 42 mm</a></li>
      <li><a href="#P-99-02">500W - Diameter 52 mm</a></li>
      <li><a href="#P-99-03">Brushless 300W/400W/500W/600W - Diameter 55 mm</a></li>
      <li><a href="#P-99-04">Brushless 600W - Diameter 57 mm</a></li>
    </ul>
  </li>
  <li><a href="#P-98">Resources</a> 
    <ul>
	<li><a href="#P-98-01">Candle</a></li>
	<li><a href="#P-98-02">NCnetic</a></li>
	<li><a href="#P-98-03">NCCorrector</a></li>
	<li><a href="#P-98-04">SunSpire</a></li>
	</ul>
  </li>
</ul>

<script type="text/javascript">
var tree = document.querySelectorAll('ul.tree a:not(:last-child)');
for (var i = 0; i < tree.length; i++){
    tree[i].addEventListener('click', function(e) {
        var parent = e.target.parentElement;
        var classList = parent.classList;
        if (classList.contains("open")) {
            classList.remove('open');
            var opensubs = parent.querySelectorAll(':scope .open');
            for (var i = 0; i < opensubs.length; i++) {
                opensubs[i].classList.remove('open');
            }
        } else {
            classList.add('open');
        }
        if (classList.contains("open")) {
            //e.preventDefault(); // on open -> jump (default)
          
        } else {
            e.preventDefault(); // on close
        }
    });
}</script>
</div>
<!-- --------------------------------------------------------------------------->
<!-- --------------------------------------------------------------------------->

<div class="main">
<h1 class="etitle">CNC Tutorial</h1>

<h2 id="P-01">Introduction</h2>

<p>This tutorial is designed for beginners. With the relatively cheap CNC routers from China as the
<strong>3018</strong>, <strong>1419</strong> or the small <strong>1310</strong>, everybody is able
to start milling a piece of wood. I have started writting this tutorial for my own purposes, and
hopefully you will find it usefull.</p>

<p>I personnaly own the <strong>1419</strong>, which I find to be beautiful and quite capable, and
the <strong>1310</strong> too. Both were very cheap at the beginning of the 2020's. Note that the
<strong>3018</strong> is explicitely sold as an "engraving" machine, so don't be surprised if you
encounter problems milling with this machine. Sure, there are plenty of YouTube channels showing
how "versatile" the 3018 is. But these as often experienced users which already have plenty of
experience and know how to take the best from it, all things that a beginner cannot. As they
certainly own better machines anyway, I do not see their point. The YouTube channel "Cosmo Channel"
(italian) describes carefully how to assemble the <strong>1419</strong>. The <strong>1310</strong>
is quite small but very well constructed, thus very sturdy. There are also videos in Internet
showing how to assemble it. Unfortunately upgrading it is not straightforward. A better spindle
mounted on it out of the box would be best. The reality for a machine is: the more expensive, the
better!</p>

<p>Nervertheless, to be able to setup and use the machine properly, knowledge of the <strong>Grbl
Settings</strong> is a must. <strong>Grbl</strong> is the low level software (the "firmware") that
is already installed on the control board. Furthermore, to become proefficient in CNC, basic
<strong>G-Code</strong> and <strong>M-Code</strong> knowledge in needed. <strong>G/M-Code</strong>
instructions are what <strong>Grbl</strong> (as well as every other CNC controller) handles: the
user writes a <strong>G-Code</strong> file constituted of M/G codes directives, send it to the
control board and <strong>Grbl</strong> processes this <strong>G-Code</strong> by driving the
stepper motors of the machine as well as the spindle or others hardware.</p>

<p>Usually, the user does not write <strong>G-Code</strong> per hand. A CAD/CAM program can
generate a <strong>G-Code</strong> file from the workpiece and the CAM operations (pocket, etc.)
defined on it. To send the <strong>G-Code</strong> file to the control board, standard,
user-friendly desktop computer programs can be used. The most common ones are
<strong>Candle</strong> and <strong>UGS</strong>. As CAD/CAM programs, we will use
<strong>Easel</strong>, <strong>JSCut/PyCut</strong> [<strong>Fusion360</strong> for advanced
users].</p>

<p>So CAD/CAM programs produce <strong>G-Code</strong>, and this <strong>G-Code</strong> highly
depends on the "options" that are set in the defined CAM operations. So understanding at least the
few basic options is also a must.</p>

<p>For this entry level machine, a CAD/CAM 3D program is not really needed. Instead, simple 2D
programs are better and a lot easier to handle: <strong>Easel</strong> is a Web based program where
simple forms can be edited and directly transformed into <strong>G-Code</strong>. It is free and
has a non-free "pro" version. Unfortunately, the free version is limited to only a few character
fonts. But there are also plenty of geometric patterns ready to use. Default values for the options
are given for the CAM operations, and this tutorial will explain them. <strong>JSCut</strong> is a
also a web based application that has SVG as input format and produces <strong>G-Code</strong>.</p>

<p>So <strong>SVG</strong> can also be used as an input format for some CAM programs. Unfortunately
there are not a lot of programs that create "robust" SVG files, and by "robust" I mean SVG files
containing well defined and clean (human readable for modifications) SVG paths (your design).
<strong>Inkscape</strong>, a well-known free SVG program, is unfortunately not a good choice. But
SVG files can also be edited per hand, which is quite handy, and leads in my opinion to the best
results. Infact, in the documentation of <strong>my own CAM program named PyCut</strong> (available
for free from GitHub), I list some programs that can create SVG files, and unfortunately there are
only a few that allow to write SVG files in a decent manner. So this "toolchain" (editing per hand
SVGs, loading them in the CAM program, generating G-Code, utilizing a G-Code sender to the machine)
is somehow more complex, but still simple enough. However, these simple CAM programs have also
settings which are quite important and impact the content of the produced G-Code.</p>

<p>So first , references to <strong>Grbl Settings</strong> are given. The most important settings
are highlighted. Note that the routers are usually already set up per default. Then full reference
to <strong>M-Code</strong> and <strong>G-Code</strong> is also given (duplicated from the LinuxCNC
pages). When using <strong>Grbl</strong>, only very few of them are worth to know, as
<strong>Grbl</strong> is so basic. Nevertheless, having a look at all the possibilities is worth a
look. Note that <strong>Grbl_ESP32</strong> or <strong>Grbl_HAL</strong> are much more capable and
can process much more G-Codes.</p>

<p>Many chapters here are also simply copy-pasted from <a
href="https://cncphilosophy.com">https://cncphilosophy.com</a>. This is because they are so
excellent. There is only 1 downsize for them: they are completely plagued with ads, which make them
- for me - unreadable. This is the reason I have painfully copy-pasted them for my own reading.
Finally, a large part of the tools tutorials are copy-pasted as well from <a
href="https://cncphilosophy.com">https://cncphilosophy.com</a>.</p>
<br>
<!-- ----------------------------------------------------------------------------------------------------------->
<!-- -----------------------------------------------------------------------------------------------------------> 

<h2 id="P-02">Grbl Settings</h2>

<p>First, connect "physically" your computer to the control board with an USB cable, then connect
"logically" to the <strong>Grbl board</strong> by starting the <strong>Candle</strong> program and
setting in it the right "port" and "Baud rate". You have to tell <strong>Candle</strong> (see
"Settings") which port is related to our <strong>Grbl</strong> control board.
<strong>Candle</strong> should infact find it alone. Set the baud rate to 115200 as 8-N-1 (8-bits,
no parity, and 1-stop bit.) Once connected you should get the Grbl-prompt, which looks like
this:</p>
<pre><code>Grbl 1.1f ['$' for help]</code></pre>

<div class="warning">
<p>Note that for some old controller boards, Grbl-0.9 might be pre-installed.</p>

<p>Unfortunaltely, <strong>Candle</strong> doesn't play well with this version (jog buttons may not
work), so you'll have to install Grbl-1.1 on the board. For this you have to install the Arduino
IDE on your computer, load the Grbl project and compile it, connect to the board and flash the
Grbl-1.1 in the board.</p>
</div>

<p>There are 3 types of settings:</p>

<p><strong>Calibration settings</strong> include defining <strong>steps-per-mm</strong>,
<strong>axes directions</strong>, <strong>max feed rates</strong>, and so on. These settings are
used when a new machine is being set up to work, or after a modification of the machine. Here are a
few examples of calibration settings:</p>
<ul>
  <li>Set X-axis steps per mm setting to be 314.961: <code>$100=314.961</code></li>
  <li>Reverse Y-axis direction: <code>$3=2</code></li>
  <li>Set Z-axis maximum feed rate to 635 mm/min: <code>$112=635.000</code></li>
</ul>

<p><strong>General GRBL commands</strong> include functions such as <strong>display saved
settings</strong>, <strong>save current settings</strong>, and so on. Here are a couple of
examples:</p>
<ul>
  <li>Display the current GRBL settings: <code>$$</code></li>
  <li>Display the coordinates and tool length offsets settings: <code>$#</code></li>
</ul>

<p><strong>Real-time commands</strong> include actions like soft reset, perform homing cycle, get
current machine position, and so on. These commands can be used during a program run or between
different operations. Most of these commands do not begin with a ‘$’, but they are
<strong>Grbl</strong> commands nonetheless. Here are a few examples:</p>
<ul>
  <li>Pause operation: <code>!</code></li>
  <li>Get current machine and work coordinates: <code>?</code></li>
  <li>Reset <strong>Grbl</strong>: <code>ctrl-x</code></li>
</ul>

<p>The most common GRBL settings and commands can be found in DIY Machining’s pocket guide, as
well as the GRBL commands wiki page.</p>

<p>The ‘$’-commands are <strong>Grbl</strong> system commands used to tweak the settings, view
or change <strong>Grbl</strong>'s states and running modes, and start a homing cycle. The last four
non-'$' commands are realtime control commands that can be sent at anytime, no matter what Grbl is
doing. These either immediately change Grbl's running behavior or immediately print a report of the
important realtime data like current position (aka DRO).</p>

<h3>View <strong>Grbl</strong> Settings:</h3>

<p>To view the settings, type <code>$$</code> and press enter after connecting to Grbl. Grbl should
respond with a list of the current system settings, as shown in the example below. All of these
settings are persistent and kept in EEPROM, so if you power down, these will be loaded back up the
next time you power up your Arduino.</p>

<p>The x of $x=val indicates a particular setting, while val is the setting value. In prior
versions of <strong>Grbl</strong>, each setting had a description next to it in () parentheses, but
<strong>Grbl</strong> v1.1+ no longer includes them unfortunately. This was done to free up
precious flash memory to add the new features available in v1.1. However, most good GUIs will help
out by attaching descriptions for you, so you know what you are looking at.</p>

<p>So here are the settings for a standart CNC 1419 router (<span style="color:#008080">in green
the options that are important and going to be tested</span>):</p>

<table>
  <tbody>
    <tr>
      <th>Settings and sample values</th>
      <th>Description</th>
    </tr>
    <tr>
      <td>$0=10</td>
      <td><a href="#P-GRBL-000">Step pulse, microseconds</a></td>
    </tr>
    <tr>
      <td>$1=25</td>
      <td><a href="#P-GRBL-001">Step idle delay, milliseconds</a></td>
    </tr>
    <tr>
      <td>$2=0</td>
      <td><a href="#P-GRBL-002">Step port invert, mask</a></td>
    </tr>
    <tr>
      <td><span style="color:#008080">$3=6</span></td>
      <td><a href="#P-GRBL-003">Direction port invert, mask</a></td>
    </tr>
    <tr>
      <td>$4=0</td>
      <td><a href="#P-GRBL-004">Step enable invert, boolean</a></td>
    </tr>
    <tr>
      <td>$5=0</td>
      <td><a href="#P-GRBL-005">Limit pins invert, boolean</a></td>
    </tr>
    <tr>
      <td>$6=0</td>
      <td><a href="#P-GRBL-006">Probe pin invert, boolean</a></td>
    </tr>
    <tr>
      <td>$10=1</td>
      <td><a href="#P-GRBL-010">Status report, mask</a></td>
    </tr>
    <tr>
      <td>$11=1.000</td>
      <td><a href="#P-GRBL-011">Junction deviation, mm</a></td>
    </tr>
    <tr>
      <td>$12=0.002 </td>
      <td><a href="#P-GRBL-012">rc tolerance, mm</a></td>
    </tr>
    <tr>
      <td>$13=0</td>
      <td><a href="#P-GRBL-013">Report inches, boolean</a></td>
    </tr>
    <tr>
      <td>$20=0 </td>
      <td><a href="#P-GRBL-020">Soft limits, boolean</a></td>
    </tr>
    <tr>
      <td>$21=1 </td>
      <td><a href="#P-GRBL-021">Hard limits, boolean</a></td>
    </tr>
    <tr>
      <td>$22=1 </td>
      <td><a href="#P-GRBL-022">Homing cycle, boolean</a></td>
    </tr>
    <tr>
      <td>$23=1 </td>
      <td><a href="#P-GRBL-023">Homing dir invert, mask</a></td>
    </tr>
    <tr>
      <td>$24=25.000</td>
      <td><a href="#P-GRBL-024">Homing feed, mm/min</a></td>
    </tr>
    <tr>
      <td>$25=500.000</td>
      <td><a href="#P-GRBL-025">Homing seek, mm/min</a></td>
    </tr>
    <tr>
      <td>$26=250</td>
      <td><a href="#P-GRBL-026">Homing debounce, milliseconds</a></td>
    </tr>
    <tr>
      <td>$27=2.000</td>
      <td><a href="#P-GRBL-027">Homing pull-off, mm</a></td>
    </tr>
    <tr>
      <td><span style="color:#008080">$30=1000</span></td>
      <td><a href="#P-GRBL-030">Max spindle speed, RPM</a></td>
    </tr>
    <tr>
      <td><span style="color:#008080">$31=0</span></td>
      <td><a href="#P-GRBL-031">Min spindle speed, RPM</a></td>
    </tr>
    <tr>
      <td><span style="color:#008080">$32=0</span></td>
      <td><a href="#P-GRBL-032">Laser mode, boolean</a></td>
    </tr>
    <tr>
      <td><span style="color:#008080">$100=800.000</span></td>
      <td><a href="#P-GRBL-100">X steps/mm</a></td>
    </tr>
    <tr>
      <td><span style="color:#008080">$101=800.000</span></td>
      <td><a href="#P-GRBL-101">Y steps/mm</a></td>
    </tr>
    <tr>
      <td><span style="color:#008080">$102=800.000</span></td>
      <td><a href="#P-GRBL-102">Z steps/mm</a></td>
    </tr>
    <tr>
      <td>$110=2000.000</td>
      <td><a href="#P-GRBL-110">X Max rate, mm/min</a></td>
    </tr>
    <tr>
      <td>$111=2000.000</td>
      <td><a href="#P-GRBL-111">Y Max rate, mm/min</a></td>
    </tr>
    <tr>
      <td>$112=100.000</td>
      <td><a href="#P-GRBL-112">Z Max rate, mm/min</a></td>
    </tr>
    <tr>
      <td>$120=30.000</td>
      <td><a href="#P-GRBL-120">X Acceleration, mm/sec^2</a></td>
    </tr>
    <tr>
      <td>$121=30.000</td>
      <td><a href="#P-GRBL-121">Y Acceleration, mm/sec^2</a></td>
    </tr>
    <tr>
      <td>$122=30.000</td>
      <td><a href="#P-GRBL-122">Z Acceleration, mm/sec^2</a></td>
    </tr>
    <tr>
      <td><span style="color:#008080">$130=500.000</span></td>
      <td><a href="#P-GRBL-130">X Max travel, mm</a></td>
    </tr>
    <tr>
      <td><span style="color:#008080">$131=500.000</span></td>
      <td><a href="#P-GRBL-131">Y Max travel, mm</a></td>
    </tr>
    <tr>
      <td><span style="color:#008080">$132=200.000</span></td>
      <td><a href="#P-GRBL-132s">Z Max travel, mm</a></td>
    </tr>
  </tbody>
</table>

<h3>$x=val - Save Grbl setting</h3>

<p>The <code>$x=val</code> command saves or alters a Grbl setting, which can be done manually by
sending this command when connected to Grbl through a serial terminal program, but most Grbl GUIs
will do this for you as a user-friendly feature.</p>

<p>To manually change e.g. the microseconds step pulse option to 10us you would type this, followed
by an enter:</p>
<pre><code>$0=10</code></pre>

<p>If everything went well, Grbl will respond with an 'ok' and this setting is stored in EEPROM and
will be retained forever or until you change them. You can check if Grbl has received and stored
your setting correctly by typing $$ to view the system settings again.</p>

<p>Note that some settings (such as $100, $101, $102) require a soft reset for the settings to be
properly loaded. Any subsequent movement command could otherwise move the machine to the wrong
coordinates causing damage to the machine.</p>

<p></p>

<h3 id="P-GRBL-000">$0 – Step pulse, microseconds</h3>

<p>Stepper drivers are rated for a certain minimum step pulse length. Check the data sheet or just
try some numbers. You want the shortest pulses the stepper drivers can reliably recognize. If the
pulses are too long, you might run into trouble when running the system at very high feed and pulse
rates, because the step pulses can begin to overlap each other. We recommend something around 10
microseconds, which is the default value.</p>

<p></p>

<h3 id="P-GRBL-001">$1 - Step idle delay, milliseconds</h3>

<p>Every time your steppers complete a motion and come to a stop, Grbl will delay disabling the
steppers by this value. OR, you can always keep your axes enabled (powered so as to hold position)
by setting this value to the maximum 255 milliseconds. Again, just to repeat, you can keep all axes
always enabled by setting <code>$1=255</code>.</p>

<p>The stepper idle lock time is the time length Grbl will keep the steppers locked before
disabling. Depending on the system, you can set this to zero and disable it. On others, you may
need 25-50 milliseconds to make sure your axes come to a complete stop before disabling. This is to
help account for machine motors that do not like to be left on for long periods of time without
doing something. Also, keep in mind that some stepper drivers don't remember which micro step they
stopped on, so when you re-enable, you may witness some 'lost' steps due to this. In this case,
just keep your steppers enabled via <code>$1=255</code>.</p>

<p></p>

<h3 id="P-GRBL-002">$2 – Step port invert, mask</h3>

<p>This setting inverts the step pulse signal. By default, a step signal starts at normal-low and
goes high upon a step pulse event. After a step pulse time set by $0, the pin resets to low, until
the next step pulse event. When inverted, the step pulse behavior switches from normal-high, to low
during the pulse, and back to high. Most users will not need to use this setting, but this can be
useful for certain CNC-stepper drivers that have peculiar requirements. For example, an artificial
delay between the direction pin and step pulse can be created by inverting the step pin.</p>

<p>This invert mask setting is a value which stores the axes to invert as bit flags. You really
don't need to completely understand how it works. You simply need to enter the settings value for
the axes you want to invert. For example, if you want to invert the X and Z axes, you'd send
<code>$2=5</code> to Grbl and the setting should now read <code>$2=5 (step port invert
mask:00000101)</code>.</p>

<table>
  <tbody>
    <tr>
      <th>Settings values</th>
      <th>Mask</th>
      <th>Invert X</th>
      <th>Invert Y</th>
      <th>Invert Z</th>
    </tr>
    <tr>
      <td>0</td>
      <td>00000000</td>
      <td>N</td>
      <td>N</td>
      <td>N</td>
    </tr>
    <tr>
      <td>1</td>
      <td>00000001</td>
      <td>Y</td>
      <td>N</td>
      <td>N</td>
    </tr>
    <tr>
      <td>2</td>
      <td>00000010</td>
      <td>N</td>
      <td>Y</td>
      <td>N</td>
    </tr>
    <tr>
      <td>3</td>
      <td>00000011</td>
      <td>Y</td>
      <td>Y</td>
      <td>N</td>
    </tr>
    <tr>
      <td>4</td>
      <td>00000100</td>
      <td>N</td>
      <td>N</td>
      <td>Y</td>
    </tr>
    <tr>
      <td>5</td>
      <td>00000101</td>
      <td>Y</td>
      <td>N</td>
      <td>Y</td>
    </tr>
    <tr>
      <td>6</td>
      <td>00000110</td>
      <td>N</td>
      <td>Y</td>
      <td>Y</td>
    </tr>
    <tr>
      <td>7</td>
      <td>00000111</td>
      <td>Y</td>
      <td>Y</td>
      <td>Y</td>
    </tr>
  </tbody>
</table>

<p></p>

<h3 id="P-GRBL-003">$3 - Direction port invert, mask</h3>

<p>This setting inverts the direction signal for each axis. By default, Grbl assumes that the axes
move in a positive direction when the direction pin signal is low, and a negative direction when
the pin is high. Often, axes don't move this way with some machines. This setting will invert the
direction pin signal for those axes that move the opposite way.</p>

<p>This invert mask setting works exactly like the step port invert mask and stores which axes to
invert as bit flags. To configure this setting, you simply need to send the value for the axes you
want to invert. Use the table above. For example, if want to invert the Y axis direction only,
you'd send <code>$3=2</code> to Grbl and the setting should now read <code>$3=2 (dir port invert
mask:00000010)</code> </p>

<p></p>

<h3 id="P-GRBL-004">$4 - Step enable invert, boolean</h3>

<p>By default, the stepper enable pin is high to disable and low to enable. If your setup needs the
opposite, just invert the stepper enable pin by typing $4=1. Disable with <code>$4=0</code>. (May
need a power cycle to load the change.)</p>

<p></p>

<h3 id="P-GRBL-005">$5 - Limit pins invert, boolean</h3>

<p>By default, the limit pins are held normally-high with the Arduino's internal pull-up resistor.
When a limit pin is low, Grbl interprets this as triggered. For the opposite behavior, just invert
the limit pins by typing <code>$5=1</code>. Disable with <code>$5=0</code>. You may need a power
cycle to load the change.</p>

<p>NOTE: For more advanced usage, the internal pull-up resistor on the limit pins may be disabled
in config.h.</p>

<p></p>

<h3 id="P-GRBL-006">$6 - Probe pin invert, boolean</h3>

<p>By default, the probe pin is held normally-high with the Arduino's internal pull-up resistor.
When the probe pin is low, Grbl interprets this as triggered. For the opposite behavior, just
invert the probe pin by typing <code>$6=1</code>. Disable with <code>$6=0</code>. You may need a
power cycle to load the change.</p>

<p></p>

<h3 id="P-GRBL-010">$10 - Status report, mask</h3>

<p>This setting determines what Grbl real-time data it reports back to the user when a '?' status
report is sent. This data includes current run state, real-time position, real-time feed rate, pin
states, current override values, buffer states, and the g-code line number currently executing (if
enabled through compile-time options).</p>

<p>By default, the new report implementation in Grbl v1.1+ will include just about everything in
the standard status report. A lot of the data is hidden and will appear only if it changes. This
increases efficiency dramatically over of the old report style and allows you to get faster updates
and still get more data about your machine. The interface documentation outlines how it works and
most of it applies only to GUI developers or the curious.</p>

<p>To keep things simple and consistent, Grbl v1.1 has only two reporting options. These are
primarily here just for users and developers to help set things up.</p>

<p>Position type may be specified to show either machine position (MPos:) or work position (WPos:),
but no longer both at the same time. Enabling work position is useful in certain scenarios when
Grbl is being directly interacted with through a serial terminal, but machine position reporting
should be used by default. Usage data of Grbl's planner and serial RX buffers may be enabled. This
shows the number of blocks or bytes available in the respective buffers. This is generally used to
helps determine how Grbl is performing when testing out a streaming interface. This should be
disabled by default. Use the table below enables and disable reporting options. Simply add the
values listed of what you'd like to enable, then save it by sending Grbl your setting value. For
example, the default report with machine position and no buffer data reports setting is $10=1. If
work position and buffer data are desired, the setting will be $10=2.</p>

<table>
  <tbody>
    <tr>
      <th>Report Type</th>
      <th>Value</th>
      <th>Description</th>
    </tr>
    <tr>
      <td>Position Type</td>
      <td>0</td>
      <td>Enable WPos: Disable MPos:.</td>
    </tr>
    <tr>
      <td>Position Type</td>
      <td>1</td>
      <td>Enable MPos:. Disable WPos:.</td>
    </tr>
    <tr>
      <td>Buffer Data</td>
      <td>2</td>
      <td>Enabled Buf: field appears with planner and serial RX available buffer.</td>
    </tr>
  </tbody>
</table>

<p></p>

<div class="warning">
<strong>Warning: </strong><strong>Candle</strong> does not work properly with $10=2.</div>

<h3 id="P-GRBL-011">$11 - Junction deviation, mm</h3>

<p>Junction deviation is used by the acceleration manager to determine how fast it can move through
line segment junctions of a G-code program path. For example, if the G-code path has a sharp 10
degree turn coming up and the machine is moving at full speed, this setting helps determine how
much the machine needs to slow down to safely go through the corner without losing steps.</p>

<p>How we calculate it is a bit complicated, but, in general, higher values gives faster motion
through corners, while increasing the risk of losing steps and positioning. Lower values makes the
acceleration manager more careful and will lead to careful and slower cornering. So if you run into
problems where your machine tries to take a corner too fast, decrease this value to make it slow
down when entering corners. If you want your machine to move faster through junctions, increase
this value to speed it up. For curious people, hit this link to read about Grbl's cornering
algorithm, which accounts for both velocity and junction angle with a very simple, efficient, and
robust method.</p>

<h3 id="P-GRBL-012">$12 – Arc tolerance, mm</h3>

<p>Grbl renders G2/G3 circles, arcs, and helices by subdividing them into teeny tiny lines, such
that the arc tracing accuracy is never below this value. You will probably never need to adjust
this setting, since 0.002mm is well below the accuracy of most all CNC machines. But if you find
that your circles are too crude or arc tracing is performing slowly, adjust this setting. Lower
values give higher precision but may lead to performance issues by overloading Grbl with too many
tiny lines. Alternately, higher values traces to a lower precision, but can speed up arc
performance since Grbl has fewer lines to deal with.</p>

<p>For the curious, arc tolerance is defined as the maximum perpendicular distance from a line
segment with its end points lying on the arc, aka a chord. With some basic geometry, we solve for
the length of the line segments to trace the arc that satisfies this setting. Modeling arcs in this
way is great, because the arc line segments automatically adjust and scale with length to ensure
optimum arc tracing performance, while never losing accuracy.</p>

<h3 id="P-GRBL-013">$13 - Report inches, boolean</h3>

<p>Grbl has a real-time positioning reporting feature to provide a user feedback on where the
machine is exactly at that time, as well as, parameters for coordinate offsets and probing. By
default, it is set to report in mm, but by sending a <code>$13=1</code> command, you send this
boolean flag to true and these reporting features will now report in inches. <code>$13=0</code> to
set back to mm.</p>

<p></p>

<h3 id="P-GRBL-020">$20 - Soft limits, boolean</h3>

<p>Soft limits is a safety feature to help prevent your machine from traveling too far and beyond
the limits of travel, crashing or breaking something expensive. It works by knowing the maximum
travel limits for each axis and where Grbl is in machine coordinates. Whenever a new G-Code motion
is sent to Grbl, it checks whether or not you accidentally have exceeded your machine space. If you
do, Grbl will issue an immediate feed hold wherever it is, shutdown the spindle and coolant, and
then set the system alarm indicating the problem. Machine position will be retained afterwards,
since it's not due to an immediate forced stop like hard limits.</p>

<p>NOTE: Soft limits requires homing to be enabled and accurate axis maximum travel settings,
because Grbl needs to know where it is. $20=1 to enable, and $20=0 to disable.</p>

<p></p>

<h3 id="P-GRBL-021">$21 - Hard limits, boolean</h3>

<p>Hard limit work basically the same as soft limits, but use physical switches instead. Basically
you wire up some switches (mechanical, magnetic, or optical) near the end of travel of each axes,
or where ever you feel that there might be trouble if your program moves too far to where it
shouldn't. When the switch triggers, it will immediately halt all motion, shutdown the coolant and
spindle (if connected), and go into alarm mode, which forces you to check your machine and reset
everything.</p>

<p>To use hard limits with Grbl, the limit pins are held high with an internal pull-up resistor, so
all you have to do is wire in a normally-open switch with the pin and ground and enable hard limits
with $21=1. (Disable with $21=0.) We strongly advise taking electric interference prevention
measures. If you want a limit for both ends of travel of one axes, just wire in two switches in
parallel with the pin and ground, so if either one of them trips, it triggers the hard limit.</p>

<p>Keep in mind, that a hard limit event is considered to be critical event, where steppers
immediately stop and will have likely have lost steps. Grbl doesn't have any feedback on position,
so it can't guarantee it has any idea where it is. So, if a hard limit is triggered, Grbl will go
into an infinite loop ALARM mode, giving you a chance to check your machine and forcing you to
reset Grbl. Remember it's a purely a safety feature.</p>

<p></p>

<h3 id="P-GRBL-022">$22 - Homing Cycle, boolean</h3>

<p>Ahh, homing. For those just initiated into CNC, the homing cycle is used to accurately and
precisely locate a known and consistent position on a machine every time you start up your Grbl
between sessions. In other words, you know exactly where you are at any given time, every time. Say
you start machining something or are about to start the next step in a job and the power goes out,
you re-start Grbl and Grbl has no idea where it is due to steppers being open-loop control. You're
left with the task of figuring out where you are. If you have homing, you always have the machine
zero reference point to locate from, so all you have to do is run the homing cycle and resume where
you left off.</p>

<p>To set up the homing cycle for Grbl, you need to have limit switches in a fixed position that
won't get bumped or moved, or else your reference point gets messed up. Usually they are setup in
the farthest point in +x, +y, +z of each axes. Wire your limit switches in with the limit pins, add
a recommended RC-filter to help reduce electrical noise, and enable homing. If you're curious, you
can use your limit switches for both hard limits AND homing. They play nice with each other.</p>

<p>Prior to trying the homing cycle for the first time, make sure you have setup everything
correctly, otherwise homing may behave strangely. First, ensure your machine axes are moving in the
correct directions per Cartesian coordinates (right-hand rule). If not, fix it with the $3
direction invert setting. Second, ensure your limit switch pins are not showing as 'triggered' in
Grbl's status reports. If are, check your wiring and settings. Finally, ensure your $13x max travel
settings are somewhat accurate (within 20%), because Grbl uses these values to determine how far it
should search for the homing switches.</p>

<p>By default, Grbl's homing cycle moves the Z-axis positive first to clear the workspace and then
moves both the X and Y-axes at the same time in the positive direction. To set up how your homing
cycle behaves, there are more Grbl settings down the page describing what they do (and compile-time
options as well.)</p>

<p>Also, one more thing to note, when homing is enabled. Grbl will lock out all G-code commands
until you perform a homing cycle. Meaning no axes motions, unless the lock is disabled ($X) but
more on that later. Most, if not all CNC controllers, do something similar, as it is mostly a
safety feature to prevent users from making a positioning mistake, which is very easy to do and be
saddened when a mistake ruins a part. If you find this annoying or find any weird bugs, please let
us know and we'll try to work on it so everyone is happy. :)</p>

<p>NOTE: Check out config.h for more homing options for advanced users. You can disable the homing
lockout at startup, configure which axes move first during a homing cycle and in what order, and
more.</p>

<p></p>

<h3 id="P-GRBL-023">$23 - Homing dir invert, mask</h3>

<p>By default, Grbl assumes your homing limit switches are in the positive direction, first moving
the z-axis positive, then the x-y axes positive before trying to precisely locate machine zero by
going back and forth slowly around the switch. If your machine has a limit switch in the negative
direction, the homing direction mask can invert the axes' direction. It works just like the step
port invert and direction port invert masks, where all you have to do is send the value in the
table to indicate what axes you want to invert and search for in the opposite direction.</p>

<p>Sets direction of travel for homing cycle for each axis. Last 3 bits set direction for ZYX
respectively.</p>

<p></p>

<h3 id="P-GRBL-024">$24 - Homing feed, mm/mink</h3>

<p>Speed of movement for last part of homing cycle.</p>

<h3 id="P-GRBL-025">$25 - Homing seek, mm/min</h3>

<p>Speed of movement for first part of homing cycle.</p>

<h3 id="P-GRBL-026">$26 - Homing debounce, milliseconds</h3>

<p>Debounce time in milliseconds for homing switches.</p>

<h3 id="P-GRBL-027">$27 - homing pull-off, millimeters</h3>

<p>Amount of pullback when homing routine hits a switch. Ensures that switches are not still
activated after homing cycle if limit switches are enabled.</p>

<h3 id="P-GRBL-030">$30 - Max spindle speed, RPM</h3>

<p>This sets the spindle speed for the maximum 5V PWM pin output. For example, if you want to set
10000rpm at 5V, program $30=10000. For 255rpm at 5V, program $30=255. If a program tries to set a
higher spindle RPM greater than the $30 max spindle speed, Grbl will just output the max 5V, since
it can't go any faster. By default, Grbl linearly relates the max-min RPMs to 5V-0.02V PWM pin
output in 255 equally spaced increments. When the PWM pin reads 0V, this indicates spindle
disabled. Note that there are additional configuration options are available in config.h to tweak
how this operates.</p>

<p><span style="color:#ff0000">It is not clearly stated if the value 1000 means max power or 1000
rpms</span></p>

<p><strong><span style="color:#8000ff">CHECKME: 1000 or 8000</span> In documents, this issue is not
"understandable". It is not clearly stated (to me) by the authors.</strong></p>

<p><span style="color:#ff0000">try 1000 and 8000 and run the spindle. It seems it is the same
rpms.</span></p>

<p>So stick to 1000.</p>

<h3 id="P-GRBL-031">$31 - Min spindle speed, RPM</h3>

<p>This sets the spindle speed for the minimum 0.02V PWM pin output (0V is disabled). Lower RPM
values are accepted by Grbl but the PWM output will not go below 0.02V, except when RPM is zero. If
zero, the spindle is disabled and PWM output is 0V.</p>

<p></p>

<h3 id="P-GRBL-032">$32 - Laser mode, boolean</h3>

<p>When enabled, Grbl will move continuously through consecutive G1, G2, or <em>G3</em> motion
commands when programmed with a S spindle speed (laser power). The spindle PWM pin will be updated
instantaneously through each motion without stopping. Please read the GRBL laser documentation and
your laser device documentation prior to using this mode. Lasers are very dangerous. They can
instantly damage your vision permanantly and cause fires. Grbl does not assume any responsibility
for any issues the firmware may cause, as defined by its GPL license.</p>

<p>When disabled, Grbl will operate as it always has, stopping motion with every S spindle speed
command. This is the default operation of a milling machine to allow a pause to let the spindle
change speeds.</p>

<p><span style="color:#ff0000">In Laser mode(using LASERGrgl), set $32 = 1 and $30 has a value from
0 to 255.</span></p>

<p><span style="color:#ff0000">When switching back to Milling Mode(usind Candle), set $32=0. Do not
forget to reset the spindle speed too ($30=1000).</span></p>

<p></p>

<h3 id="P-GRBL-100">$100, $101 and $102 – [X,Y,Z] steps/mm</h3>

<p>Grbl needs to know how far each step will take the tool in reality. To calculate steps/mm for an
axis of your machine you need to know:</p>
<ul>
  <li>The mm traveled per revolution of your stepper motor. This is dependent on your belt drive
    gears or lead screw pitch.</li>
  <li>The full steps per revolution of your steppers (typically 200)</li>
  <li>The microsteps per step of your controller (typically 1, 2, 4, 8, or 16). Tip: Using high
    microstep values (e.g., 16) can reduce your stepper motor torque, so use the lowest that gives
    you the desired axis resolution and comfortable running properties. </li>
</ul>

<p>The steps/mm can then be calculated like this: steps_per_mm =
(steps_per_revolution*microsteps)/mm_per_rev</p>

<p>Compute this value for every axis and write these settings to Grbl.</p>

<p></p>

<h3 id="P-GRBL-110">$110, $111 and $112 – [X,Y,Z] Max rate, mm/min</h3>

<p>This sets the maximum rate each axis can move. Whenever Grbl plans a move, it checks whether or
not the move causes any one of these individual axes to exceed their max rate. If so, it'll slow
down the motion to ensure none of the axes exceed their max rate limits. This means that each axis
has its own independent speed, which is extremely useful for limiting the typically slower
Z-axis.</p>

<p>The simplest way to determine these values is to test each axis one at a time by slowly
increasing max rate settings and moving it. For example, to test the X-axis, send Grbl something
like <em>G0</em> X50 with enough travel distance so that the axis accelerates to its max speed.
You'll know you've hit the max rate threshold when your steppers stall. It'll make a bit of noise,
but shouldn't hurt your motors. Enter a setting a 10-20% below this value, so you can account for
wear, friction, and the mass of your workpiece/tool. Then, repeat for your other axes.</p>

<p>NOTE: This max rate setting also sets the <em>G0</em> seek rates.</p>

<p></p>

<h3 id="P-GRBL-120">$120, $121, $122 – [X,Y,Z] Acceleration, mm/sec^2</h3>

<p>This sets the axes acceleration parameters in mm/second/second. Simplistically, a lower value
makes Grbl ease slower into motion, while a higher value yields tighter moves and reaches the
desired feed rates much quicker. Much like the max rate setting, each axis has its own acceleration
value and are independent of each other. This means that a multi-axis motion will only accelerate
as quickly as the lowest contributing axis can.</p>

<p></p>

<p>Again, like the max rate setting, the simplest way to determine the values for this setting is
to individually test each axis with slowly increasing values until the motor stalls. Then finalize
your acceleration setting with a value 10-20% below this absolute max value. This should account
for wear, friction, and mass inertia. We highly recommend that you dry test some G-Code programs
with your new settings before committing to them. Sometimes the loading on your machine is
different when moving in all axes together.</p>

<p></p>

<h3 id="P-GRBL-130">$130, $131, $132 – [X,Y,Z] Max travel, mm</h3>

<p>This sets the maximum travel from end to end for each axis in mm. This is only useful if you
have soft limits (and homing) enabled, as this is only used by Grbl's soft limit feature to check
if you have exceeded your machine limits with a motion command.</p>

<div style="height:30px">
</div>

<h2 id="P-21">Grbl Errors Codes</h2>
<ul>
  <li><strong>error:1</strong> : G-Code words consist of a letter and a value. Letter was not
  found.</li>
  <li><strong>error:2</strong> : Numeric value format is not valid or missing an expected
  value.</li>
  <li><strong>error:3</strong> : Grbl ‘$’ system command was not recognized or supported.</li>
  <li><strong>error:4</strong> : Negative value received for an expected positive value.</li>
  <li><strong>error:5</strong> : Homing cycle is not enabled via settings.</li>
  <li><strong>error:6</strong> : Minimum step pulse time must be greater than 3usec</li>
  <li><strong>error:7</strong> : EEPROM read failed. Reset and restored to default values.</li>
  <li><strong>error:8</strong> : Grbl ‘$’ command cannot be used unless Grbl is IDLE. Ensures
    smooth operation during a job.</li>
  <li><strong>error:9</strong> : G-Code locked out during alarm or jog state</li>
  <li><strong>error:10</strong>: Soft limits cannot be enabled without homing also enabled.</li>
  <li><strong>error:11</strong>: Max characters per line exceeded. Line was not processed and
    executed.</li>
  <li><strong>error:12</strong>: (Compile Option) Grbl ‘$’ setting value exceeds the maximum
    step rate supported.</li>
  <li><strong>error:13</strong>: Safety door detected as opened and door state initiated.</li>
  <li><strong>error:14</strong>: (Grbl-Mega Only) Build info or startup line exceeded EEPROM line
    length limit.</li>
  <li><strong>error:15</strong>: Jog target exceeds machine travel. Command ignored.</li>
  <li><strong>error:16</strong>: Jog command with no ‘=’ or contains prohibited G-Code .</li>
  <li><strong>error:20</strong>: Unsupported or invalid G-Code command found in block.</li>
  <li><strong>error:21</strong>: More than one G-Code command from same modal group found in
  block.</li>
  <li><strong>error:22</strong>: Feed rate has not yet been set or is undefined.</li>
  <li><strong>error:23</strong>: G-Code command in block requires an integer value.</li>
  <li><strong>error:24</strong>: Two G-Code commands that both require the use of the XYZ axis
    words were detected in the block.</li>
  <li><strong>error:25</strong>: A G-Code word was repeated in the block.</li>
  <li><strong>error:26</strong>: A G-Code command implicitly or explicitly requires XYZ axis words
    in the block but none were detected.</li>
  <li><strong>error:27</strong>: N line number value is not within the valid range of 1 –
    9,999,999.</li>
  <li><strong>error:28</strong>: A G-Code command was sent, but is missing some required P or L
    value words in the line.</li>
  <li><strong>error:29</strong>: Grbl supports six work coordinate systems G54-G59. G59.1, G59.2,
    and G59.3 are not supported.</li>
  <li><strong>error:30</strong>: The G53 G-Code command requires either a G0 seek or G1 feed motion
    mode to be active. A different motion was active.</li>
  <li><strong>error:31</strong>: There are unused axis words in the block and G80 motion mode
    cancel is active.</li>
  <li><strong>error:32</strong>: A G2 or G3 arc was commanded but there are no XYZ axis words in
    the selected plane to trace the arc.</li>
  <li><strong>error:33</strong>: The motion command has an invalid target. G2, G3, and G38.2
    generates this error, if the arc is impossible to generate or if the probe target is the
    current position.</li>
  <li><strong>error:34</strong>: A G2 or G3 arc, traced with the radius definition, had a
    mathematical error when computing the arc geometry. Try either breaking up the arc into
    semi-circles or quadrants, or redefine them with the arc offset definition.</li>
  <li><strong>error:35</strong>: A G2 or G3 arc, traced with the offset definition, is missing the
    IJK offset word in the selected plane to trace the arc.</li>
  <li><strong>error:36</strong>: There are unused, leftover G-Code words that aren’t used by any
    command in the block.</li>
  <li><strong>error:37</strong>: The G43.1 dynamic tool length offset command cannot apply an
    offset to an axis other than its configured axis. The Grbl default axis is the Z-axis.</li>
  <li><strong>error:38</strong>: An invalid tool number sent to the parser</li>
</ul>
<ul>
  <li><strong>ALARM:1</strong>: Hard limit triggered. Machine position is likely lost due to sudden
    and immediate halt. Re-homing is highly recommended.</li>
  <li><strong>ALARM:2</strong>: G-Code motion target exceeds machine travel. Machine position
    safely retained. Alarm may be unlocked.</li>
  <li><strong>ALARM:3</strong>: Reset while in motion. Grbl cannot guarantee position. Lost steps
    are likely. Re-homing is highly recommended.</li>
  <li><strong>ALARM:4</strong>: Probe fail. The probe is not in the expected initial state before
    starting probe cycle, where G38.2 and G38.3 is not triggered and G38.4 and G38.5 is
  triggered.</li>
  <li><strong>ALARM:5</strong>: Probe fail. Probe did not contact the workpiece within the
    programmed travel for G38.2 and G38.4.</li>
  <li><strong>ALARM:6</strong>: Homing fail. Reset during active homing cycle.</li>
  <li><strong>ALARM:7</strong>: Homing fail. Safety door was opened during active homing cycle.</li>
  <li><strong>ALARM:8</strong>: Homing fail. Cycle failed to clear limit switch when pulling off.
    Try increasing pull-off setting or check wiring.</li>
  <li><strong>ALARM:9</strong>: Homing fail. Could not find limit switch within search distance.
    Defined as 1.5 * max_travel on search and 5 * pulloff on locate phases.</li>
</ul>
<ul>
  <li><strong>Hold:0</strong> : Hold complete. Ready to resume.</li>
  <li><strong>Hold:1</strong> : Hold in-progress. Reset will throw an alarm.</li>
</ul>
<ul>
  <li><strong>Door:0</strong>: Door closed. Ready to resume.</li>
  <li><strong>Door:1</strong>: Machine stopped. Door still ajar. Can’t resume until closed.</li>
  <li><strong>Door:2</strong>: Door opened. Hold (or parking retract) in-progress. Reset will throw
    an alarm.</li>
  <li><strong>Door:3</strong>: Door closed and resuming. Restoring from park, if applicable. Reset
    will throw an alarm.</li>
</ul>

<div style="height:30px">
</div>
<!-- ----------------------------------------------------------------------------------------------------------->
<!-- ----------------------------------------------------------------------------------------------------------->

<h2 id="P-22">Upgrading the CNC 1310</h2>

<h3>Mechanics</h3>

<p>Here is a <a href="https://rumble.com/vnj1tl-cnc-1310.-correct-assembly-of-the-anti-backlash-unit.html">link</a>
 to a video concerning how to mount "the right way" the backlash nuts.</p>

<h3>Spindle</h3>

<p>There is on Aliexpress a small brushless spindle of diameter 42 cm, so it can be installed on 1310's existing plates. 
Unfortunately, its screws are disposed differently than the standart spindle. This means, you have to drill some holes
on the bottom plate at the right place. </p>

<p>An other possibilty is to "make" new plates for other types of spindles. I give in PyCut source code some freeCAD examples.</p>

<p>Lastly, as seen on YouTube, you can buy an high-end 42 cm diameter rather expensive spindle and a custom bracket that fits inside 
the existing 2 plates.</p>


<h2 id="P-23">Upgrading the CNC 1419</h2>

<p>A YouTube channel called <strong>"Propeller Labs"</strong> demonstrates various upgrades of the
CNC 1419. </p>

<h3 id="P-23-01">Spindle</h3>

<p>AliExpress sells a whole family of brushless spindles, with power of 300, 400, 500 or 600 W. It
seems the 600W spindle has only 9000 rpms, compared to 12000 rpms for the 500 W one for example.</p>

<h4>Mouting the spindle on the machine</h4>

<p>A straightforward upgrade consists in installing this 500W spindle on the machine. Yes, mounting
it does not required any special skills, as its bracket can be attached on the machine with only 4
T-Nut 6mm, also purchasable on AliExpress as well (these T-Nut 6mm are by the way quite practical,
and I have bought a bunch of them). </p>

<p>There are also T-Nut 5mm, and <strong>Propeller Labs</strong> uses theses ones, and encloses the
(not so) corresponding 5mm bracket screws in some plastics tubes to fit in the spindle bracket,
whose holes are infact 6mm diameter as the standard screws.</p>

<p>What is better ? </p>

<p>Of course you need an extra power supply (48 Volts, 500 W) to run the spindle.</p>

<h4>Controlling the spindle from the software</h4>

<p>With the standard spindle, this occurs. But when installing the 500W brushless spindle, the
controller board does not know anymore the spindle. See <strong>Propeller Labs</strong> episode
<strong>#8. CNC 1419</strong> how to fix this!</p>

<p>Basically, one has to connect the board spindle + pin (PWM) and the board 5V+ output, Enable and Ground
pins (find them!) to a device transforming the PWM signal to a voltage between 0 - 24 V, and connecting this device to
the brushless motor driver.</p>
<img src="cnc-doc/images/22_CnC1419_Upgrade/CNC1419-SpindleConnection-1.png" width="800"> <br>
<img src="cnc-doc/images/22_CnC1419_Upgrade/CNC1419-SpindleConnection-2.png" width="800"> <br>
<img src="cnc-doc/images/22_CnC1419_Upgrade/CNC1419-SpindleConnection-3.png" width="800"> 

<p>Just be sure of what you are doing if you don#t want to burn your board. There may be some complications!</p>

<p></p>

<h3 id="P-23-02">Stepper Motors and Stepper Motor Drivers</h3>

<p>Reference: <a
href="https://www.pololu.com/category/120/stepper-motor-drivers">https://www.pololu.com/category/120/stepper-motor-drivers</a>
</p>

<p>Reference: <a href="https://3dwork.io/en/tmc-drivers/">https://3dwork.io/en/tmc-drivers/</a> </p>

<p>Stepper motor drivers are specifically designed to drive stepper motors, which are capable of
continuous rotation with precise position control, even without a feedback system. These modules
are generally basic carrier boards for a variety of stepper motor driver ICs that offer low-level
interfaces like inputs for directly initiating each step. An external microcontroller is typically
required for generating these low-level signals.</p>

<p>The following table, organized by increasing operating voltage, compare some drivers:</p>

<p>Added to the table is the widely used TMC-2209 driver in 3D printers and pins compatibles with
the A4988, as well as the TMC-5160 and TB-6600 for information:</p>

<style type="text/css">
table.active_controller_comparison td.spacer {border: none; background: white;}
table.active_controller_comparison td.white {background: white;}</style>

<div style="text-align: center;">

<div style="display: inline-block; max-width: 100%; overflow: auto; margin-bottom: 1em;">

<table style="min-width: 600px;" class="active_controller_comparison">
  <tbody>
    <tr>
      <td></td>
      <th style="text-align:center;vertical-align:top;"><a href="/product/1182"><img
        src="https://a.pololu-files.com/picture/0J4576.80.jpg?919b80dbdadf6ef1f6be3993fabbefbc"
        alt=""></a><br>
        <a href="/product/1182">A4988<br>
        (original)</a></th>
      <th style="vertical-align:top;"><a href="/product/2128"><img
        src="https://a.pololu-files.com/picture/0J4071.80.jpg?5f72a61139d94f2b8aca55d7727ccced"
        alt=""></a><br>
        <a href="/product/2128">A4988,<br>
        Black Ed.</a></th>
      <th style="vertical-align:top;"><a href="/product/2133"><img
        src="https://a.pololu-files.com/picture/0J4225.85.jpg?e6be11fb1f0070573e1feee735e58660"
        alt=""></a><br>
        <a href="/product/2133">DRV8825</a></th>
      <th style="vertical-align:top;"><a href="/product/3096"><img
        src="https://a.pololu-files.com/picture/0J9585.80.jpg?26b6148a468d49021b4b206a5d1e5b5a"
        alt=""></a><br>
        <a href="/product/3096">TB67S249-FTG</a></th>
      <th style="vertical-align:top;"><img src="cnc-doc/images/22_CnC1419_Upgrade/tmc2209-zoom.jpg"
        width="58px" alt=""><br>
        <a href="/product/2878">TMC-2209</a></th>
      <th style="vertical-align:top;"><img src="cnc-doc/images/22_CnC1419_Upgrade/tmc5160-zoom.webp"
        width="78px" alt=""><br>
        <a href="/product/2878">TMC-5160</a></th>
      <th style="vertical-align:top;"><img src="cnc-doc/images/22_CnC1419_Upgrade/tb6600-zoom.jpg"
        width="58px" alt=""><br>
        <a href="/product/2878">TB-6600</a></th>
    </tr>
    <tr>
      <th>Driver chip:</th>
      <td colspan="2">Allegro A4988</td>
      <td>TI<br>DRV8825</td>
      <td>Toshiba<br>TB67S249-FTG</td>
      <td>Trinamic <br>TMC-2209</td>
      <td>Trinamic <br>TMC-5160</td>
      <td>Toshiba <br>TB-6600</td>
    </tr>
    <tr>
      <th>Min operating voltage:</th>
      <td colspan="2">8 V</td>
      <td>8.2 V</td>
      <td>10 V</td>
      <td>4.75 V</td>
      <td>8 V</td>
      <td>9 V</td>
    </tr>
    <tr>
      <th>Max operating voltage:</th>
      <td colspan="2">35 V</td>
      <td>45 V</td>
      <td>47 V</td>
      <td>29 V</td>
      <td>60 V</td>
      <td>40 V</td>
    </tr>
    <tr>
      <th>Max continuous current per phase:<sup><strong>(1)</strong></sup></th>
      <td>1 A</td>
      <td>1.2 A</td>
      <td>1.5 A</td>
      <td>1.6 A</td>
      <td><strong>2.0 A</strong></td>
      <td><strong>3.0 A</strong></td>
      <td>3.5 A</td>
    </tr>
    <tr>
      <th>Peak current per phase:<sup><strong>(2)</strong></sup></th>
      <td colspan="2">2 A</td>
      <td>2.2 A</td>
      <td>4.5 A</td>
      <td><strong>2.8 A</strong></td>
      <td><strong>3.0 A</strong></td>
      <td>4.0 A</td>
    </tr>
    <tr>
      <th>Microstepping down to:</th>
      <td colspan="2">1/16</td>
      <td>1/32</td>
      <td>1/32</td>
      <td>1/64</td>
      <td>1/64</td>
      <td>1/32</td>
    </tr>
    <tr class="price">
      <th>1-piece price:</th>
      <td><span class="price">$1.00</span></td>
      <td><span class="price">$1.00</span></td>
      <td><span class="price">$1.00</span></td>
      <td><span class="price">$12.95</span></td>
      <td><span class="price">$6.00</span></td>
      <td><span class="price">$20.00</span></td>
      <td><span class="price">$8.00</span></td>
    </tr>
    <tr>
      <td class="spacer" colspan="7"></td>
      <td></td>
    </tr>
    <tr>
      <td style="text-align: left;" class="spacer" colspan="7"><strong>1</strong> without
        additional cooling.<br>
        <strong>2</strong> additional cooling required.</td>
      <td></td>
    </tr>
  </tbody>
</table>
</div>
</div>

<p>As you can see, the <strong>TMC-2209</strong> supports up to 2.0 Amperes (while the
<strong>A4988</strong> only 2 Amp at peak) it is therefore a perfect driver to run a Nema 17 motor
of greater power than those driven by a <strong>A4988</strong>. </p>

<p>Typically, the <strong>A4988</strong> drives small Nema-17 motors. These motors are circa 34 cm
long and I think they run at 1.2 or 1.5 Amp and have a torque of 42 Ncm.</p>

<p> Consider the <strong>Nema17 17HS19-2004S1</strong> motor of 48cm (19 inches) length: its holding 
torque is 59 Ncm and runs at 2 Amp, which is the upper limit for a <strong>A4988</strong> and thus 
not well suited for long jobs. But the <strong>TMC-2209</strong> is perfectly suited.</p>

<p>An even more powerful motor could be the <strong>Nema17 17HS24-2104S</strong>, 
which is 24 inchs long (60cm) and runs at 2.1 Amp. Its holding torque is 65Ncm, and its torque is higher
of about 1 third than the <strong>Nema17 17HS19-2004S1</strong>, but only at low speed (500RPM or less). </p>

<div class="info">
<strong>Info: </strong>See how <strong>Propeller Labs</strong> "prepares" these <strong>Nema17
17HS19-2004S1</strong> motors for the CNC1419. Looking at the motors's shafts which have (strangly)
some play, I have inserted, similarly to <strong>Propeller Labs</strong>, a small plastic washer of
1mm thickness on the shaft inside the motor so that there is no play anymore. See <strong>Propeller Labs</strong>
episodes <strong>#6 - #7. CNC 1419</strong></div>

<p>Now the neccessary power to run a board with 3 <strong>Nema17 17HS19-2004S1</strong> motors is 3
times (24 Volt * 2 Amp) = 3 x 48 W. So a better power supply than the (junk) one given as standard
for the CNC 1419 which has a max of 100W (or 120W) is needed. I found 5 ("brick" like) suitable
power supply: </p>
<ul>
  <li>Liteon 120 W at 24 Volt - if you do not upgrade your motors -</li>
  <li>Dell Notebook power supply 130 W at 19.5 Volt</li>
  <li>Dell Notebook power supply 180 W at 19.5 Volt</li>
  <li>Dell Notebook power supply 240 W at 19.5 Volt</li>
  <li>Samsung power supply 180 W at 24 Volt</li>
</ul>

<img src="cnc-doc\images\power_supply\liteon-120.png" width="200"></img> 
<img src="cnc-doc\images\power_supply\dell-130.png" width="200"></img> 
<img src="cnc-doc\images\power_supply\dell-180.png" width="200"></img> 
<img src="cnc-doc\images\power_supply\dell-240.png" width="200" height="266.6"></img> 
<img src="cnc-doc\images\power_supply\samsung-180.png" width="200"></img> 

<p>You just need the right adaptor for the connector output.</p>

<h3 id="P-23-03">Controller Boards</h3>

<h4>Grbl Boards</h4>

<p>These boards are run by the ATMega328P 8-bits chip. They are basically Arduino Uno R3 clones.
There are plenty of those on AliExpress</p>

<p>As done in <strong>Propeller Labs</strong>, it is possible to connect this kind of board with
the <strong>TB6600</strong> drivers which supports higher current. It is nevertheless not
straightforward because of its box enclosure so that connections (wires) from the controller board
to the drivers have to be soldered (at best) or plugged into the board stepper motors receptors
modules. This adds quite a lot of electric cables and is place consuming. And the drivers needs an
extra power supply together with the board own power supply and the 500W spindle power supply
too.</p>

<h4>Grbl_ESP32 Boards</h4>

<p>These boards are run by the 32-bits ESP32 chip.</p>

<h5>MakerBase MKS DLC32 V2.1 Board</h5>

<p>Easy to buy on AliExpress. Its pre-installed firmware (Marlin) is a clone of the FluidNC
firmware and supports the <strong>MKT TS35-R V2.0</strong> external display for an easy "offline"
control.</p>

<p>Note: You can install the FluidNC firmware on the MKS board, but this latter does not support
the <strong>MKT TS35-R</strong> display. </p>

<p>Why using this board? well it supports the <strong>TMC-2209</strong> stepper motor driver. I
consider utilizing the <strong>MKS DLC32 V2.1</strong> board as a perfect and easy replacement for
the CNC-1419 standard Grbl board, with the <strong>TMC-2209</strong> drivers and the <strong>Nema17
17HS19-2004S1</strong> motors.</p>

<h5>FluidNC Boards</h5>

<p>FluidNC proposes some "officially" supported boards. Among them are also boards for the
<strong>TMC-2209</strong> and <strong>TMC-5160</strong>. The drivers can be placed on a module or
be already soldered on the board, depending on the board.</p>

<p>Boards for the TMC5160 seems to be expensive (see FluidNC hardware page).</p>

<h3>Reducing the backlash</h3>

<p>See <strong>Propeller Labs</strong> episode <strong>#29. CNC 1419</strong> solution.</p>

<h3>Better bearings</h3>

<p>See <strong>Propeller Labs</strong> episode <strong>#19. CNC 1419</strong> solution.</p>
<br>
<br>
<!-- ----------------------------------------------------------------------------------------------------------->
<!-- -----------------------------------------------------------------------------------------------------------> 

<h2 id="P-03">First Steps - How to (not) crash the machine</h2>

<p><strong>The most important of all is not to crash the machine.</strong> </p>

<p>You crash the machine when you tell the machine to go 200 mm right when there is only place for
a travel of 100mm. This happens if you are already quite on the right.</p>

<p>You crash the machine in all case when you tell the 1419 machine to go up 100mm. The machine has
a max travel of about 45mm in the Z direction...</p>

<p>Well, the max travel settings of GRBL should protect you "a little bit", but certainly not in
all cases.</p>

<div class="warning">
<strong>Warning: </strong>In <strong>Candle</strong> the X/Y buttons to move the spindle are very
near the ones the move the Z axis . If you choose for X a step of 100mm in 1 click (funny, isn't
it), then you will certainly without noticing it also click on the Z "up" or Z "down" button. This
is far less funny... So just stick to low values for the step size (10mm).</div>

<div class="warning">
<strong>Warning: </strong>Take the habit, before you click on the Z "up" or Z "down", to always
look look first at the step size. Look too at the position of the spindle: is it already very low
or very high ? UGS solves this issue better than <strong>Candle</strong> because there is a step
size for X/Y and another step step for Z, which can be kept low (10mm or event lower, 1mm)</div>

<div class="warning">
<strong>Warning: </strong>It it easy to evaluate the position of the X and Y axis your your own
eyes. When experimeting, try to stay in the middle of the bed.</div>

<p>Actually, <strong>limits switches</strong> can avoid these problems. Limits switches are simple
ON/OFF interuptors which turn off the machine when the bounds the machine are reached. But the
CNC-1419 has no limit switches, and for small machines it may be not easy or even wise to mount
some. </p>

<p><strong>Now, what does mean "crashing the machine" ?</strong> : for X/Y directions, the gantry
cannot move anymore as the motors are trying to do, so in case the the 1419, the couplers will
break the connection between the motor shaft the the lead screw. In fact, this is the connection
"coupler-motor shaft" which is the weakest and thus that will break first. The connection "coupler-
lead screw" will remain.</p>

<p>Couplers are the devices which transfer power from the motor to the lead screw. As such they are
central components of a machine. Unfortunately in the 1419 Machine has only the cheapest
couplers.</p>

<p>This is a sort of safety mechanism. So the motors will continue to work without any effects on
the machine. You just have to abort the job and tighten the coupler again with the motor shaft.</p>

<p>Note: What is the best way to tighten the coupler to the shaft . Nowhere in the web I found a
reasonable explaination..... Maybe like this, or should it be only 1 screw ?:</p>
<img src="cnc-doc/images/coupling.svg" width="600"></img> 

<p>The second way to crash the machine as describe above is to ask "to much" to the machine.</p>

<p></p>

<p>Asking to much to the machine means among others:</p>
<ul>
  <li>Feed rate too high: how fast in moving the spindle in X/Y direction</li>
  <li>Plunge rate too high: how fast in entering the bit in the stock (Z) direction</li>
  <li>Depth pass too high: how deep is the cut</li>
  <li>The combinaison of the two first is too high</li>
</ul>

<p>You should be conservative with your settings. Recommended values for milling are:</p>
<ul>
  <li>Feed Rate: 200mm/min</li>
  <li>Plunge Rate: 50mm/min</li>
  <li>Depth per pass: 0.25 mm per pass (YES)</li>
</ul>

<p>Recommended values for carving are:</p>
<ul>
  <li>Feed Rate: 100mm/min (I have forgotten my settings)</li>
  <li>Plunge Rate: 50mm/min (I have forgotten my settings)</li>
  <li>Depth per pass: 0.15 mm per pass (I have forgotten my settings)</li>
</ul>

<p>By carving, you do not go too deep in the material. <strong>Easel will give reasonable
values.</strong></p>

<p>These settings are typically in the "transform CAD to G-CODE" section</p>

<p>Remember, the 3018 is quite weak, and is sold as a carving machine, not a milling machine.
Milling is funny too, use only best quality wood (Buche) or very light one as plywood (Sperrholz)
for this purpose.</p>

<p>If these values are too high, it happens what must happend: one coupler "breaks" the connection,
often in the middle of the job. So the job is ruined</p>

<p>You will crash the machine too when you start a job <strong>while the spindle is not
running</strong>. It is impossible for the bit to "enter" into the material. Something bad will
happen.</p>

<p>So it is better in the G-Code generation to tell the spindle to start "automatically" (and not
"manuallly"). When setting are on "starting manually", you will automatically forget soon or late
to start yourself the spindle!</p>

<div style="height:30px">
</div>
<!-- ----------------------------------------------------------------------------------------------------------->
<!-- ----------------------------------------------------------------------------------------------------------->

<h2 id="P-04">Tools Tutorials</h2>

<h2>Offline Controller</h2>

<p>The offline controller is <strong>useful for beginners</strong> when checking the machine for
the first time, because no computer is needed. So it is useful to check if the motors are working
well and the spindle is travelling, but please set a small step size (10mm) and do not use the Z
direction (you can do this with Candle). You can of course test the Z direction, but be sure first
to have set the step size to 10mm or lower, because the travel in the Z direction is so small.</p>

<p>Anyway, before acting on the Z direction, you should take the habit, before pushing the button,
to have a look at the step size on the device (offline controller or computer) and take a second
look at the position the the spindle in the Z axis to check its position. Only then push the button
Z "up" or Z "down".</p>

<p>It is also useful for <strong>advanced users</strong>, to start a job without computer. In this
case, you have to know exactly what the G-Code will do. At best you do so by visualising the G-Code
first in Candle, and check how high the spindle will travel in the Z axis. The travelling in the
X/Y direction is somehow already know, because you know the size of your working piece.</p>

<h3 id="P-04-01-01">Zero positionning</h3>

<p>When using it for "production", an important "feature" must be pointed: <strong>the machine
cannot be zeroed with this mini controller</strong>. Practically, this means that when starting a
nc file from the controller, the machine supposes <strong>it is already at zero</strong>. So the
user must first place the spindle at its zero, and this means among others that the spindle must
touch the stock (z=0). Only starting from this position makes sense.</p>

<p>Here is an example of a nc code which is thus <strong>potentially dangerous</strong> when
starting the file two time (nc code generated from JSCut):</p>
<pre><code class="language-gcode">G21         ; Set units to mm
G90         ; Absolute positioning
G1 Z10 F200      ; Move to clearance level

;
; Operation:    0
; Name:         
; Type:         Engrave
; Paths:        1
; Direction:    Conventional
; Cut Depth:    0.4000000000000001
; Pass Depth:   0.24999999999999997
; Plunge rate:  200
; Cut rate:     200
;

; Path 0
; Rapid to initial position

G1 Z0.0000
; plunge
G1 Z-0.2500 F200
; cut
G1 X0.0000 Y29.7365 F200
G1 X29.7365 Y29.7365
G1 X29.7365 Y0.0000
G1 X29.7365 Y0.0000
G1 X0.00000 Y0.0000

; Retract
G1 Z10.0000 F200
M2</code></pre>

<p>So at start the spindle goes up 10mm ("Move to clearance level"), then does its job, and finish
the job ("Retract") by going up 10mm again. All thing OK, but what happens when you immediately
restart the job? Of course in production you will not, but maybe when "testing" the controller. So
the second time at start, the spindle goes 10 mm again, that is, it will be 20mm above the stock.
So it could reach the maximal height faster than you thought...</p>

<p><strong>Note too that JSCut ommits M3 codes at start and end </strong> (but this is an other
story)</p>

<h3 id="P-04-01-02">Testing the Max Travels</h3>

<p>The machine dimensions are known, so the <strong>Max Travelling</strong> parameters can be set:
as test, set</p>
<pre><code class="language-gcode">$130=45
$131=45
$132=10</code></pre>

<p>Then try to jog of a distance of 30mm</p>

<h3 id="P-04-01-03">Testing the Soft Limits</h3>

<p>Softs limits are meant to be used with homing. But the <strong>1419</strong> has no homing.
However soft limits can be tested and used.</p>

<p>First positionate the spindle in the middle of the machine. You know there is for example only
60 mm travel in the X direction. Set the Grbl settings $20 = 1 (soft limits "on"), 
and the max X travel to 45 mm ($130 = 45). First try to move the spindle in the negative range: it won't move.
Then try to move the spindle in the positive X direction of a  step of 10mm: the spindle moves. 
Repeat the process : after having reach a total of 40mm, and at this pooint for the next step, the spindle won't move. 
So it works best when you start a job where the spindle is indeed at the middle of the machine, or a the top left. 
Set then the machine coordinates to zero, and your G-Code contains only positive coordinates. 
Then set the max travel to your machine size.
</p>

<p>After this test, don't forget to reset $20 = 0 if you don't want to uise soft limits.</p>
<br>


<h2 id="P-04-02">Candle</h2>

<h3 id="P-04-02-01">Lesson 1: Jogging - Moving the axis</h3>

<p>Note that in Candle, the entry field "<strong>step</strong>" means a <strong>displacement in
mm</strong>.</p>

<p>Even if the default <strong>Grbl settings</strong> for the machine should be the right ones, in
order not to crash the machine, it is better to start with the minimum step: step= 0.01 and see if
the x axis moves a bit. If Ok, set the step to 0,1, then 1, then to 10, then 100mm</p>

<p>As the CNC 1419 is already configured, for a step of 10mm, the x-axis should move of 1cm.</p>

<p>When moving in the z direction, remember that there is much less movement, so 1 click (for a
step of 10 mm) can be already dangerous:</p>
<ul>
  <li>in the down direction: the bed could be reached and the bit damages then the bed</li>
  <li>in the upward direction: then at least the coupler "breaks" because the spindle holder cannot
    go up anymore</li>
</ul>

<p>These movements correspond to the G-Code command G1 (linear move) in modus G91 (relative
distance mode). G90 and G91 are the basic commands to set the move modus:</p>
<ul>
  <li>G90: absolute distance modus</li>
  <li>G91: absolute distance modus</li>
</ul>
<pre><code class="language-gcode">G91        (relativ move modus)
G1  X10    (move 10mm on the X axis)</code></pre>

<p>Infact GRBL may log an error "22", because the feed rate is not yet set after the G91
command:</p>
<pre><code class="language-gcode">G91        (relativ move modus)
G1  X10  F500  (move 10mm on the X axis with feed speed 500)
G1  X-10       (move back)</code></pre>

<h3 id="P-04-02-02">Lesson 2: Calibrating the machine</h3>

<p>If one of the axis is moving in the <strong>wrong direction</strong>, then the $3 parameter has
to be set correctly</p>
<span style="color:#0080ff">$3= &lt;value&gt;</span> 

<p>It is important to calibrate the axis: the relevant parameters are:</p>
<pre><code class="language-gcode">$100
$101
$102</code></pre>

<p>The current value <code class="language-gcode">$100=800</code> means that the machine takes 800
steps to move 1mm. To check this, move the machine in the x direction of (theorically) 100mm wiht
the jogg control, measure then the real distance moved and calculate a new steps per mm value: </p>
<pre><code class="language-gcode">value = [ theorical jogged distance / real measured distance ] * current steps/mm</code></pre>

<p>Example: the machine moved in reality 105 mm , so </p>
<pre><code class="language-gcode">value = [100.0 / 100.5 ] * 800 = 796 =&gt; <span style="color:#0080ff">$100 = 796</span></code></pre>

<p>Repeat the procedure in the y and z direction. For the z direction, this is a bit harder. <span
style="color:#8000ff">TECHYDIY YouTube</span></p>

<p></p>

<h3 id="P-04-02-03">Lesson-3: Controlling the spindle</h3>

<p>So pushing on the GUI the button to start on/off, the spindle effectively starts on/off...</p>

<p>You can achieve the same effect by sending commands one after the other to Grbl: in the console,
type:</p>
<pre><code class="language-gcode">M3 S1     // start
M5        // stop
M3 S1     // start
M3 S1000  // change
M5        // stop
M4 S1     // start counterclockwise
M5        // stop</code></pre>

<h3 id="P-04-02-04">Lesson-4: Setting Machine Zeros Coordinates</h3>

<p>Candle has 2 buttons for settings the machine Zeros coordinates: </p>
<ul>
  <li>X-Y Zeros</li>
  <li>Z Zero</li>
</ul>

<p>The equivalent in G-Code is </p>
<pre><code class="language-gcode">G92 X0Y0</code></pre>
<pre><code class="language-gcode">G92 Z0</code></pre>

<p>Setting Zeros coordinates is different than "Homing".</p>

<h2 id="P-04-09">LaserGRBL</h2>

<p>The custom button "Zeros coordinates" is used for setting the Zeros Coordinates.</p>

<p><strong>Do not use the "Homing" button, this is somethings completely different!</strong></p>

<p></p>

<h3>For beginners: Setting the machine to its zeros</h3>

<p>The very basic settings are setting the zeros of the machine. Jogg ("move") the spindle at the
desired start position in the X/Y axis. This will be oft on the left and bottom of the stock. Then
push the X/Y Zero button in Candle.</p>

<p>Setting the zero for the Z is also easy. With small steps "down" (1mm or lower), try to set the
carving bit as near as possible to the stock. Put a piece of paper between the stock and the bit.
The bit should be as low as possible in order that the paper becomes hard to drag by hand. If it
cannot move you are already too low. At some point, take even a smaller step (0.1mm) as goes down
so that, as already said, dragging the paper becomes difficult. Then push the Z-zero button. You
are done and you can do up again with 1mm step size.</p>

<div style="height:16px">
</div>

<h2 id="P-04-03">Easel</h2>

<h3 id="P-04-03-01">Lesson-5: Milling a rectangle - Spindle Control Off</h3>

<p>Let's generate a G code program with Easel. In Easel, the "Machine Settings" are (per
default)</p>
<ul>
  <li><strong>Safety Height: <span style="color:#0080ff">3.8 mm</span></strong></li>
  <li>Step Over: 40%</li>
  <li>V-Bit Detail Step Over: 1%</li>
  <li>Accessory Commands: --EMPTY--</li>
  <li><strong>Spindle Control: <span style="color:#0080ff">MANUAL</span></strong></li>
  <li>Enable Pinning Shapes: --EMPTY--</li>
</ul>

<p>Cut Settings - Automatic</p>
<ul>
  <li>Feed Rate: 762 mm/min</li>
  <li>Plunge Rate: 228.6 mm/min</li>
  <li>Depth per Pass: 0.7 mm</li>
</ul>

<p><strong>Activate</strong> the Manual Cut Settings - by selecting the "Manual" tab, and edit the
values:</p>
<ul>
  <li><strong>Feed Rate: <span style="color:#0080ff">200 mm/min</span></strong></li>
  <li><strong>Plunge Rate: <span style="color:#0080ff">50 mm/min</span></strong></li>
  <li><strong>Depth per Pass: <span style="color:#0080ff">0.7 mm</span></strong></li>
</ul>

<p>Now observe attentively the produced G-Code and which settings values are "forwarded" to the
produced G code:</p>
<pre><code class="language-gcode">
  G21                         ( G21: metrics: mm    G20 -&gt; inches)
  G90                         ( G90: Distance Mode : absolute     G91: Distance Mode :  relative )
  G1 Z3.810 F228.6            ( slow motion - notice the safety height and the plunge rate )
  G0 X28.391 Y10.038          ( fast motion: go above path in the air )
  G1 Z-0.700 F50.0            ( plunge into material - notice plunge rate )
  G1 X29.111 Y10.337 F200.0   ( mill - notice feed rate )
  G1 X29.663 Y10.888 F200.0
  G1 X29.962 Y11.610 F200.0   ( mill a line on X=29.962 from Y=11.61 ... )
  G1 X30.000 Y28.000 F200.0   ( ... to Y=28.000 )
  G1 X29.848 Y28.766 F200.0
  G1 X29.414 Y29.414 F200.0
  G1 X28.766 Y29.848 F200.0
  G1 X28.000 Y30.000 F200.0   ( mill a line on Y=30 from X=28 ... )
  G1 X11.610 Y29.962 F200.0   ( ... to X=11.610 )
  G1 X10.888 Y29.663 F200.0
  G1 X10.337 Y29.111 F200.0
  G1 X10.038 Y28.391 F200.0   ( mill a line on X=10 from Y=28.391 ... )
  G1 X10.000 Y12.000 F200.0   ( ... to Y=12.000 )
  G1 X10.152 Y11.235 F200.0
  G1 X10.585 Y10.585 F200.0
  G1 X11.235 Y10.152 F200.0
  G1 X12.000 Y10.000 F200.0   ( mill a line on Y=10 from X=12.000 ... )
  G1 X28.391 Y10.038 F200.0   ( ... to X=28.391 )

  G1 Z-1.000 F50.0            ( second path =&gt; plunge at desired depth )

  G1 X29.111 Y10.337 F200.0
  G1 X29.663 Y10.888 F200.0
  ...
  G1 X11.235 Y10.152 F200.0
  G1 X12.000 Y10.000 F200.0
  G1 X28.391 Y10.038 F200.0

  G21
  G90
  G1 Z3.810 F50.0             ( go up - notice plunge rate )
  G0 X0.000 Y0.000            ( go to origin )
  G4 P0.1                     ( G4: Dwell P seconds to dwell )</code></pre>

<p>So notice how the precision of the cut cannot be better than 0.038 mmm (see last line cut)</p>

<h3 id="P-04-03-02">Lesson-6: Milling a rectangle - Spindle Control On</h3>

<p>Hopefully you've noticed what means the safety height: the spindle goes up from Z=0 to this
given "safety" height.</p>

<p>So setting a large value (50mm) will certainly crash your machine.... 50mm is simply too big for
our machine which has only 45 mm max. clearance in the z direction.</p>

<p>But a safety height of 20mm could also crash the machine, if your stock to work is dick enough
and when the spindle bit is set and touch the stock, there are only 10mm clearance for the Z axis
to move up...</p>

<p>so take care of this safety height, which depends on your current stock:</p>

<p>So the new Machine Settings are:</p>
<ul>
  <li><strong>Safety Height: <span style="color:#0080ff">1.0 mm</span></strong></li>
  <li>Step Over: 40%</li>
  <li>V-Bit Detail Step Over: 1%</li>
  <li>Accessory Commands: --EMPTY--</li>
  <li><strong>Spindle Control: <span style="color:#0080ff">AUTOMATIC - Default RPM:
    8000</span></strong></li>
  <li>Enable Pinning Shapes: --EMPTY--</li>
</ul>

<p>Cut Settings - Automatic</p>
<ul>
  <li>Feed Rate: 762 mm/min</li>
  <li>Plunge Rate: 228.6 mm/min</li>
  <li>Depth per Pass: 0.7 mm</li>
</ul>

<p>Cut Settings - Manual - ACTIVE</p>
<ul>
  <li><strong>Feed Rate: <span style="color:#0080ff">200 mm/min</span></strong></li>
  <li><strong>Plunge Rate: <span style="color:#0080ff">50 mm/min</span></strong></li>
  <li><strong>Depth per Pass: <span style="color:#0080ff">0.7 mm</span></strong></li>
</ul>

<p>The exported GCode is the following</p>
<pre><code class="language-gcode">
G21
M3 S8000                       ( start the spindle clockwise at the S speed )
G90
G1 Z1.000 F228.6
G0 X28.391 Y10.038
G1 Z-0.700 F50.0
G1 X29.111 Y10.337 F200.0
G1 X29.663 Y10.888 F200.0
 ...
G1 X12.000 Y10.000 F200.0
G1 X28.391 Y10.038 F200.0

G1 Z-1.000 F50.0

G1 X29.111 Y10.337 F200.0
G1 X29.663 Y10.888 F200.0
 ...
G1 X12.000 Y10.000 F200.0
G1 X28.391 Y10.038 F200.0

G21
G90
G1 Z3.810 F50.0             ( go up - notice plunge rate )
G0 X0.000 Y0.000            ( go to origin )
G4 P0.1                     ( G4: Dwell P seconds to dwell )
M5                          ( M5: stop the spindle)</code></pre>

<p></p>
<!-- ----------------------------------------------------------------------------------------------------------->
<!-- ----------------------------------------------------------------------------------------------------------->

<h2 id="P-06">Cnc offsets and machine reference explained</h2>

<p><span
style="color:#8000ff">https://cncphilosophy.com/cnc-offsets-and-machine-reference-explained/</span></p>

<p>In this post I am going to explain what cnc offsets are, how they are used, and how they relate
to a machine reference point or home position. But first I should begin by explaining the basic
rules that cnc machines operate by…</p>

<h3>Cartesian coordinate system – cnc axis directions</h3>

<p>“<a href="https://en.wikipedia.org/wiki/Cartesian_coordinate_system">A Cartesian coordinate
system</a> is a coordinate system that specifies each point uniquely in a plane by a set of
numerical coordinates”. </p>

<p>To specify positions in three dimensional space, this system needs to have three axes, X , Y and
Z. </p>

<p>The point where these three axes meet is called the origin. </p>

<p>If you can remember back to when you were at school and you drew points on graphs, cnc machines
use the same system to move to specific points in its work area.</p>
<img src="cnc-doc/images/06_CncOffsets/cartesian2.png" height="33%" alt=""> 

<p>There is an X axis, travelling left to right, a Y axis travelling front to back and a Z axis
travelling up and down. If you have a position for each axis, x y and z, you can plot that exact
point in space from the origin.</p>

<h3>Cnc axis explained</h3>

<p>Using these positions you can tell a cnc machine where to move to.</p>

<p>If you specify a positive X value e.g. X15. the position will be to the right of the origin. </p>

<p>If you specify a negative X value e.g. X-1.5 it will be to the left of the origin.</p>

<p>If you specify a positive Y value e.g. Y8. the position will be forward of the origin, away from
you. If you specify a negative Y value e.g. Y-1.5 it will be behind the origin, more toward you.</p>

<p>If you specify a positive Z value e.g. Z2. the position will be above the origin. If you specify
a negative Z value e.g. Z-1.5 it will be below the origin.</p>
<img src="cnc-doc/images/06_CncOffsets/top-view-with-arrows.jpg" height="25%" alt=""> 

<p>One other important point to note is that the direction of travel refers to the movement of the
tool. </p>

<p>So if it is the table that moves, an X positive move will need the table to move to the left.
This makes the tool move to the right in relation to the part you are machining.</p>

<p>Likewise, to make a Y positive move, the table will need to move toward you. Moving the tool in
a positive direction in relation to the part on the table.</p>
<img src="cnc-doc/images/06_CncOffsets/front-view-with-arrows.jpg" height="25%" alt=""> 

<h3>What is a machine reference position?</h3>

<p>A machines reference position or home position, as it is sometimes referred to, is the point at
which all 3 axes read Zero. This is usually set as far as the machine can move in a positive
direction in all 3 axes.</p>

<p>It can be set anywhere you want but you definitely want it all the way up (positive) in Z. Also
having the machine go in positive directions for X and Y will get the tool as far away from the
part as possible when you “home” the machine.</p>

<p>This makes it a lot easier to set up your parts because when you home the machine, the spindle
moves out of the way.</p>

<p>Once you have set your machines reference position it should not change. You will not need to
change it for programming reasons at all, ever.</p>

<p>Most, if not all, industrial machines have limit switches, these tell the software that the
machine is about to run out of available movement, preventing any damage. These limit switches are
also used to locate the reference or home position for the machine.</p>

<p>Most hobby cnc machines do not come equipped with limit switches, but the software we use has
limit switch functionality. This means they can be added if you want. </p>

<p>This is not necessary if you do not want to fit them. I have addressed this “great debate”
in another article here.</p>

<p>What you should always do is home your machine before you switch it off. This is because when
you switch it back on, where the machine is when you start it up is where your “new” home
position will be.</p>

<p>Keeping the home position the same as always means you can pick up where you left off if you did
not finish a part or project during your last session.</p>

<p>Get into the routine of including a homing command at the end of every program you run, that way
you don’t have to remember to do it using MDI or manually.</p>

<h3>What are cnc machine offsets?</h3>

<p>Cnc machine offsets or work coordinate system (WCS) are positions you set that are referenced
from your machines home position. </p>

<p>You can set multiple offsets in a program.This is usually done when machining several parts at
the same time. The offset positions are given Gcode numbers, most commonly G54 through G59.</p>
<img src="cnc-doc/images/06_CncOffsets/save-work-offsets-1024x759.webp" height="50%" alt=""> 

<p>When you set an offset, for example G54, you will locate a position for each axis on the part to
be machined. Setting these positions to G54 in the machine software offset table. G54 will then be
displayed as an X, Y and Z value that is a set distance from the machines reference point.</p>

<p>When an offset is activated in your Program, the machine control software will know where your
part is relative to its home position. It will then compensate the readout to show where the
machine is with regard to the active offset.</p>

<p>This enables you to visually confirm your tools position relative to the part datum and not the
machines home position. If you cancelled the offset in the program with a G53, (offset cancel
command), the machine would run the program relative to its home position. Also the readout in the
machine control software would reflect this change.</p>
<img src="cnc-doc/images/06_CncOffsets/top-view-home-pos.jpg" height="25%" alt=""> 

<p>So what would your offset values look like? Well, if you positioned your machine reference point
at all three axes most positive position, all three of your offset values will be negative.
Everytime and with every offset you set.</p>

<p>Knowing this will enable you to see if something is very wrong when you give your offset
positions a quick visual check. </p>

<p>For example, if your cnc machine has about 4” of Z axis movement and your G54 Z offset value
is Z-5.423, and you set it to the top of your part, you know it has been set incorrectly and you
can change it.</p>

<p>Doing these types of checks are vital if you want to prevent crashing your machine, possibly
damaging it.</p>

<p>I have written an article explaining how to set your datums here.</p>
<img src="cnc-doc/images/06_CncOffsets/Taig-front-view-home-pos.jpg" height="25%" alt=""> 

<h4>A quick overview of setting your offsets to machine a part</h4>
<ol>
  <li>Fixture the part to be machined to the table</li>
  <li>Load a tool such as an edge finder into the machine spindle</li>
  <li>Use it to pick up the designated datum edge of the part in X and Y</li>
  <li>This is done by referencing the position in your software when the edge finder is located
    against the datum edge. That value will then be stored in the offset table.</li>
  <li>Repeat for the second axis</li>
  <li>The Z can be set in several ways. The most basic way is to load a tool in the spindle then
    manually move the tool down to just touch the datum face. The position is then stored in the
    relevant offset table.</li>
  <li>Each axis will now have an offset value from the machine reference position stored in the
    software offset table. This is now ready to be called up and used by a Gcode program. </li>
</ol>

<div style="height:30px">
</div>
<!-- ----------------------------------------------------------------------------------------------------------->
<!-- ----------------------------------------------------------------------------------------------------------->

<h2 id="P-07">Setting the datums on your cnc machine</h2>

<p><span
style="color:#8000ff">https://cncphilosophy.com/setting-the-datums-on-your-cnc-machine/</span></p>

<h3>What are G code G54 cnc datums?</h3>

<p>Datums can also be referred to as machine offsets or Work Coordinate System (WCS) positions.</p>

<p>Every time you use a cnc machine it needs to know where the part is located. You tell the
machine where the part is by using datums. All you do is set the distance to the part from the
machine reference (home) position.</p>

<div class="info">
You will need to decide where on the part you want your datum before you create your Gcode
program.</div>

<p>Then, when you set up the machine to run the program you will position the datum on the raw
stock in the same location as the program.</p>

<p>This could be a corner, if the stock material is a square machined block. Or if you have a rough
sawn block of metal with no defined edges, you could locate the center of the part, then move to
where the corner of the part will be when it is finished.</p>

<h3>How To Set The Part Datums On A Cnc Machine</h3>

<p>On a typical hobby cnc machine there will be three axes, X, Y and Z. So you will need to set all
three axes everytime you setup a new part in your machine.</p>

<div class="info">
The X and Y axes will be set using the same method but the Z axis will be set in a slightly
different way.</div>

<h3>Locating The X And Y Datums Using A Cnc Edge Finder</h3>

<p>The most common tool for a hobbyist to set the X and Y datums is a cnc edge finder. There are
different variations of edge finder design but they all operate the same way.</p>
<img src="cnc-doc/images/07_SettingTheDatums/edgefinding-1024x769.jpg" height="33%" alt=""> 

<p>The end of the edge finder has a separate part that is held with a spring. Move the end so it is
slightly offset. It will now wobble when it is rotated. Load the edge finder in the spindle and
start the spindle.</p>

<div class="info">
I typically have the rpm set quite low, about 1000 rpm..</div>

<p>Then manually jog the part close to the edge you want to set. When you get close, reduce the
increments so the axis only moves very slowly. The end of the edge finder is moved against the edge
of the part until it stops wobbling. It will then move to one side when it reaches the edge of the
part.</p>

<div class="info">
Using an MPG Pendant to jog your machine is the easist way to use an edgefinder.</div>

<p>Now the spindle is located accurately against the side of the part you can go ahead and store
the position using your machine control software. It will be stored in the work offset table. You
will have to choose the offset number you used in your Gcode program.</p>

<div class="info">
After you have stored the offset it will need adjusting to compensate for the radius of the edge
finder. In my case the edge finder end is 0.2″ diameter, so I will change my stored offset by
0.1″.</div>

<p>This will put the stored datum value exactly on the edge of your part.</p>

<p>You can now repeat this process for the other axis. Once you have set your X and Y datums you
can set your Z axis.</p>

<h3>Setting The Z Axis Datum</h3>

<p>The way you set the Z datum on a hobby cnc machine is different to how it is set on an
industrial cnc machine. Almost all industrial cnc machining centers have a tool changer with a
magazine full of tools at the operators disposal.</p>

<p>A typical hobby machine does not have this option.</p>

<div class="info">
The simplest and best way is to tighten a tool in the spindle and manually touch it off onto the
face of the part you have chosen as your Z datum.</div>
<img src="cnc-doc/images/07_SettingTheDatums/z-axis-touch-1024x683.jpg" height="33%" alt=""> 

<p>All you do is jog the tool down slowly onto the top of the part, without it spinning. Do this in
the same way as setting your X and Y datums with the edge finder. When you get close, but still
maintaining visual separation, slide a feeler gauge between the tool and the face.</p>

<div class="info">
A piece of paper can be used as a feeler gauge.</div>

<p>Move the tool down in Z using .001” (.0254mm) increments. As soon as the cutter bites into the
feeler gauge you will know how far off the tool is to the face. You can now store this position in
the Z value field of your offset page.</p>

<div class="info">
You will have to repeat this process every time you load a new tool for milling your part, because
it will be very unlikely that you will be able to machine a project with just one tool. </div>

<p>One important point to note with this method is that you are ignoring the use of a tool length
offset. These are really only useful when you have a tool changer and a tool magazine full of
tools. Just check that the tool offset number you are using is set to zero.</p>

<h3>What Are The Gcodes For Cnc Datums?</h3>

<p>The most used Gcodes for datum positions are:-</p>
<ul>
  <li>G54 </li>
  <li>G55 </li>
  <li>G56 </li>
  <li>G57 </li>
  <li>G58 </li>
  <li>G59 </li>
</ul>

<p>There are different variations depending on the machine and its software but these codes are the
most common.</p>

<div class="info">
Using these means you can use all six of these offsets at any time and even in the same
program.</div>
<img src="cnc-doc/images/07_SettingTheDatums/save-work-offset-table.jpg" height="33%" alt=""> 

<p>This would be useful if you had a fixture that held six identical parts, you could write one
program then copy and paste it six times using a different offset code, each offset code being set
to a different part position.</p>

<p>G53 is the Gcode that cancels any currently active offset code.</p>

<div class="info">
When there are no active offset codes the machine will use its machine zero (machine reference or
home position) instead of the part zero (G54 through G59).</div>

<p>It is not recommended to set your machine zero (home position) at the part datum, you need to
recognise the difference between the two and understand how they relate to each other.</p>

<h3>Don’t Have An Edge Finder Or Wobbler?</h3>

<p>If you don’t have an edge finder of any kind there are alternative ways of setting your X and
Y datums.</p>

<p>The simplest way is to use a dowel or turn a cutter upside down in the spindle. All you do is
jog the dowel carefully towards the edge of the part. Then you place a piece of paper or feeler
gauge between the dowel and the part until the dowel grips the paper or feeler gauge.</p>
<img src="cnc-doc/images/07_SettingTheDatums/dowel-offset-1024x634.jpg" height="33%" alt=""> 

<p>You can then set the position taking into account the radius of the dowel (or cutter) and the
thickness of the paper. This is a similar method to how I described setting your Z offset.</p>

<p>If you own a small finger dial you can hold it in the spindle and “sweep” the side of the
part.</p>

<div class="info">
This involves rotating the spindle by hand so the high point of the arc hits the zero on the
dial.</div>

<p>Then note the machine position value and move the dial to the other side of the part and
repeat.</p>
<img src="cnc-doc/images/07_SettingTheDatums/dial-sweep.jpg" height="33%" alt=""> 

<p>You now have two values for that axis. All you do is add them together, divide the result by 2
and the answer will give you the middle of the part. Manually type this value into the offset
table.</p>

<p>If you use a vise for making a part you can find the position of the fixed jaw. Everytime you
grip a part in the vise you will know the Y axis datum, or at least be able to calculate it from
the fixed jaws known position.</p>
<!-- ----------------------------------------------------------------------------------------------------------->
<!-- ----------------------------------------------------------------------------------------------------------->

<h2 id="P-08">Tool length Compensation Explained</h2>

<p><span
style="color:#8000ff">https://cncphilosophy.com/tool-length-compensation-explained/</span></p>

<p>As the name suggests, tool length compensation enables a cnc machine to compensate for many
tools of different lengths. It allows a machinist to set a Z axis datum on a part and use multiple
tools without having to reset the Z datum for each tool used.</p>

<p>This function is needed when a cnc machine has a tool changer and a magazine that holds many
different types of cutting tools. An operator may need to use a lot of these tools in one
program.</p>

<p>The machine can change tools automatically, enabling the machine to finish the part quicker than
if the tools were changed by an operator. All the tools are loaded in interchangeable chucks or
arbors with a standard taper clamping system that all cnc machine tools use.</p>
<img src="cnc-doc/images/08_ToolLength/plunge-mill-1-1024x691.jpg" height="33%" alt=""> 

<h3>Tool Length Compensation G Codes</h3>
<ul>
  <li>G43</li>
  <li>G44</li>
  <li>G49</li>
</ul>

<h3>G43</h3>

<p>The G43 Gcode is the most commonly used command to activate tool length compensation.</p>

<p>This command will be accompanied with a “H” value to tell the machine control software which
compensation value to apply.</p>

<p>An example line of code will look similar to this:-</p>
G43 H2 Z1. 

<p>This line will activate the tool length value H2 and move the tool 1” above the z datum. The
H2 value would have already been set by the operator when the tool was set up.</p>

<p>The H value number is usually associated with the tool number, i.e. Tool 2 will have its tool
length stored in the H2 value block in the tool offset page.</p>

<p>The H values are all positive so it will compensate the Z axis position in a positive direction,
moving the machine the exact length of the tool away from the workpiece.</p>

<p>Using multiple tools means the Z datum has to be set to the face of the spindle without having
any tool loaded.</p>
<img src="cnc-doc/images/08_ToolLength/Taig-front-view-tool-length.jpg" height="25%" alt=""> 

<h3>G44</h3>

<p>In thirty years of being a cnc machinist I have never used G44, so I’m going to take a stab in
the dark and suggest you will never need it also. I had to google it and it sounds counter
intuitive.</p>

<p>Maybe there is a very specific type of machine that it makes sense to use it on. I’m going to
pretend it doesn’t exist, you should too.</p>

<h3>G49</h3>

<p>G49 is the tool length compensation cancel command.</p>

<p>It cancels it.</p>

<p>This command is usually only used in a safety line at the beginning of a program.</p>

<p>The reason you don’t need to use it is because the active tool compensation “H” value gets
cancelled when you activate the next “H” value.</p>

<p>Also any active “H” value also gets cancelled at the end of a program with an M30
command.</p>

<p>(The M30 command tells the machine the program is ended and to stop and go back to the start of
the program.)</p>

<h4>Your Cnc Machine Does Not Have A Tool Changer…</h4>

<p>So given that this website is about cnc machining as a hobby, I’m sure you are saying, “ my
machine does not have a tool changer, what do I do?”.</p>

<p>Well, that’s easy.</p>

<p>All you do is load the tool you need to use in the spindle and touch the bottom of it on the
face of the part you want to set as the datum. When it is in position at the Z datum face you can
store that position in the datum offset page. Then, in the tool length offset page, make sure the
value is set at zero.</p>
<img src="cnc-doc/images/08_ToolLength/z-axis-touch-1024x683.jpg" height="33%" alt=""> 

<p>Then you can still use the G43 Gcode command and an H value, as you would if your machine has a
tool changer.</p>

<p>The reason you should do it this way is because it is a good habit to get into and if you use a
Cad/Cam program the post processor will probably create the program using these commands anyway.</p>
<img src="cnc-doc/images/08_ToolLength/tool-length-table-e1565819249919.jpg" height="33%" alt=""> 

<h3>How Do I Check My Z Datum Value?</h3>

<p>Every once in a while most machinists will crash their machine. It happens and it is not a good
experience. A common cause of these crashes is forgetting to set your tool length or your Z
datum.</p>

<p>A good habit to employ is by programming a Z safety line.</p>

<p>Most Z datums are set to the top of the part so by making your initial Z move to a set position
above the part will enable you to check this distance. For example the sample code I showed you
before looked like this:-</p>
G43 H2 Z1. 

<p>If you make the machine stop after it has executed this line of code, it should be 1” above
the part. You can stop the spindle and check that distance with a 1” gauge block or a 1-2-3
block.</p>

<p>If the cutter is exactly 1” above the datum face you know you have set your datum and tool
length correctly.</p>

<p>Using a safety line when using rapid moves in between milling or drilling will prevent you
crashing into clamps or fixturing. Just make sure you program your safety line higher than any
obstacle.</p>
<img src="cnc-doc/images/08_ToolLength/mach3-offset-page-e1567304671891-1024x750.webp" height="50%"
alt=""> 

<h3>What Do You Do If Your Datum Reference Face Gets Machined Away?</h3>

<p>Occasionally you may face a situation where the roughing passes will completely remove the top
face that you used to set your Z zero datum, preventing you from setting the Z datum for the
remaining tools.</p>

<p>When you change to your next tool you can set the Z datum by using a separate reference face.</p>

<p>All you have to do is plan ahead.</p>

<p>Prior to roughing away the reference face of the part, choose an accurate square block such as a
1-2-3 block, place it on the machine table and record the height difference to your datum.</p>

<p>You can use your machine to measure the distance by touching the Z datum face, then zero the
relative distance on your machine software (e.g. mach 3), then touch the top of the reference
block.</p>

<p>Make a note of the distance. This block can now be used to set the Z datums for the rest of the
tools you need to complete the job.</p>

<div style="height:30px">
</div>
<!-- ----------------------------------------------------------------------------------------------------------->
<!-- ----------------------------------------------------------------------------------------------------------->

<h2 id="P-09">G28 G Code Demystified</h2>

<p><span style="color:#8000ff">https://cncphilosophy.com/g28-g-code-demystified/</span></p>

<h3>How To Use G28 G Code</h3>

<p>The G28 G code is one of those commands that can confuse and be the cause of an unwanted crash
or near miss. But it is a command I use in every program I write and is vital to how I run my
desktop cnc machine.</p>

<p>Once you understand how to use it you will jump for joy, honest.</p>

<div class="info">
<p>The G28 G code command will return your machine to its home position or machine reference
position</p>
</div>

<p>It will do this via an intermediate point that you specify.</p>

<p>The intermediate point will be referenced from the active work offset e.g. G54, G55 etc</p>

<p>Before I give you some examples of how the G28 command works I should explain two more G codes
you need to</p>
<ul>
  <li>G90</li>
  <li>G91</li>
</ul>

<p>G90 specifies Absolute programming mode. The machines positioning is always referenced from the
active part datum. </p>

<p></p>

<p>G91 specifies incremental programming mode. The machines positioning is always referenced from
its previous position.</p>

<p>We can use these commands with the G28 </p>

<p>G28 is used along with X Y and Z movements, you can use just one or all of the axis
movements.</p>

<p>First of all I will show and explain the way I use G28.</p>
<pre><code class="language-gcode">G91 G28 X0. Y0. Z0.</code></pre>

<p>The G91 is used to put the machine in incremental mode. Doing this will prevent the machine from
moving to its intermediate position. Incremental means the machine will move the amount specified
from its previous position, I have specified zero for each axis.</p>

<p>Therefore the machine will move Zero distance, then it will go to its home position. In a
nutshell, using the command this way will make the machine move straight to the home position.</p>

<div class="info">
<p>The fact that I specified all three axes means it will go to the home position of all three
axes.</p>
</div>
<img src="cnc-doc/images/09_G28Code/Taig-front-view-G28.jpg" height="25%" alt=""> 

<p>I always use it this way in every program I write. It is good practice to send your machine to
its home position in all axes when it has finished running a program.</p>

<div class="info">
<p>When using it this way it is important to always retract your tool in the Z axis to a position
above the highest point of the part you are machining.</p>
</div>

<p>This ensures that your machine does not try to pass through the job on its way home.</p>

<p>If you wanted to retract the Z axis first and then home the X and Y axis you could do that using
two separate G28 commands like this:-</p>
<pre><code class="language-gcode">G91 G28 Z0.
G28 X0. Y0.</code></pre>

<div class="info">
<p>The G91 command only has to be specified on the initial line because it is a modal command.</p>
</div>

<p>This means it remains active until it is cancelled. In this situation you would want to cancel
it on the next line using a G90 to re-establish absolute programming mode.</p>

<p>If you don’t specify G91 you have to be careful with what axis moves you decide to use. They
will be different with every program you make.</p>

<p>Here are a few more examples to help show you what this command can do,</p>
<pre><code class="language-gcode">G91 G28 Z0.</code></pre>

<p>In the example above the machine will move straight up to the Z axis home only</p>
<pre><code class="language-gcode">G28 X0. Y0. Z1.</code></pre>

<p>In the example above the machine will move to its part datum in X and Y while moving to 1”
above the active part datum before going to its home position in all three axes. One thing to note
is that it will move to its intermediate point in all three axes at the same time. It won’t move
up to Z+1 then move in X and Y. So it could pass through the part on its way to the intermediate
point.</p>
<pre><code class="language-gcode">G28 Z0.</code></pre>

<p>In the example above the machine will rapid to its Z zero part position before moving to its Z
home position only. This is a good example of what not to do unless you enjoy scaring yourself.</p>

<div class="info">
<p>So if any of the examples tell you anything it should be to use G28 in incremental mode (G91)
from a safety line above the highest part of the project you are machining.</p>
</div>

<p>Another important point is to always re-establish G90 (absolute programming) after the G28
command if you specify G91.</p>

<p>So the end of a typical program could look like this:-</p>
<pre><code class="language-gcode">G00 Z1. M09 (move up in Z 1” above the Z datum, turn off coolant)
M05 (stop the spindle)
G91 G28 X0. Y0. Z0. (rapid move to home position)
G90 (re-establish absolute programming mode)
M30 (finish program and rewind to the beginning and stop)
% (identify the end of the program)
</code></pre>

<p>The excerpt above could be used in most programs as a “footer”. This could be saved as a
sample program along with a “header” for the beginning of a program.</p>

<div class="info">
<p>To write a quick G-Code program you could make a copy of the header and footer program then fill
in the middle with your milling or drilling cycle.</p>
</div>

<p>This is a really quick method for writing a program, you should even keep full programs and
title them descriptively, copy, edit the tool path for whatever you need.</p>

<p>Writing programs this way is quicker than using cad/cam but limited to only basic programming
such as drilling or simple profile shapes.</p>

<p>An example of a “header” could look something similar to this:-</p>
<pre><code class="language-gcode">% (Identifies the start of the program)
ODRILL (program name)
G17 G20 G40 G49 G80 G90 (safety line establishing important G codes)
T1 MO6 (Tool call and tool change commands)
G00 G54 X0. Y0. S2000 M03 (X and Y pre-position line)
G43 H1 Z1. (Tool length offset command and Z pre-position line)</code></pre>

<p>The safety line above contains the following G codes:-<br>
</p>
<ul>
  <li>G17 = X Y plane selection</li>
  <li>G20 = Programming in inches (G21 is metric)</li>
  <li>G40 = Cancels tool radius or diameter compensation</li>
  <li>G49 = Cancels tool length offsets</li>
  <li>G80 = Cancel </li>
  <li>G90 = Absolute programming</li>
</ul>

<p>The tool call line is asking for Tool 1 and M06 is telling the machine to pull tool 1 from the
tool changer. Your hobby mill will not have a tool changer but that is ok, the command won’t
create an error or stop the program from running.</p>

<div class="info">
<p>Most Cam post processors will put these commands in the program anyway, you don’t have to
change it.</p>
</div>

<p>The X and Y pre-position line is specifying rapid moves (G00), and establishing G54 as the
active datum offset. This line also tells the machine to move to X zero and Y zero, switching the
spindle on (M03), with an RPM of 2000, (S2000).</p>

<p>Only a few hobby cnc mills will have a variable speed spindle but leaving the command in will
not cause any errors. It will let you know approx what speed you ran the spindle at if you use the
program again. You just set the speed manually yourself.</p>

<p>The last line in our example program “header” switches on tool length compensation, G43,
specifying H1 offset length. Then it commands the z axis down to 1” above the Z datum.</p>

<p>Again, most hobby mills do not have tool changers but specifying a tool length offset is a good
habit to use and most post processors will output a program with it as shown. Just have your tool
length set as Zero</p>

<p>My tool length offset article is here, It explains this in more detail.</p>

<div class="info">
<p>Put the header and footer together and it will form the basis of a program you can copy and
paste to quickly write and edit for a new project.</p>
</div>

<p>The header and footer below would be ideal for adding to G-Code created by a simple G-Code
generator like the one included in the vector software ‘Inkscape’ or even a cnc project from
fusion 360.</p>
<pre><code class="language-gcode">%
ODRILL
G17 G20 G40 G49 G80 G90
T1 MO6 
G00 G54 X0. Y0. S2000 M03
G43 H1 Z1.

(insert the main program here)

G00 Z1. M09
M05
G91 G28 X0. Y0. Z0.
G90
M30
%</code></pre>

<p>If you haven’t seen any G code before and all these codes have you scratching your head take a
quick look at my G code programming article and an explanation of cnc terminology.</p>
<br>
<br>
<!-- ----------------------------------------------------------------------------------------------------------->
<!-- -----------------------------------------------------------------------------------------------------------> 

<h2 id="P-17">Most usuful G Codes</h2>

<h3 id="P17-G00">G00 G-Code Command</h3>

<h3 id="P17-G01">G01 G-Code Command</h3>

<h3 id="P17-G02">G02 G-Code Command</h3>

<h3 id="P17-G03">G03 G-Code Command</h3>

<p>G03 is a G-code command used in CNC machining to specify a counter clockwise circular movement
of the cutting tool. It is used to create circular cuts, arcs, and contours in the workpiece. The
G03 command requires parameters to define the center point of the arc, the radius of the arc, and
the end point of the arc. The command is typically followed by an X, Y, and Z coordinate to specify
the end point of the arc.</p>

<h3 id="P17-G04">G04 G-Code Command</h3>

<h3 id="P17-G17">G17 G-Code Command</h3>

<p>G17 is a code used in CNC machining that specifies the plane in which circular interpolation
will occur. In particular, G17 specifies that circular interpolation will occur in the XY plane.
This means that any circular movements made by the CNC machine will be constrained to the XY plane,
with the Z-axis remaining fixed. This code is particularly useful when machining parts with
circular features or contours, as it allows the machine to move in a smooth and accurate circular
motion in the specified plane.</p>

<h4>How G17 G-Code Command is used</h4>

<p>Here’s an example of how G17 might be used in a G code program:</p>
<pre><code class="language-gcode">G90 ; Set absolute coordinates
G17 ; Set circular interpolation plane to XY
G0 X0 Y0 Z0 ; Move to starting position
G2 X10 Y10 I5 J0 ; Move in a clockwise arc from current position to X=10, Y=10, with a center point of X=5, Y=0 (in the XY plane)
G1 X20 Y10 ; Move in a straight line to X=20, Y=10
G3 X30 Y0 I5 J-10 ; Move in a counterclockwise arc from current position to X=30, Y=0, with a center point of X=5, Y=-10 (in the XY plane)
G1 X30 Y-20 ; Move in a straight line to X=30, Y=-20</code></pre>

<p>In this example, we start by setting the absolute coordinates and then setting the circular
interpolation plane to XY using the G17 command. We then move to the starting position at X=0, Y=0,
Z=0.</p>

<p>Next, we use the G2 command to move in a clockwise arc from the current position to X=10, Y=10,
with a center point of X=5, Y=0 (in the XY plane). The I and J parameters specify the distance from
the current position to the center point of the arc in the X and Y directions, respectively.</p>

<p>We then use the G1 command to move in a straight line to X=20, Y=10.</p>

<p>Next, we use the G3 command to move in a counterclockwise arc from the current position to X=30,
Y=0, with a center point of X=5, Y=-10 (in the XY plane). The I and J parameters are again used to
specify the distance from the current position to the center point of the arc.</p>

<p>Finally, we use the G1 command to move in a straight line to X=30, Y=-20.</p>

<h3 id="P17-G18">G18 G-Code Command</h3>

<p>G18 is a G-code command used in CNC machining that specifies the plane of movement for circular
interpolation in the X-Z plane, which is perpendicular to the Y-axis. This command is often used in
conjunction with G02 and G03 commands, which respectively specify clockwise and counterclockwise
circular interpolation movements. By using G18 along with these commands, CNC machines can create
circular shapes and contours in the X-Z plane with precision and accuracy.</p>

<h4>How G18 G-Code Command is used</h4>

<p>Here’s an example of G18 being used in a G-code program with comments:</p>
<pre><code class="language-gcode">G90                        // Absolute positioning
G54                        // Work coordinate system 1
G00 X0 Y0 Z0               // Rapid move to starting position
M03 S1000                  // Spindle on, clockwise rotation at 1000 RPM
G01 Z-0.5 F100             // Move down to cutting depth at a feed rate of 100 mm/min
G18                        // Select X-Z plane for circular interpolation
G02 X50 Z-25 R25           // Move in a clockwise circular arc with a radius of 25 mm
G01 X70 F200               // Move linearly to the right at a feed rate of 200 mm/min
G03 X90 Z-45 R25           // Move in a counterclockwise circular arc with a radius of 25 mm
G01 X110 F200              // Move linearly to the right at a feed rate of 200 mm/min
G00 Z10                    // Rapid move up to retract the tool
M05                        // Spindle off</code></pre>

<p>In this example, the G18 command is used after the tool has reached the cutting depth to specify
that the subsequent circular interpolation movements will be in the X-Z plane. The G02 and G03
commands are then used to create clockwise and counterclockwise circular arcs in the X-Z plane,
respectively.</p>

<h3 id="P17-G19">G19 G-Code Command</h3>

<p>G19 is a G-code command used in CNC machining to specify the plane in which circular
interpolation is to be performed. Specifically, G19 commands the machine to perform circular
interpolation in the YZ plane. This means that the machine will move the cutting tool in a circular
path in the YZ plane, as specified by the parameters of the G-code command.</p>

<p>In contrast, G17 specifies circular interpolation in the XY plane, and G18 specifies circular
interpolation in the XZ plane. These commands are important for controlling the movement of the
cutting tool in CNC machining, and they allow for precise and complex shapes to be cut with high
accuracy.</p>

<h4>How G19 G-Code Command is used</h4>

<p>Here’s an example of G19 being used in a G-code program with comments:</p>
<pre><code class="language-gcode">G00 X0 Y0 Z0    ; Rapid move to the starting position
G90             ; Set absolute positioning mode
G19             ; Set circular interpolation plane to YZ
G02 X10 Y10 I5 J0  ; Perform a clockwise circular interpolation in the YZ plane, with a center point at (5,0) and a radius of 10 units
G01 X20 Y0       ; Move in a straight line to (20,0)
G03 X30 Y10 I5 J0  ; Perform a counterclockwise circular interpolation in the YZ plane, with a center point at (25,0) and a radius of 10 units
G00 X0 Y0       ; Rapid move back to the starting position
In this example, the G-code program starts by moving the cutting tool to the starting position at (0,0,0) using a rapid move (G00). It then sets the absolute positioning mode (G90) and specifies that circular interpolation should be performed in the YZ plane (G19).</code></pre>

<p>The program then performs two circular interpolations using G02 and G03 commands. The first
interpolation is a clockwise circle with a center point at (5,0) and a radius of 10 units. The
second interpolation is a counterclockwise circle with a center point at (25,0) and a radius of 10
units. Both of these circular interpolations are performed in the YZ plane, as specified by the G19
command.</p>

<p></p>

<p>Finally, the program moves the cutting tool back to the starting position using a rapid move
(G00).</p>

<h3 id="P17-G20">G20 G-Code Command</h3>

<h3 id="P17-G21">G21 G-Code Command</h3>

<p>G21 is a G-code command used in CNC machining to set the machine to operate in metric units.
This means that all subsequent commands and measurements will be interpreted in millimeters instead
of inches. G20, on the other hand, is the G-code command used to set the machine to operate in
inches. The choice between G20 and G21 depends on the specific requirements of the machining
project and the preferences of the operator.</p>

<h4>How G21 G-Code Command is used</h4>

<p>Here’s an example of how G21 can be used in a G-code program:</p>
<pre><code class="language-gcode">G21         (Switch to metric units)
G90         (Set absolute positioning mode)
G1 X50 Y50  (Move to X=50mm, Y=50mm)
G1 X100 Y100 (Move to X=100mm, Y=100mm)</code></pre>

<p>In this example, the first line (G21) tells the machine to operate in metric units. The second
line (G90) sets the positioning mode to absolute, meaning that the machine will move to the exact
coordinates specified in the subsequent commands. The third and fourth lines (G1 X50 Y50 and G1
X100 Y100) are movement commands that tell the machine to move to the specified X and Y coordinates
in millimeters.</p>

<p>The comments in brackets are added for human readability and do not affect the operation of the
machine.</p>

<h3 id="P17-G40">G40 G-Code Command</h3>

<h3 id="P17-G41">G41 G-Code Command</h3>

<h3 id="P17-G42">G42 G-Code Command</h3>

<h3 id="P17-G43">G43 G-Code Command</h3>

<h3 id="P17-G53">G53 G-Code Command</h3>

<p>The G53 command is used to cancel all work offsets, such as G54, G55 etc. If the machine was
programmed to continue running with all offsets cancelled it would use its home positions as its
reference. In my experience this command is not used very often, only in very specific cases. An
example would be during an automated probing cycle, if you wanted the probe to reference a position
from the machine reference (home position) a G53 would be used in the program to clear the active
offset. If G53 was not used the probe would reference from the currently active offset.</p>

<h4>How G53 G-Code Command is used</h4>

<p>Here’s an example of how the G53 command might be used in a G-code program, with comments in
brackets and a spindle on command for 2000 RPM:</p>
<pre><code class="language-gcode">G90          ; Set absolute coordinates
G53 X0 Y0    ; Move the tool to the machine's home position [cancels all work offsets]
G01 Z0 F1000 ; Move the tool to the top of the workpiece at a feedrate of 1000 mm/min
M03 S2000    ; Turn on the spindle and set it to 2000 RPM
G01 X10 Y10  ; Move the tool to a specific position on the workpiece
G02 X20 Y10 I5 J0 ; Perform a clockwise arc from the current position to X20 Y10, with a radius of 5 mm
G01 X30 Y20  ; Move the tool to another position on the workpiece
M05         ; Turn off the spindle
G53 Z0      ; Move the tool to the machine's home position [cancels all work offsets]</code></pre>

<p>In this example, the G53 command is used instead of a typical offset call, such as G54: This
would force the machine to reference its home positions when running the program. At the beginning
of the program it will move the tool to the machine’s home position (cancelling all work
offsets), and again at the end of the program to return the tool to the Z home position. The M03
command is used to turn on the spindle and set it to 2000 RPM, and the M05 command is used to turn
off the spindle. The other G-code commands are used to move the tool to specific positions on the
workpiece and perform machining operations.</p>

<h3 id="P17-G54">G54 G-Code Command</h3>

<h3 id="P17-G77">G77 G-Code Command</h3>

<h3 id="P17-G80">G80 G-Code Command</h3>

<p>G80 is a common code used in CNC machining that refers to canceling a canned cycle. A canned
cycle is a pre-programmed sequence of operations that is commonly used in CNC machining to simplify
the programming process.</p>

<p>When a G80 command is executed, it cancels the current canned cycle.</p>

<p>It’s worth noting that the specific functionality of G80 may vary depending on the specific
CNC machine being used, as different machines may have different interpretations of the code.</p>

<h4>How G80 G-Code Command Is Used</h4>

<p>Here’s an example of how G80 might be used in a G code program:</p>
<pre><code class="language-gcode">G90  (Set absolute positioning mode)
G54  (Select work offset 1)
G00 X0 Y0 Z0  (Rapid move to starting position)
G81 R1.0 Z-10.0 F100.0  (Begin drilling cycle at depth -10.0mm, feed rate 100.0mm/min)
G80  (Cancel drilling cycle)
G00 Z10.0  (Rapid move to clear workpiece)
M30  (End of program)</code></pre>

<p>In this example, the program begins by setting the machine to absolute positioning mode and
selecting the first work offset. It then rapidly moves to the starting position and begins a
drilling cycle with a retract distance of 1.0mm, a depth of -10.0mm, and a feed rate of
100.0mm/min.</p>

<p>Then the G80 command is executed, canceling the cycle and returning the machine to the starting
position. The program then rapidly moves to clear the workpiece and ends with the M30 command.</p>

<h3 id="P17-G81">G81 G-Code Command</h3>

<h3 id="P17-G83">G83 G-Code Command</h3>

<p>G83 is a G-code used in CNC machining to drill holes with peck drilling. Peck drilling is a
technique used to drill deep holes in metal or other materials by retracting the drill bit
periodically to clear chips and cool the bit. G83 is used to control the peck drilling process and
specifies the depth, feed rate, and retract distance for each peck. It is commonly used in
machining operations that require deep holes, such as in the aerospace and automotive
industries.</p>

<h4>How G83 G-Code Command Is Used</h4>

<p>Here is an example of how G83 could be used in a G-code program for drilling a hole with peck
drilling, with comments in brackets and a spindle on command for 725 RPM:</p>
<pre><code class="language-gcode">T01 M06          (Select tool 1, perform tool change)
G90              (Set absolute positioning mode)
G54              (Select work offset coordinate system)
M03 S725         (Turn on spindle clockwise at 725 RPM)
G00 X0 Y0     (Rapid move to start position)
G43 Z10 H01      (Rapid move to Z safe height position, activate tool length compensation)
G00 X10 Y10      (Rapid move to hole position)
G83 Z-20 R5 Q2 F100  (Peck drilling cycle with a depth of -20mm, peck increment of 2mm, clearance height of 5mm and a feed rate of 100 mm/min.)
G80             (Cancel peck drilling cycle)
M05             (Stop spindle)
G00 Z50         (Rapid move to clearance height)
M30             (End of program)</code></pre>

<p>In this example, the program begins by performing a tool change, setting the machine to absolute
positioning mode, selecting a work offset coordinate system, and turning on the spindle at 725 RPM.
The program then moves to the hole position, and initiates the G83 peck drilling cycle with
specified parameters. After the cycle is complete, the program cancels the cycle, stops the
spindle, and moves to a clearance height before ending the program. Another peck drilling cycle is
the G73 G-Code command.</p>

<h3 id="P17-G84">G84 G-Code Command</h3>

<h3 id="P17-G98">G98 G-Code Command</h3>

<p>G98 is a G-code command used in CNC machining to specify a canned cycle return to the initial
point. This means that the Z-axis returns to its initial starting point between each X/Y position,
which allows for programming up and around areas of the part, clamps, and fixtures. This command is
one that is used most commonly with G81 and G83 canned drilling cycles.</p>

<h4>How G98 G-Code Command Is Used</h4>

<p>Here’s an example of a G-code program that uses G98 in a drilling canned cycle with comments
in brackets and a spindle on command for 2000 rpm:</p>
<pre><code class="language-gcode">O0001 (Drilling Canned Cycle with G98 and Spindle On)
G90 G54 G00 X0 Y0 (Absolute positioning, rapid move to X0 Y0)
M03 S2000 (Spindle on clockwise at 2000 rpm)
G43 H01 Z50 (Tool Length on, move to Z50)
G98 G81 Z-10. R2. F50. (Drilling canned cycle with G98)
X10. Y10. (Move to 2nd drilling position at X10.0 Y10.0)
G80 (End drilling canned cycle)
M05 (Spindle off)
G91 G28 X0 Y0 Z0 (Return to home position)
G90 (reset absolute positioning)
M30 (End of program)</code></pre>

<p>In this example, the program starts by setting up the work coordinate system and turning on the
spindle at 2000 rpm. The program then runs a G81 drilling cycle using G98 to return to the initial
Z position, in this case Z50, before moving to the 2nd drilling position at X10 Y10. The program
then turns off the spindle and returns to the home position.</p>

<p>Specifying the G98 with the G81 drilling cycle lifts the drill up to Z50 enabling the tool to
clear any clamps or protruding features in the workpiece. The other alternative is to use G99 which
you can read about here.</p>

<h3 id="P17-G99">G99 G-Code Command</h3>

<p>G99 is a G-code command used in CNC machining that instructs the machine to return to the
initial level of the Z-axis after completing a drilling cycle. This command is often used in
combination with G81, which is a drilling cycle command that instructs the machine to perform a
series of holes at a specific depth. After completing each drilling cycle, the G99 command tells
the machine to retract only to the ‘R’ value specified in the canned cycle, making it ready for
the next operation.</p>

<h4>How The G99 G-Code Command is Used</h4>

<p>Here’s an example G-code program that uses G99 with a drilling canned cycle and spindle on
command for 2000 RPM, with comments in brackets:</p>
<pre><code class="language-gcode">% O1234 (Program name)
G90 (Absolute programming)
G54 (Work offset)
M03 S2000 (Spindle on clockwise at 2000 RPM)
G00 X0 Y0 (Rapid move to first hole position)
G43 H01 Z50 (Tool length offset and rapid move to approach position)
G99 G81 R5 Z-10 F10 (Drilling canned cycle, R is the retract height, Z is the drill depth, F is the feed rate)
X10 Y10 (drill another hole)
G80 (cancel canned cycle)
G00 Z50 (Rapid move to safe height)
M05 (Spindle stop)
G91 G28 X0 Y0 Z0 (send the machine to home position)
G90 (re establish absolute positioning)
M30 (Program end)</code></pre>

<p>In this example, the program starts by setting up some basic parameters, such as the program
name, absolute programming, and work offset. Then, the spindle is turned on clockwise at 2000
RPM.</p>

<p>The program then moves the tool to the starting position, sets the tool length offset, and moves
to the approach position using a rapid move. The drilling canned cycle with G99 is then initiated
with a retract height of 5 units, a drill depth of -10 units, and a feed rate of 10 units per
minute.</p>

<p>After completing the first hole, the G99 command returns the tool to the initial level of the
Z-axis, in this example it is Z5 as specified by the ‘R’ value in the G81 canned cycle. The
program then moves to the next hole position and drills the second hole. The drilling cycle is then
cancelled with the G80 G-Code command. Then the tool retracts to a safe height, M05 stops the
spindle, and the program ends with the M30 command.</p>

<p>This is typically used when the drill does not have to avoid any clamps or features on the
workpiece. The G99 G-Code command is especially useful when lots of holes are being drilled as it
eliminates a longer retract movement, thus speeding up the cycle time.</p>

<p>If the drill has to avoid clamps or features on the workpiece, G98 can be used instead to move
the tool higher.</p>
<!-- ----------------------------------------------------------------------------------------------------------->
<!-- ----------------------------------------------------------------------------------------------------------->

<h2 id="P-10">Limits Switches - Why you don't need them!</h2>

<p><span
style="color:#8000ff">https://cncphilosophy.com/cnc-limit-switches-why-you-dont-need-them/</span></p>

<h3>What Are Limit Switches Used For?</h3>

<p>Limit switches are used to prevent a machine from running into the end of its travel and getting
damaged. On a small hobby mill, limit switches can also be used for homing a machine at its
‘machine reference point’.</p>

<h3>Cnc Mill Without Limit Switches?</h3>

<p>When working with home based cnc machines such as routers and desktop mills, I often see
questions on internet forums about homing switches. Do you need them? How to set them up? Can you
run a machine without them?</p>

<p>This article will answer all these questions and more… well maybe not more, but I will explain
what I do and why I don’t use them on my taig desktop cnc mill.</p>

<h3>The Great Limit Switch Debate</h3>

<p>I am sure that somewhere on the internet at any given time there will be several people having a
discussion on the need for limit switches on a hobby cnc machine</p>

<div class="info">
<p>Simply put, if your machine did not get delivered with them it does not need them to operate.</p>
</div>

<p>Every machine I have run in my career as a machinist has had limit switches built into it. The
difference with these “industrial” machines is that the software is designed to use them and
they are essential for it to operate correctly.</p>
<img src="cnc-doc/images/10_LimitSwitchs/limit-switch-set-1024x683.jpg" height="33%" alt=""> <img
src="cnc-doc/images/10_LimitSwitchs/junction-box-1-1024x683.jpg" height="33%" alt=""> <img
src="cnc-doc/images/10_LimitSwitchs/limit-switch-1024x683.jpg" height="33%" alt=""> 

<p>When I ordered my Taig cnc desktop mill I added some limit switches to my order thinking I would
need to use them as homing switches.</p>

<div class="info">
<p>After setting up my machine and getting used to how it operates with Mach 3 software I quickly
realised they were not necessary.</p>
</div>

<p>In fact they would probably be an extra hassle if they malfunctioned and also they would need to
be kept clear of chips and dirt; Also there is very little room to mount them and in comparison to
the size of the machine they are huge.</p>

<p>Basically they would look terrible and I had my doubts as to how accurate they would be. The
main reason I wanted them was so I could leave a part unfinished, switch the machine off, then
switch it back on and be able to finish the part without any mismatch issues.</p>

<p>I soon realised a more reliable way of homing the machine existed and it did not need limit
switches to work.</p>

<h3>Set Your Home Or Reference Position</h3>

<p>Most software I have researched for home use, will locate the reference position at the point it
is at when you start the machine up </p>

<div class="info">
<p>Therefore, if you want to keep the reference point the same every time you operate the machine
you need to return it to that position before you switch off the machine.</p>
</div>

<p>First off, manually move your machine to where you want the home position to be. I moved all
three of my axes in the positive direction to just before they would hit the limit of their
movement.</p>

<p>Then you can simply switch the machine and software off and back on again.</p>

<p>All you have to do now is to home the machine at the end of every program you run. </p>

<p>Simple.</p>

<p>To home the machine you can add the G28 code just before the M30 or M01 like this:-</p>
<pre><code class="language-gcode">G91 G28 Z0.
G28 X0. Y0.
G90
M30</code></pre>

<p>If you need the G28 code explaining in more detail you can check out my article, “G28 G code
demystified”.</p>

<h3>Will Using Limit Switches Prevent A Crash?</h3>

<p>When I say crash, I mean over run the limits of the machines travel in any of its axes. Doing
this could cause damage to the machine or at least cause it to lose steps and need the machine
reference position re-establishing.</p>

<p>Yes, limit switches will prevent your machine trying to twist itself to pieces.</p>

<div class="info">
<p>I also believe that limit switches are not specifically designed to establish the home position
although they can be used to do both jobs</p>
</div>

<p>I never did install the limit switches I ordered because the mach3 software I use has a feature
called “soft limits”. This enables you to set up virtual limit switches that are referenced to
the machine home position.</p>
<img src="cnc-doc/images/10_LimitSwitchs/soft-limits-1024x761.webp" height="50%" alt=""> 

<p>To access this feature go to the “config” menu, then select “homing/limits”. A table
will appear where you can set your distances in each axis from the reference position.</p>

<p>All I do is manually jog the machine to the extreme travel distance of each axis and enter that
amount in the appropriate column in the table. I would reduce the distance approx 0.1” so it
doesn’t stop too close.</p>

<p>There is also a “slow zone” column in the table which gives a distance away from the limits
where the machine will slow down by a percentage of the feed rate. This amount can be entered in
the “speed%” column.</p>
<img src="cnc-doc/images/10_LimitSwitchs/soft-limits-table-1.jpg" height="33%" alt=""> 

<p>Once you have your distances set in the “homing/limits” table, you will need to switch on
the “soft limits” switch on the program run page. The border of the “soft limits” switch
will turn green when it is active.</p>
<img src="cnc-doc/images/10_LimitSwitchs/soft-limit-boundary.jpg" height="33%" alt=""> 

<p>Then you will need to toggle the “display mode” button to switch on the table display in the
graphics window.</p>

<div class="info">
<p>The work area will show up as a white dashed line.</p>
</div>

<p>Now when you load a program the graphics window will display the tool paths, enabling you to
check that the program stays within your work area.</p>

<p>With the soft limits now active you will be prevented from manually moving your machine up
against its “hard limits” preventing any accidental damage.</p>

<div class="info">
<p>If you try to run a program that goes outside of the soft limit range the software will give you
a warning asking you if you want to continue.</p>
</div>

<p>This would be a good time to check your program and correct any toolpaths that are exceeding
your limits.</p>

<h3>Do I Recommend You Buy A Limit Switch Set For Your Machine? </h3>

<p>There is certainly nothing wrong with using them, if your machine is big enough to accommodate
them they are an extra safety measure. You will also be able to use the software’s homing
function and use them as homing switches.</p>

<p>When you do crash into your part, (because you will), you will still have to check or reset your
part datums because it is likely something will have moved. It makes no difference if you are using
digital soft limits or physical limit switches.</p>

<p>It still sucks.</p>

<div style="height:30px">
</div>
<!-- ----------------------------------------------------------------------------------------------------------->
<!-- ----------------------------------------------------------------------------------------------------------->

<h2 id="P-18">Cnc Milling Equipment</h2>

<p><span style="color:#8000ff">https://cncphilosophy.com/cnc-milling-equipment/</span></p>

<p>I’m going to give you a quick rundown on what equipment you will need to get started with a
benchtop cnc milling machine in your workshop.</p>

<h3>What equipment will you need to operate benchtop cnc mill?</h3>

<p>There is going to be a bare minimum of equipment that you will need to run your cnc machine.
Some of these are going to be dependant on what type of machine you have or want…</p>

<p>The first most essential part will be a room or workshop.</p>

<p>You don’t want to put your machine in your bedroom.</p>

<div class="info">
<p>I use a room in the basement, this is ideal for keeping the noise away from the rest of the
house.</p>
</div>

<p>Small machines are not very loud, but it could get old quickly for anyone else in the house if
they can hear it running.</p>

<h3>A bench</h3>

<p>Once you have your room, a sturdy bench will be necessary for all but the smallest cnc engraving
machine</p>

<div class="info">
<p>A desktop cnc mill like a taig will need bolting to the bench to keep it from moving about.</p>
</div>

<p>This is certainly a safety issue, so make sure your machine is secured properly.</p>
<img src="cnc-doc/images/18_MillingEquipment/Bench-mill-1-1024x969.jpg" height="50%" alt=""> 

<h3>Windows PC</h3>

<p>You will need a computer to run your machine. It can be done with a laptop, but ideally you will
want a desktop computer.</p>

<p>You will not need an expensive PC, most people have an old desktop they are not using. You can
pick up a cheap second hand machine from local classified ads if you don’t have one.</p>

<p>Don’t bother trying with an apple computer. I’m sure it can be done, but just don’t..</p>

<h3>Cnc control software</h3>

<p>Once you have your PC you will need software on it to control your machine. Popular choices are
Mach3 or universal gcode sender. </p>

<p>I wrote a post about connecting a cnc machine to a computer, you can read it through this
link.</p>
<img src="cnc-doc/images/18_MillingEquipment/toolpath-1024x764.webp" height="50%" alt=""> 

<h4>G-Code Visualizer</h4>

<p>Writing your own G-Code programs can be tricky, being able to check them visually before running
them on your machine is recommended. </p>

<p>You can do this using G-Code visualizer software. Although not essential, there are free ones
available, so they are worth mentioning.</p>

<p>Check out my ‘G Code simulator‘ article.</p>

<h4>An endmill or engraving tool</h4>

<p>This one is pretty obvious. If your machine didn’t come with an endmill you will have to get
one.</p>

<p>The cheapest one you can find will do if you are a noob and need to practice. </p>

<div class="info">
<p>I would suggest getting the largest size dia that your machine will take. The bigger the
diameter, the less likely they are to break if you abuse it.</p>
</div>

<p>You can get a set of endmills from Amazon like these, they certainly won’t break the bank.</p>

<p>No products found.</p>

<h4>Something to test your programs on</h4>

<div class="info">
<p>One trick I do occasionally is to do a test run on a piece of throw away material, such as wood
or insulation foam.</p>
</div>

<p>It will help me prove out a program and see if it might cause any problems when it gets run in
aluminum or steel.</p>

<p>Insulation foam only needs some double sided tape to keep it in place while you practice.</p>

<div class="info">
<p>If you do mill wood or foam, use a shop vac to suck up the dust while it runs, don’t breathe
it in…</p>
</div>

<h4>Safety glasses</h4>

<p>Speaking of safety, getting some glasses and wearing them will stop you from losing your
eyesight. They are super cheap.</p>

<p>I have had metal in my eye more than a few times, it’s not fun. Don’t try it.</p>

<h3>Recommended equipment needed for your cnc machine</h3>

<p>After you have the basics and have got your machine running, there is a ton of other equipment
you could invest in. A lot of choices will depend on the type of machine you have and what you want
to make with it.</p>

<p>I will list what I think is recommended based mainly on machining metal projects. There will be
some equipment that will be usable for any type of machine and some that will be specific for
metalwork. </p>

<h4>Fixturing, vise, clamps etc</h4>

<p>This is a big one. Not having anything to hold your projects will stop you before you even get
started. </p>

<div class="info">
<p>A vise suited to the size of your machine is essential. I have two, this helps if your part is
quite long, both ends of the part can be clamped in each vise.</p>
</div>

<p>The other fixturing essential are clamps, threaded studs and t-slot nuts. These are the standard
for clamping larger parts to the table.</p>

<p>They can be used to clamp custom made fixture plates to the table for holding many smaller
parts.</p>
<img src="cnc-doc/images/18_MillingEquipment/clamps-1024x683.webp" height="50%" alt=""> 

<h3>MPG Pendant </h3>

<p>I consider an MPG Pendant is an essential accessory. The machines I use at work always have an
MPG, ( manual pulse generator).</p>

<div class="info">
<p>As soon as you use one you will wonder how you managed before.</p>
</div>

<p>They make manually jogging your machine to set your datums a breeze. You will have more control
over your machine making it less likely to crash when setting up your machine.</p>

<p>The tactile feel you have when using it beats pressing soft keys with your mouse any day.</p>

<p>A newer version of the Vista cnc pendant that I own and recommend is available on Amazon.</p>

<p>You can check out my full review of the Vistacnc pendant shown below.</p>
<img src="cnc-doc/images/18_MillingEquipment/mpg-pendant-768x512.webp" height="50%" alt=""> 

<h4>Endmills and drills</h4>

<p>A larger selection of endmills of various sizes will be needed if you want to machine more
complex parts.</p>

<div class="info">
<p>Ball endmills are essential if you want to do surface machining of 3D forms and angles.</p>
</div>

<p>A drill index in both imperial and metric will be almost a necessity so you never get stuck
trying to make a part.</p>

<p>Holes can be machined on a mill but drilling is quicker and can go a lot deeper than using an
endmill. A center drill will also be needed if you are using drill bits.</p>
<img src="cnc-doc/images/18_MillingEquipment/cutters-2-1024x683.webp" height="50%" alt=""> 

<h4>Air compressor</h4>

<p>A source of compressed air is extremely useful, keeping your parts clear of chips will help
prevent cutters from breaking.</p>

<div class="info">
<p>A big compressor is not necessary, a small d.i.y. unit is all you will need.</p>
</div>

<p>The big issue with these budget compressors is the noise they produce. It can be really bad in a
small room and definitely a no go in a house.</p>

<div class="info">
<p>I avoid this problem by using an old fridge compressor retrofitted to the tank of a “donor”
compressor.</p>
</div>

<p>It buzzes like a fridge.</p>
<img src="cnc-doc/images/18_MillingEquipment/compressor-1-768x512.jpg" height="50%" alt=""> 

<h4>Edge finder</h4>

<p>To accurately find the edge of a part to set your datum you will need some type of edge finder
or wobbler.</p>

<div class="info">
<p>There are various types available from the classic wobbler to an electronic edge finder that
lights up when it touches the edge.</p>
</div>

<p>Here is an article dedicated to edge finders, it explains how they are used and which type is
recommended for use on a hobby machine.</p>

<h4>Measuring Equipment</h4>

<p>If you want to make accurate components for your hobby that may even be part of an assembly you
will need measuring tools.</p>

<p>This will include dial or digital calipers, micrometers, gauges of all types and even a steel
rule will be essential.</p>
<img src="cnc-doc/images/18_MillingEquipment/dial-calipers-768x512.jpg" height="50%" alt=""> 

<p>Here is an article dedicated to micrometers, explaining which ones are recommended for use in a
home workshop.</p>

<h4>Dial test indicator</h4>

<p>These are important whatever type of machine you own.</p>

<div class="info">
<p>I have one permanently attached to my manual micro lathe. I use it with an extra long tip for
the Z axis. It’s basically a poor man’s readout. </p>
</div>

<p>The main use is to check for flatness or angle. It can also be used to measure depths and
distances.</p>

<div class="info">
<p>I find that a smaller finger dial is more useful for a small desktop cnc.</p>
</div>

<p>They are more compact and can be mounted in the machine spindle. This enables it to be used for
setting datums to the center of a part by “sweeping” against an edge or diameter.</p>
<img src="cnc-doc/images/18_MillingEquipment/dial-indicator-300x200.jpg" height="25%" alt=""><br>
<img src="cnc-doc/images/18_MillingEquipment/Dial-on-lathe-300x200.webp" height="25%" alt=""><br>


<p>I have an article explaining the uses of different dial indicators and recommending the dials I
use.</p>

<h4>1-2-3 Blocks</h4>

<p>These are precision ground steel blocks. They measure 3” by 2” by 1”. </p>

<p>They are very useful, you can check the price on Amazon here.</p>

<p>I couldn’t possibly list everything they can be used for but here are a few.</p>
<ul>
  <li>As a square</li>
  <li>As a fixture block or a stop</li>
  <li>Check the calibration of micrometers</li>
  <li>Set the height offset of tools</li>
</ul>

<p>I have written a full article on 1-2-3 blocks, click the link to read it.</p>
<img src="cnc-doc/images/18_MillingEquipment/1-2-3-Blocks-300x214.jpg" height="25%" alt=""><br>


<h4>ER collet sets</h4>

<p>Having a spindle that takes ER collets makes your machine very versatile when it comes to tool
choices for your machine. </p>

<div class="info">
<p>Having a full set of imperial and metric collets will ensure you are very rarely limited to the
size of drills and cutters you can use. </p>
</div>

<p>I have found that using a drill chuck in your mill takes up way too much space. Having a good
choice of ER collets eliminates this problem. </p>

<p>You can read my article on ER Collets if you need to know more.</p>

<p>These can be found on Amazon.</p>
<img src="cnc-doc/images/18_MillingEquipment/er16-collets-768x512.webp" height="25%" alt=""><br>


<p>ER Collet racks are also available, or you can make your own with G Code available in the Cnc
Philosophy store.</p>

<h4>Parallel set</h4>

<p>If you have a vise for your machine you will need some parallels.</p>

<div class="info">
<p>These will lift your part above the vise jaws while keeping them level to the table. </p>
</div>

<p>A small cnc machine vice will only need a couple of small pairs of parallels but they are only
available in sets.</p>

<p>I have written a full article about parallels, you can read it here. .</p>
<img src="cnc-doc/images/18_MillingEquipment/parallels-768x512.webp" height="25%" alt=""><br>


<h4>Soft blow hammer</h4>

<p>These hammers or mallets have heads on them made of plastic or leather.</p>

<div class="info">
<p>They are designed to avoid leaving dents or marks on the face you are hitting.</p>
</div>

<p>They are most useful for making sure a part is sat down firmly on a pair of parallels in the
vise.</p>

<h4>Small shop vac</h4>

<p>Once you have made a mess you need to clean it up.</p>

<div class="info">
<p>Using a small shop vac has to be the easiest and most efficient way of doing this.</p>
</div>

<p>One of those purchases that will always get used.</p>

<h4>Selection of hand tools</h4>

<p>A set of small hand files and a hole deburring tool are just a few of the hand tools you should
consider owning. I just collect them as they are needed.</p>

<h4>Tap and die sets</h4>

<p>I’ll let you into a big secret. The tap and die sets you can buy from the big box stores or
Amazon are shit.</p>

<p>They can be useful, mainly for repairing or cleaning out rusty or damaged threads. So if that is
something you need to do then these sets certainly have value.</p>

<div class="info">
<p>The difference between tapping a hole with a cheap tap and a good quality tap is like night and
day. </p>
</div>

<p>I would recommend buying individual good quality taps from an industrial supplier such as
mcmaster carr. If they are available, choose HSS taps, (high speed steel), then it should last you
a few hundred holes.</p>
<img src="cnc-doc/images/18_MillingEquipment/tap-die-set-768x512.webp" height="50%" alt=""><br>


<h4>Micro lathe</h4>

<p>I know this might seem extreme for an accessory for your mill, but as you start doing more
projects you will discover that they are pretty much a necessity.</p>

<div class="info">
<p>I own the Taig micro lathe and I probably use it more than my mill. It really comes in handy for
quick fix it jobs.</p>
</div>

<p>I used it to make an arbor for a slitting saw, fixturing parts and prepping round stock for my A
axis on my cnc mill.</p>

<p>Then, once you own a lathe, you will need accessories for it…. </p>

<h2 id="P-11">Cnc Milling Machine Terminology</h2>

<p><span style="color:#8000ff">https://cncphilosophy.com/cnc-milling-machine-terminology/</span></p>

<h3>G codes and M codes</h3>

<p>The terminology you will encounter when you are researching cnc machining can be confusing,
knowing what they mean will be a good start to your Cnc education.</p>

<p>The most common type of terminology you will encounter will be G code and M code commands. These
are just prefix letters for writing G code programs which the software running your machine can use
to execute various commands.</p>

<p>There are lots of these commands, but for hobby machines you will only need to get familiar with
a small handful of each type.</p>

<p>I have listed the most common here:</p>

<h3>G codes</h3>
<ul>
  <li>G00 = rapid movement</li>
  <li>G01 = move at the specified feedrate</li>
  <li>G02 = clockwise arc or circle movement</li>
  <li>G03 = counter clockwise arc or circle movement</li>
  <li>G17 = X Y plane selection</li>
  <li>G20 = coordinates in inches</li>
  <li>G21 = coordinates in MM</li>
  <li>G28 = home position return</li>
  <li>G40 = cutter compensation cancel</li>
  <li>G41 = cutter compensation left</li>
  <li>G42 = cutter compensation right</li>
  <li>G43 = tool length compensation on</li>
  <li>G53 = cancel work offsets</li>
  <li>G54,G55,G56,G57,G58 and G59 = work offsets</li>
  <li>G80 = cancel canned cycle</li>
  <li>G81 = basic drilling canned cycle</li>
  <li>G83 = peck drilling canned cycle</li>
  <li>G90 = absolute programming</li>
  <li>G91 = incremental programming</li>
</ul>

<h3>M Codes</h3>
<ul>
  <li>M00 = program stop</li>
  <li>M01 = optional stop</li>
  <li>M03 = spindle on</li>
  <li>M05 = spindle off</li>
  <li>M06 = tool change</li>
  <li>M30 = end of program, rewind and reset</li>
</ul>

<p>This list may seem like a lot to learn but quite a few of these codes will only be used once in
each program you do. The most frequently used codes in a program will be G00, G01, G02 and G03
movement commands, depending on how complex the tool path is.</p>

<h3>General Cnc Terminology</h3>

<p>I’ve listed some of the most common terminology below, although I could have ended up with a
huge list I considered the most likely ones a hobby cnc user might come across.</p>

<h4>Endmill</h4>

<p>Endmill is a general term used to identify a milling cutter. Specifically one that uses its edge
to do the machining. Although most newer (modern?) carbide endmills are capable of cutting on both
the face and the edge. This means the tool is able to plunge, i.e. drill into the workpiece.</p>
<img src="cnc-doc/images/11_Cnc_Milling_Machine_Terminology/high-feed-endmill-768x549.jpg"
height="50%" alt=""><br>


<h4>Slot drill</h4>

<p>A slot drill is just a 2 flute endmill and as such it is more able to plunge faster enabling it
to be the tool of choice for machining slots. The extra clearance with only having 2 flutes leaves
more room for the chips to evacuate helping to prevent the tool from clogging up and breaking.</p>
<img src="cnc-doc/images/11_Cnc_Milling_Machine_Terminology/example-slot-drill-768x512.jpg"
height="50%" alt=""><br>


<h4>Center drill</h4>

<p>A center drill is a short and sturdy tool that is used to create a hole for a lathe center. It
has two diameters, the smaller diameter prevents the lathe center point from bottoming out in the
hole. It can also be used for creating a guide hole for a HSS drill. The hole it creates is used to
guide a HSS drill bit so that it does not wander when it starts to drill into the part.</p>
<img src="cnc-doc/images/11_Cnc_Milling_Machine_Terminology/center-drill-768x512.jpg" height="50%"
alt=""><br>


<h4>Spot Drill</h4>

<p>A spot drill is similar to a center drill but its only purpose is to create a positioning guide
for a HSS drill. It can also be used to chamfer small holes. To program a spot drill you would use
a G81 canned cycle, e.g. G81 R.1 Z-.02 F2.</p>
<img src="cnc-doc/images/11_Cnc_Milling_Machine_Terminology/spotdrill-300x300.jpg" height="50%"
alt=""><br>


<h4>Drill Bit</h4>

<p>A drill bit is a tool for drilling holes. They can be used in a program with a G83 canned
cycle.</p>

<p>e.g. G83 R.1 Q.05 Z-.5 F2.5</p>
<img src="cnc-doc/images/11_Cnc_Milling_Machine_Terminology/Drill-bits-768x512.jpg" height="50%"
alt=""><br>


<h4>Fixture Plate</h4>

<p>A fixture plate is an additional plate that can be clamped to a milling machine table with
customised clamping features for a specific type of milling operation.</p>

<p>I even have a fixture plate made from melamine board. This is useful for machining wood or
plastic with the board being a sacrificial piece. This means a profile can be machined deeper than
the part without damaging the actual table of the machine.</p>
<img src="cnc-doc/images/11_Cnc_Milling_Machine_Terminology/fixture-1-768x512.jpg" height="50%"
alt=""><br>


<h4>Spindle speed</h4>

<p>This is the r.p.m of the machine spindle. It is specified in a g code program with an S.</p>

<p>E.g. S1200 M03</p>

<p>Most desktop cnc mills will not have the ability to automatically change the spindle speed but
it will still be posted in a program if you use CAM software. It will not produce an error if your
spindle is not controlled by the software, the command will just be ignored.</p>

<h4>Feed Rate</h4>

<p>This is the speed the machine will move the tool at. The feed rate is stated in the program and
can be changed on every new line of code.</p>

<p>The g code prefix is an F, e.g. G01 X2. Y0. F30. </p>

<p>The unit of feed is inches per minute for imperial programs and millimeters per minute for
metric programs. It dictates how far the machine will move the tool per minute, e.g. F30. in an
imperial program will move the tool 30 inches every minute.</p>

<p>See my feeds and speeds article for an in depth look at working out feed rates.</p>

<h4>IPM</h4>
This is an acronym for Inches Per Minute for describing a feed rate. See above. 

<h4>IPR</h4>

<p>This is an acronym for Inches Per Revolution for describing a feed rate. This type of feed rate
will be very small, e.g. a feed rate of F.012 would be typical for an endmill. So in this example
the tool would move .012” for every revolution. The equivalent feed rate in IPM would be 24 if
the spindle speed was 2000 RPM. </p>

<p>2000 X .012 = 24 </p>

<h4>IPT</h4>

<p>This is an acronym for Inches Per Tooth for describing feed rate (also known as feed per tooth).
This is similar to Inches Per rev but enables you to differentiate your speed rate based on how
many flutes the cutter has. For example an IPT of .003” with a 4 flute cutter turning at 2000 RPM
will have a feed rate of 24” per minute. </p>

<p>.003 X 4 X 2000 = 24 </p>

<h4>Safety Plane</h4>

<p>This is a Z axis height at which it is safe to use rapid movement. The height of this is set by
the programmer and will usually be determined by how high any clamps or fixturing are in the work
area. </p>

<h4>Datum</h4>

<p>A datum is a fixed position on your workpiece which is set as the active work offset with the X,
Y and Z axes at zero. E.g. G54 offset position. </p>

<h4>Machine Reference position</h4>

<p>Also known as a machines home position. This is the position where all axes on the machine are
at zero with no work offset active. </p>

<h4>MDI</h4>
MDI is an acronym for Manual Data Input. This is a mode in your cnc control software that lets you
input and execute single lines of code. This is useful for doing simple operations that may usually
be done on a manual machine. 

<h4>Offset Page</h4>

<p>This is a page on your cnc control software that displays your offset tables. It will show your
datum offset values for each stored offset, G54, G55 etc and your tool length offsets for each tool
e.g. T1, T2, T3, etc. The offset page will also show the Diameter or radius offsets for each tool.
</p>
<img
src="cnc-doc/images/11_Cnc_Milling_Machine_Terminology/mach3-offset-page-e1567304671891-768x563.jpg"
height="50%" alt=""><br>


<h4>Work Offsets</h4>
Work offsets are stored values for G54 to <em>G59</em>. They consist of distance values for each
axis from the machines reference position. 

<h4>Tool Offsets</h4>

<p>Tool offsets are stored values for the length of the tool and also the radius or diameter offset
values. </p>

<h4>Climb milling</h4>

<p>Climb milling refers to the direction an endmill is moving in relation to the side of the tool
that is cutting the material. When a tool is climb milling it is behaving like a rolling wheel.
This can also be described as “cutter left”. The G code for cutter compensation left is
<em>G41</em>. An example line of code would be G01 G41 D1 X2.1 Y0. F20. </p>

<h4>Conventional Milling</h4>

<p>Conventional milling is the opposite of climb milling. It is when the endmill’s direction of
rotation is turning against the direction of travel. Also known as cutter right. The G code for
cutter compensation right is <em>G42</em>. An example line of code would be G01 G42 D1 X2.1 Y0.
F20. </p>

<h4>4th Axis</h4>

<p>4th axis refers to the addition of an extra axis to the cnc machine after the 3 main permanent
axes, X, Y and Z. A 4th axis is usually rotary and will be clamped to the table on any side. </p>

<p>It doesn’t spin like a lathe chuck, but is powered by a stepper motor so it can programmed to
move measured amounts just like any of the main machine axes. </p>
<img src="cnc-doc/images/11_Cnc_Milling_Machine_Terminology/A-axis.jpg" height="33%" alt=""><br>


<h4>CAD/CAM</h4>

<p>Cad is an acronym for computer aided design, Cam is an acronym for computer aided manufacturing.
These can be separate software programs or combined. Cad is used to design or draw the part to be
machined, and Cam is used to create the cutter paths and also post process the cutter paths into a
G code program. </p>
<img src="cnc-doc/images/11_Cnc_Milling_Machine_Terminology/fusion-360-768x407.jpg" height="42%"
alt=""><br>


<h4>Post Processor</h4>

<p>A post processor is normally integrated into CAM software, it processes cutter paths into G Code
programs. </p>

<h4>Absolute programming</h4>

<p>The machines positioning is always referenced from the active part datum. G90 is the G code that
commands Absolute programming mode. </p>

<h4>Incremental programming</h4>

<p>The machines positioning is always referenced from its previous position. G91 is the G code that
commands incremental programming mode. </p>

<h4>Thou</h4>

<p>“Thou” is short for thousandth. It refers to one thousandth of an inch, or .001”. </p>

<h4>Tenth</h4>

<p>“Tenth” refers to a tenth of a thousandth of an inch, or .0001”. </p>

<h4>Chatter</h4>

<p>Chatter is a descriptive term used when a workpiece is vibrating and the tool leaves a rough or
uneven finish on the machined surface. </p>

<h4>Push off</h4>

<p>This is another descriptive term that refers to the effect of tool deflection. Commonly seen
when using a long endmill that deflects from the cutting forces applied to it. The result is a
vertical face that’s not so vertical. The amount of deflection is usually only a few “thou”.
</p>

<div style="height:30px">
</div>
<!-- ----------------------------------------------------------------------------------------------------------->
<!-- ----------------------------------------------------------------------------------------------------------->

<h2 id="P-12">Types of Mill Cutters</h2>

<p><span style="color:#8000ff">https://cncphilosophy.com/types-of-mill-cutters/</span></p>

<p>This article, just like my website, will concentrate on types of milling cutters that are used
with hobby cnc machines. The amount of tooling available for industrial machines is mind boggling
and way too much for one book, never mind one blog article.</p>

<p>So, the main type of tools that cnc hobbyists use, and sometimes the only type they use, are end
mills and ball end mills. Drills are used a lot if you work with metals, but this article will
focus only on end mills and ball nose end mills.</p>
<img src="cnc-doc/images/12_TypesOfMillCutters/selection-of-end-mills.jpg" height="50%" alt=""> 

<p>I have curated a list of common questions that people ask and have given an answer that best
fits the concerns a cnc hobbyist may have.</p>

<h3>End Mills</h3>

<h4>What is an end mill used for?</h4>

<p>For an extremely basic answer, an end mill is rotated in the spindle of a milling machine and
moved against a piece of material (metal or otherwise) and the rotating ‘blades’ on the edge of
the tool will slice away material to produce the desired form or shape.</p>

<p>Originally an end mill was used to remove material using only the cutting flutes on the side of
its diameter. So this would involve approaching the workpiece from the side, moving in the X and Y
axes only to remove material with the side edge of the tool.</p>

<div class="info">
<p>Fortunately the end mill evolved to include cutting edges on the bottom face vastly increasing
its versatility into a workhorse tool that can accomplish most milling tasks.</p>
</div>

<p>Having cutting edges on the base of the tool enables it to plunge or ramp down into your
material.</p>

<p>Combined with a cnc machine an end milling operation can be used to create slots, holes,
contours and profiles to name only a few of the most common tasks. </p>

<p>The wide availability of carbide end mills, as opposed to high speed steel (less durable),
increases its use to harder exotic materials or just to improve its life expectancy making the
extra expense more cost effective, especially for a hobbyist.</p>

<p>If used properly and conservatively a carbide end mill can last quite a long time.</p>

<h3>Can you drill with an end mill?</h3>

<p>If it has cutting edges on the bottom face, yes, you can drill with an end mill.</p>
<img src="cnc-doc/images/12_TypesOfMillCutters/center-cutting-end-mill.jpg" height="50%" alt=""> 

<p>This is mainly described as ‘plunging’ and enables you to open up an ‘internal’ pocket
without having to use another tool to open up a space for the end mill to move down into.</p>

<div class="info">
<p>This ability does not replace the use of a drill bit and plunging a deep hole with an end mill
is not good practice.</p>
</div>

<p>A deep hole can be milled with an end mill by using a smaller diameter tool than the required
hole and cnc programming a ‘spiral’, ramping down in a circle. This is the better way to create
a hole using an end mill with the added bonus of being able to fine tune and adjust the finished
diameter.</p>

<h3>What are 2 flute end mills for?</h3>

<p>Two flute end mills are known as slot drills. They are primarily used for milling slots or
pockets.</p>
<img src="cnc-doc/images/12_TypesOfMillCutters/milling-machine-slot-drill.jpg" height="50%" alt=""> 

<h3>What is the difference between an end mill and a slot drill?</h3>

<p>A slot drill is a two flute version of an end mill. They are specifically designed to plunge
into material in the Z axis when milling a slot, e,g, for a keyway.</p>

<div class="info">
<p>Having only two flutes increases the space in the spiral of the tool which gives more room for
chips to evacuate.</p>
</div>

<p>This helps prevent the tool from clogging up and breaking when plunging.</p>

<p>This gives a slot drill the improved ability to plunge and mill a slot without breaking, hence
the name.</p>

<h3>Can an end mill plunge?</h3>

<p>Most end mills have cutting edges on the bottom face which will let you plunge into your
material.</p>

<p>Plunging is usually done at a slower feedrate than when milling along the X and Y axes and avoid
going too deep before moving in X and/or Y directions. (shallow depth of cut).</p>

<div class="info">
<p>A plunging feedrate of about 10% compared to your X and Y feedrate would be a good starting
point.</p>
</div>

<h3>What is an upcut end mill?</h3>

<p>An upcut end mill is when the spiral of the side flute rakes backward. This will force the chips
up and away from the workpiece helping to prevent a build up of chips and to prevent tool
breakage.</p>

<div class="info">
<p>Most end mills are designed as up cut.</p>
</div>

<p>The direction of the flute rake is the same as a drill bit which forces the chips along the
flutes and out of the hole.</p>

<h3>What is a down cut end mill?</h3>

<p>A down cut end mill is when the spiral of the side flutes is raked forward. This forces the
material being removed downward. These types of tools are primarily used on softer materials such
as wood and plastic.</p>
<img src="cnc-doc/images/12_TypesOfMillCutters/down-cut-end-mill.jpg" height="50%" alt=""> 

<div class="info">
<p>This design feature prevents the material splintering or chipping on the top edge improving the
finish and appearance.</p>
</div>

<p>The tool is still designed to rotate in the same direction.</p>

<h3>How can you tell if an endmill is center cut?</h3>

<p>The cutting edges on the bottom face will extend all the way to the center.</p>
<img src="cnc-doc/images/12_TypesOfMillCutters/non-center-cutting-end-mills.jpg" height="50%"
alt=""> 

<p>Some slot drills will have opposing flutes that meet slightly off center (asymmetrical). This
helps the tool cut in the middle where the rotational speed is at its slowest.</p>

<h3>How many flutes do you need for milling steel?</h3>

<p>There is no specific requirement for a certain amount of flutes for milling steel. The amount of
flutes can dictate what abilities the tool may have that make it better for specific operations.</p>

<p>For example, slot drills have two flutes and are designed for plunging.</p>
<img src="cnc-doc/images/12_TypesOfMillCutters/high-feed-endmill.jpg" height="50%" alt=""> 

<div class="info">
<p>An eight flute end mill will be able to feed faster using the same feed per tooth than a four
flute end mill.</p>
</div>

<h3>Is aluminum easier to mill than steel?</h3>

<p>Yes, it’s a lot easier. Although trying to mill poor quality aluminum can be frustrating. The
aluminum you can buy at the local big box store is not ideal for machining. It is typically gummy
and clogs up and breaks end mills. It is too soft and only useful for fabrication etc.</p>

<div class="info">
<p>Free machining Aluminum is what you want to buy, they typically have a grade such as 6061.</p>
</div>

<p>Sometimes these types of grades are referred to as aerospace grade or aircraft grade, which is
just a fancy way of saying they are machinable.</p>

<h3>What is the best endmill for aluminum?</h3>

<p>There are end mills designed specifically for aluminum. They usually have a steep rake angle on
the helix and have only two flutes. This is to take advantage of higher speeds and feeds that
industrial machines can run at with aluminum, i.e. very fast.</p>
<img src="cnc-doc/images/12_TypesOfMillCutters/ali-endmill.jpg" height="50%" alt=""> 

<div class="info">
<p>For hobby machines these high spindle speeds and feeds are not possible so just using an
ordinary carbide end mill is fine and actually preferable.</p>
</div>

<h3>Best endmill for stainless steel?</h3>

<p>A good quality Carbide end mill will be the tool of choice for any hard alloys.</p>

<p>Just decrease the speeds and feeds to accommodate for the harder alloy and hope your hobby
machine has the power to handle it.</p>

<h3>Best end mill for wood?</h3>

<p>Two flute and even one flute end mills, small dia ball end mills for finishing complex reliefs.
There are also the burr style bits for machining wood. Upcut and downcut styles to suit different
densities of wood etc.</p>
<img src="cnc-doc/images/12_TypesOfMillCutters/big-carbide-burr.jpg" height="50%" alt=""> 

<p>Wood is quite forgiving to machine, so test different styles and find what suits your needs.</p>

<h3>Best end mill for plastic?</h3>

<p>Single flute end mills are the best for cutting acrylic. This enables the machine to run at a
high rpm yet still maintain an achievable feedrate for the required feed per tooth.</p>
<img src="cnc-doc/images/12_TypesOfMillCutters/single-flute-end-mill.jpg" height="50%" alt=""> 

<h3>How do I know if my end mill is carbide?</h3>

<p>Hold a magnet to it, it should have very little magnetic attraction. Also check to feel the
weight of it. Carbide is extremely dense and it should feel heavy compared to its size.</p>

<h3>How long should my carbide end mill last?</h3>

<p>In an industrial setting tooling manufacturers sometimes quote an approximate time an endmill
will last machining a specific material. The time will be for the actual cutter being ‘buried in
the material’ working as hard as it can and removing a lot of steel, this ‘lifespan’ may be
less than an hour.</p>

<div class="info">
<p>For hobby machining though an endmill can last a long time, you will not be pushing it hard at
all, the machines are just not capable of doing that.</p>
</div>

<p>As an example, I was machining a ‘heavy’ cut using my 1419 engraving machine with a ⅛ “
carbide end mill and the machine ground to a stop without breaking the endmill. Which tells me that
the endmill is stronger than the machine.</p>

<h2>Ball End Mills</h2>

<h3>What is a ball nose?</h3>

<p>A ball nose end mill is just another name for a ball end mill. This type of cutter has a full
radius on the end.</p>
<img src="cnc-doc/images/12_TypesOfMillCutters/ball-nose-end-mill.jpg" height="50%" alt=""> 

<p>There are also bull nose end mills, these have radiused corners that are smaller than the radius
of the cutter.</p>

<h3>What is a ball end mill used for?</h3>

<p>There are a few ball end mill uses, the big one being the ability to produce free form curves.
This enables a cnc machine to machine complex flowing shapes to reproduce decorative attractive
projects.</p>

<p>They can also create a radius in a corner:)</p>

<h3>Tapered ball end mills</h3>

<p>These end mills are ideal for machining reliefs and decorative projects. The radius on the end
can be very small for detail work, but the taper will add a lot of strength to prevent breakage.</p>
<img src="cnc-doc/images/12_TypesOfMillCutters/tapered-ball-ends.jpg" height="50%" alt=""> 

<p>The taper will prevent you from being able to mill a vertical face but it will not be a problem
on a relief, for example.</p>

<h3>Can you plunge with a ball nose end mill?</h3>

<p>You can, but I would try and avoid it. If you have to plunge it is a good idea to ramp down.
This means moving along the X and/or Y axis while plunging at a shallow angle, i.e. less than 3
degrees.</p>

<div class="info">
<p>If I was able to answer your question with this article, you can check out my site map. You will
see a list of all my posts and I might be able to help you with some more cnc topics.</p>
</div>
<br>
<br>
<!-- ----------------------------------------------------------------------------------------------------------->
<!-- -----------------------------------------------------------------------------------------------------------> 

<h2 id="P-16">Feeds And Speeds</h2>

<p>Feed refers to the rate of movement of the axes of your machine, it is programmed in inches per
minute (IPM) or millimeters per minute for metric.</p>

<p>Speed refers to the RPM of the machine spindle, i.e. the rotational speed of the tool on a mill
or workpiece for a lathe.</p>

<p>Establishing the rpm and feed rate for end mills and drills can seem like sorcery to many
people, especially hobby machinists.</p>

<p>There will always be variations between different machines, different setups, different
materials, different tools, the list goes on.</p>
<figure><img src="cnc-doc/images/16_Feeds_And_Speeds/carbide-endmill2-768x512.jpg" height="33%"
alt=""> <figcaption>A typical good quality carbide endmill</figcaption></figure>

<h3>How to calculate feeds and speeds</h3>

<p>What I can do is show a formula that will give you a starting point from which you can adjust to
suit your machine and the type of material you are milling.</p>

<h3>Feeds and speeds formula</h3>

<h4>Calculate RPM</h4>
<pre><code class="language-gcode">RPM = SFM * X 3.82 / diameter of the tool (* SFM = Surface Feet per Minute)</code></pre>

<p>Next, the formula for the feedrate uses the RPM from the previous calculation,</p>

<h4>Calculate Feedrate</h4>
<pre><code class="language-gcode">Feedrate = RPM X Feed per tooth X Number of teeth</code></pre>

<p>or</p>
<pre><code class="language-gcode">Feedrate = RPM X Feed per rev</code></pre>
<br>


<div class="info">
To use these simple formulas, you need to find out what ‘SFM’ (surface feet / min) that your
milling tool is designed to operate at with the particular metal you are milling.</div>

<p>I am going to recommend that you only use carbide endmills when machining metals, they are
inexpensive enough and make the task a lot easier than using HSS (high speed steel) endmills.</p>

<p>A safe starting point for a good quality carbide endmill machining a typical ‘soft’ alloy
steel would be approximately 250 SFM. (a HSS endmill will be considerably slower, around 120)</p>

<p>Using 250 SFM in the formula above, with a .25” (¼”) dia endmill results in an RPM of
3,820.</p>

<p>To calculate the feedrate we need to find out the feed per tooth or the feed per rev. Again a
good starting point using a good quality endmill would be .002” per tooth. So if we had a 4 flute
cutter this would be .008” per REV, (4 X .002”).</p>

<p>Now you can use the second formula using the rpm we just calculated, </p>

<p>3,820rpm X .002” X 4 flutes = 30.56 inches/minute feedrate.</p>

<div class="info">
So now we have a good starting point of 3,820 RPM with a feedrate of 30 inches/min.</div>
<img src="cnc-doc/images/16_Feeds_And_Speeds/ali-endmill-768x512.jpg" height="33%" alt=""> 

<p>Next we can consider machining some aluminum stock. A SFM, on a benchtop mill or router, of 500
would be a safe starting point. </p>

<p>Using the same end mill as in the previous calculation you get an RPM of 7,640 which, as you
would expect, is double the previous result.</p>

<p>Again when you calculate the feedrate it is double the previous result at 61 in/min.</p>

<h3>Hobby mill limitationsy</h3>

<p>Now we have to consider the type of machine you are running. Most hobby machines have a limited
RPM range and limited feedrate capabilities. To get around this we will need to make
adjustments.</p>

<p>For example a router usually has a very high RPM, 12,000 and up, so to enable a higher RPM you
can use a smaller dia cutter. </p>

<p>Using a ⅛” (.125”) diameter cutter instead of a ¼” (.25”) cutter the required RPM for
aluminum example will be:-</p>

<p>500SFM X 3.82 / .125 = 15,280rpm. </p>

<p>This would be in the range of a typical cnc router. </p>

<p>The next issue would be the feedrate. Using an RPM of 15,280 would give a feedrate of 122
in/min. This is too fast a feedrate for many hobby machines. So what you can do is use an endmill
with only 2 flutes. This will half the feedrate down to 61 in/min. </p>

<h3>Variable speed spindle?</h3>

<p>Using the calculations above is ok if you have a variable speed spindle, but what if you
don’t? My Taig benchtop cnc mill has a series of pulleys to control its spindle speed.</p>
<figure><img src="cnc-doc/images/16_Feeds_And_Speeds/pulleys-768x512.jpg" height="33%" alt="">
<figcaption>Taig mill spindle pulleys for changing the spindle speed</figcaption></figure>

<p>The RPM speeds available are:-</p>
<ul>
  <li>1100rpm</li>
  <li>1900rpm</li>
  <li>2900rpm</li>
  <li>4300rpm</li>
  <li>6500rpm</li>
  <li>10500rpm</li>
</ul>

<p>Using the calculation of 3820rpm and 30ipm, for my machine I would set it to the 2900rpm pulley
and adjust the feedrate to suit the slower rpm.</p>

<p>2900 X .002” X 4flutes = 23.2ipm, </p>

<p>so I would set the feedrate at 23 inches/min in the G-code program.</p>

<div class="info">
You will find that setting the speeds and feeds slower usually helps tool life and can save a lot
of frustration.</div>

<p>I have found that milling aluminum at speeds and feeds you would expect to use on a soft alloy
steel on an industrial machine will produce effortless results. </p>

<h3>Speeds and Feeds for Drilling</h3>

<p>Although I suggested only using carbide for your endmills, high speed steel (HSS) drill bits
will work perfectly fine.</p>

<div class="info">
Just make sure to check they are sharp by looking at the cutting edges with a loupe or
magnifier.</div>

<p>It is really easy to break a drill if it is blunt or damaged.</p>
<figure><img src="cnc-doc/images/16_Feeds_And_Speeds/hss-stub-drill-768x512.jpg" height="33%"
alt=""> <figcaption>A HSS Driil Bit</figcaption></figure>

<p>A good starting point for drilling steel with a HSS drill bit would be 75 SFM with a feedrate of
 .001/tooth or .002” per rev.</p>

<p>For aluminum I would use 130 SFM and keep the feedrate at .002” per rev, at least
initially.</p>

<p>Using a ⅛” (.125”) drill as an example:-</p>

<p>75 X 3.82 / .125 = 2,292rpm</p>

<p>2292 x .002” = 4.5 ipm</p>

<p>It is important to use a pecking drill cycle (G83) and use a lubricant. If your machine isn’t
equipped with a coolant system you can use WD40. Just spray it occasionally as it is drilling and
don’t let it get dry.</p>
<figure><img src="cnc-doc/images/16_Feeds_And_Speeds/wd40-268x300.jpg" height="33%" alt="">
<figcaption>Poor mans coolant!</figcaption></figure>

<p>The depth of the peck is not too critical until you start using small diameter drills.</p>

<div class="info">
When drilling with drills .125” diameter and smaller I always use a very shallow peck depth.</div>

<p>To give you an example, when drilling with a 1/16” drill or smaller I will set the peck depth
at .01” or less and reduce the feedrate to about .0005″/rev. </p>

<p>It will take a while to drill a hole but it will drill it and come out of the hole in one piece.
Again use a lubricant and always check the cutting edges on the drill look good before you use
it.</p>

<h3>Troubleshooting Feeds and Speeds</h3>

<p>Using the calculations I have given above should be a good starting point for getting the ideal
speeds and feeds for your programs. But there are hundreds of variations that can affect the
results you are getting. </p>

<p>Some of the problems you may encounter:-</p>
<ul>
  <li>Vibration</li>
  <li>Spindle stalling</li>
  <li>Poor surface finish</li>
  <li>Tools breaking</li>
</ul>

<h4>Vibration</h4>

<p>This will probably be the most common problem which may be caused by:-</p>
<ul>
  <li>Incorrect spindle speed, typically too fast</li>
  <li>Poorly clamped workpiece</li>
  <li>Machine lacking rigidity (budget machine)</li>
  <li>Poor quality tooling or the wrong choice of tool</li>
  <li>A combination of all or some of the above</li>
</ul>

<h4>Spindle Stalling</h4>

<p>This will be caused by a lack of power in your spindle motor. Slow down both spindle and feed.
On machines with a pulley system to control RPM, a slower spindle pulley will generate more
torque.</p>

<h4>Poor Surface Finish</h4>

<p>Potential causes include:-</p>
<ul>
  <li>Poorly clamped workpiece</li>
  <li>Worn, chipped or poor quality tools</li>
  <li>Incorrect SFM for the tool or material</li>
  <li>Lack of lubrication</li>
  <li>A combination of all or some of the above</li>
</ul>

<h4>Tools Breaking</h4>
<ul>
  <li>Poor quality tooling</li>
  <li>Wrong choice of tool for the operation</li>
  <li>Lack of lubrication</li>
  <li>Too aggressive depth of cut</li>
</ul>

<div class="info">
A good practice to follow when a tool breaks is to make sure to change your procedure for that
operation. Don’t just put another tool in and try again, it will break again.</div>

<h4>Suggested SFM for different materials</h4>

<p>This is a difficult question to answer for a hobby cnc machine. They all have different
qualities and an ideal SFM on one machine may be a lot different on another.</p>

<div class="info">
A typical SFM for aluminum on an industrial machine can be as fast as 1200. </div>

<p>This would be way too much for a small benchtop cnc machine. Hobby machines are too limited in
their spindle speeds and movement. </p>

<p>Use what I have suggested and work with an SFM that is within your machines capabilities. </p>

<h4>Steel</h4>

<p>As previously suggested, start at around 250 SFM or maybe lower and test, working up, or down,
until you find what works for your machine. You may have to go slower and RPM may restrict how low
you can go. If so, use a smaller diameter tool to stay within your machines RPM range.</p>

<h4>Aluminum</h4>

<p>I would start at 500 SFM and work up, your machines RPM or feedrate may dictate how far you can
go.</p>

<p>I want to make a point of mentioning that not all metals are made equally.</p>

<div class="info">
I would strongly suggest not buying steel or aluminum from a ‘big box store’.</div>

<p>The metal they sell can be close to unmachinable. The aluminum can be really soft and gummy, you
could struggle to get good results which can be confusing and fustrating when you are trying to
learn how to machine.</p>

<h4>Plastics</h4>

<p>This is a tricky one because there are probably hundreds of different plastics with different
properties.</p>

<div class="info">
You will have to test yourself, but be aware not to have too high an RPM with a low feed per tooth,
the plastic can heat up and melt.</div>

<p>There are endmills specifically designed for acrylics, some being single flute. This will give
you more control with your feedrate, you will be able to run a slower feed reducing the risk of
overheating the plastic.</p>

<h4>Wood</h4>

<p>There are a large variations of hardness in wood, but luckily it is very forgiving to machine,
just pick a speed and go for it.</p>

<p>HSS (high speed steel) endmills are perfect for wood and they cost less than carbide. </p>

<div class="info">
Just remember to always try and get good quality tooling, it can prevent a lot of frustration and
head scratching.</div>

<p>One note to keep in mind is you don’t have to go faster just because a material is softer.
Start slow and if it works for you, just stick with it.</p>

<h3>Feed and speed calculators</h3>

<p>There are machinists calculators available which are helpful to have on hand in your
workshop.</p>

<p>They have functions to call up the SFM for the most common materials. It will take the guesswork
out of your calculations for many areas of machining. </p>

<div class="info">
But you have to remember that they will only be suggested starting values and you will also have to
compensate for using a smaller, less powerful machine.</div>

<p>There are some available on Amazon, such as the calculated industries machining calculator.</p>

<h3>Loupe</h3>

<p>I highly recommend getting a Loupe, they are really cheap and you will be surprised how much
clearer you can see the condition of your tooling. Especially useful when using the smaller tooling
that a hobby mill will use. This jewelry loupe on Amazon looks perfect for this purpose.</p>

<h3>Final Thoughts</h3>

<p>Although it is not possible to give a definitive answer to what feed and speed you should use
for any milling or turning operation, using the information in this article should help establish a
baseline for your machine. </p>

<p>Once I discovered the ‘sweet spots’ for my Taig mill I was able to produce repeatable
results that prolonged the life of my endmills and reduced potential ‘wear and tear’ on my
machine.</p>
<br>
<br>
<!-- ----------------------------------------------------------------------------------------------------------->
<!-- -----------------------------------------------------------------------------------------------------------> 

<h2 id="P-19">MCode Reference <a href="http://linuxcnc.org/docs/html/gcode/m-code.html">[linux
cnc]</a></h2>

<p></p>

<table rules="all" width="60%" frame="border" cellspacing="0" cellpadding="4">
  <col width="28%">
  <col width="71%">
  <thead>
    <tr>
      <th>Code</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="#mcode:m0-m1">M0 M1</a></td>
      <td>Program Pause</td>
    </tr>
    <tr>
      <td><a href="#mcode:m2-m30">M2 M30</a></td>
      <td>Program End</td>
    </tr>
    <tr>
      <td><a href="#mcode:m60">M60</a></td>
      <td>Pallet Change Pause</td>
    </tr>
    <tr>
      <td><a href="#mcode:m3-m4-m5">M3 M4 M5</a></td>
      <td>Spindle Control</td>
    </tr>
    <tr>
      <td><a href="#mcode:m6">M6</a></td>
      <td>Tool Change</td>
    </tr>
    <tr>
      <td><a href="#mcode:m7-m8-m9">M7 M8 M9</a></td>
      <td>Coolant Control</td>
    </tr>
    <tr>
      <td><a href="#mcode:m19">M19</a></td>
      <td>Orient Spindle</td>
    </tr>
    <tr>
      <td><a href="#mcode:m48-m49">M48 M49</a></td>
      <td>Feed &amp; Spindle Overrides Enable/Disable</td>
    </tr>
    <tr>
      <td><a href="#mcode:m50">M50</a></td>
      <td>Feed Override Control</td>
    </tr>
    <tr>
      <td><a href="#mcode:m51">M51</a></td>
      <td>Spindle Override Control</td>
    </tr>
    <tr>
      <td><a href="#mcode:m52">M52</a></td>
      <td>Adaptive Feed Control</td>
    </tr>
    <tr>
      <td><a href="#mcode:m53">M53</a></td>
      <td>Feed Stop Control</td>
    </tr>
    <tr>
      <td><a href="#mcode:m61">M61</a></td>
      <td>Set Current Tool Number</td>
    </tr>
    <tr>
      <td><a href="#mcode:m62-m65">M62-M65</a></td>
      <td>Output Control</td>
    </tr>
    <tr>
      <td><a href="#mcode:m66">M66</a></td>
      <td>Input Control</td>
    </tr>
    <tr>
      <td><a href="#mcode:m67">M67</a></td>
      <td>Analog Output Control</td>
    </tr>
    <tr>
      <td><a href="#mcode:m68">M68</a></td>
      <td>Analog Output Control</td>
    </tr>
    <tr>
      <td><a href="#mcode:m70">M70</a></td>
      <td>Save Modal State</td>
    </tr>
    <tr>
      <td><a href="#mcode:m71">M71</a></td>
      <td>Invalidate Stored Modal State</td>
    </tr>
    <tr>
      <td><a href="#mcode:m72">M72</a></td>
      <td>Restore Modal State</td>
    </tr>
    <tr>
      <td><a href="#mcode:m73">M73</a></td>
      <td>Save Autorestore Modal State</td>
    </tr>
    <tr>
      <td><a href="#mcode:m98-m99">M98 M99</a></td>
      <td>Call and Return From Subprogram</td>
    </tr>
    <tr>
      <td><a href="#mcode:m100-m199">M100-M199</a></td>
      <td>User Defined M-Codes</td>
    </tr>
  </tbody>
</table>

<h3 id="mcode:m0-m1">M0, M1 Program Pause</h3>
<ul>
  <li><p><em>M0</em> - pause a running program temporarily. LinuxCNC remains in the Auto Mode so
    MDI and other manual actions are not enabled. Pressing the resume button will restart the
    program at the following line.</p>
  </li>
  <li><p><em>M1</em> - pause a running program temporarily if the optional stop switch is on.
    LinuxCNC remains in the Auto Mode so MDI and other manual actions are not enabled. Pressing the
    resume button will restart the program at the following line.</p>
  </li>
</ul>

<div class="info">
<p><strong>Note: </strong> It is OK to program <em>M0</em> and <em>M1</em> in MDI mode, but the
effect will probably not be noticeable, because normal behavior in MDI mode is to stop after each
line of input anyway.</p>
</div>

<p></p>

<h3 id="mcode:m2-m30">M2, M30 Program End</h3>
<ul>
  <li><p><em>M2</em> - end the program. Pressing <code class="language-gcode">Cycle Start</code>
    ("R" in the Axis GUI) will restart the program at the beginning of the file.</p>
  </li>
  <li><p><em>M30</em> - exchange pallet shuttles and end the program. Pressing <code
    class="language-gcode">Cycle Start</code> will start the program at the beginning of the
    file.</p>
  </li>
</ul>
<ol class="arabic">
  <li><p>Change from Auto mode to MDI mode.</p>
  </li>
  <li><p>Origin offsets are set to the default (like <em>G54</em>).</p>
  </li>
  <li><p>Selected plane is set to XY plane (like <em>G17</em>).</p>
  </li>
  <li><p>Distance mode is set to absolute mode (like <em>G90</em>).</p>
  </li>
  <li><p>Feed rate mode is set to units per minute (like <em>G94</em>).</p>
  </li>
  <li><p>Feed and speed overrides are set to ON (like <em>M48</em>).</p>
  </li>
  <li><p>Cutter compensation is turned off (like <em>G40</em>).</p>
  </li>
  <li><p>The spindle is stopped (like <em>M5</em>).</p>
  </li>
  <li><p>The current motion mode is set to feed (like <em>G1</em>).</p>
  </li>
  <li><p>Coolant is turned off (like <em>M9</em>).</p>
  </li>
</ol>

<div class="info">
<strong>Note: </strong>Lines of code after M2/M30 will not be executed. Pressing <code
class="language-gcode">Cycle Start</code> will start the program at the beginning of the file. 

<p></p>
</div>

<div class="warning">
<strong>Warning: </strong>Using % to wrap the G code does not do the same thing as a <em>Program
End</em>. See <a href="overview.html#gcode:file-requirements">File Requirements</a> for more
information on what using % does not do. 

<p></p>
</div>

<h3 id="mcode:m60">M60 Pallet Change Pause</h3>
<ul>
  <li><p><em>M60</em> - exchange pallet shuttles and then pause a running program temporarily
    (regardless of the setting of the optional stop switch). Pressing the cycle start button will
    restart the program at the following line.</p>
  </li>
</ul>

<h3 id="mcode:m3-m4-m5">M3, M4, M5 Spindle Control</h3>
<ul>
  <li><p><em>M3 [$n]</em> - start the selected spindle clockwise at the <em>S</em> speed.</p>
  </li>
  <li><p><em>M4 [$n]</em> - start the selected spindle counterclockwise at the <em>S</em> speed.</p>
  </li>
  <li><p><em>M5 [$n]</em> - stop the selected spindle.</p>
  </li>
</ul>

<p>Use $ to operate on specific spindles. If $ is omitted then the commands default to operating on
spindle.0 Use $-1 to operate on all active spindles.</p>

<p>This example will start spindles 0, 1, and 2 simultaneously at different speeds:</p>
<pre><code class="language-gcode">S100 
S200 $1
S300 $2
M3 $-1</code></pre>

<p>This example will then reverse spindle 1 but leave the other spindles rotating forwards:</p>
<pre><code class="language-gcode">M4 $1</code></pre>

<p>And this will stop spindle 2 and leave the other spindles rotating:</p>
<pre><code class="language-gcode">M5 $2</code></pre>

<p>If the $ is omitted then behaviour is exactly as normal for a single spindle machine</p>

<p>It is OK to use <em>M3</em> or <em>M4</em> if the <a
href="other-code.html#sec:set-spindle-speed">S</a> spindle speed is set to zero. If this is done
(or if the speed override switch is enabled and set to zero), the spindle will not start turning.
If, later, the spindle speed is set above zero (or the override switch is turned up), the spindle
will start turning. It is OK to use <em>M3</em> or <em>M4</em> when the spindle is already turning
or to use <em>M5</em> when the spindle is already stopped.</p>

<h3 id="mcode:m6">M6 Tool Change</h3>

<h4 id="_manual_tool_change">6.1. Manual Tool Change</h4>

<p>If the HAL component hal_manualtoolchange is loaded, M6 will stop the spindle and prompt the
user to change the tool based on the last <em>T-</em> number programmed. For more information on
hal_manualtoolchange see the <a href="../gui/axis.html#sec:manual-tool-change">Manual Tool
Change</a> section.</p>

<h4 id="_tool_changer">6.2. Tool Changer</h4>

<p>To change a tool in the spindle from the tool currently in the spindle to the tool most recently
selected (using a T word - see Section <a href="other-code.html#sec:select-tool">Select Tool</a>),
program <em>M6</em>. When the tool change is complete:</p>
<ul>
  <li><p>The spindle will be stopped.</p>
  </li>
  <li><p>The tool that was selected (by a T word on the same line or on any line after the previous
    tool change) will be in the spindle.</p>
  </li>
  <li><p>If the selected tool was not in the spindle before the tool change, the tool that was in
    the spindle (if there was one) will be placed back into the tool changer magazine.</p>
  </li>
  <li><p>If configured in the .ini file some axis positions may move when a M6 is issued. See the
    <a href="../config/ini-config.html#sec:emcio-section">EMCIO section</a> for more information on
    tool change options. </p>
  </li>
  <li><p>No other changes will be made. For example, coolant will continue to flow during the tool
    change unless it has been turned off by an <em>M9</em>.</p>
  </li>
</ul>

<div class="warning">
<strong>Warning: </strong> The tool length offset is not changed by <em>M6</em>, use <em><a
href="G-Code .html#gcode:g43">G43</a></em> after the <em>M6</em> to change the tool length offset. 

<p></p>
</div>

<p>The tool change may include axis motion. It is OK (but not useful) to program a change to the
tool already in the spindle. It is OK if there is no tool in the selected slot; in that case, the
spindle will be empty after the tool change. If slot zero was last selected, there will definitely
be no tool in the spindle after a tool change. The tool changer will have to be setup to perform
the tool change in hal and possibly classicladder.</p>

<h3 id="mcode:m7-m8-m9">M7, M8, M9 Coolant Control</h3>
<ul>
  <li><p><em>M7</em> - turn mist coolant on. M7 controls iocontrol.0.coolant-mist pin.</p>
  </li>
  <li><p><em>M8</em> - turn flood coolant on. M8 controls iocontrol.0.coolant-flood pin.</p>
  </li>
  <li><p><em>M9</em> - turn both M7 and M8 off.</p>
  </li>
</ul>

<p>Connect one or both of the coolant control pins in HAL before M7 or M8 will control an output.
M7 and M8 can be used to turn on any output via G code.</p>

<p>It is OK to use any of these commands, regardless of the current coolant state.</p>

<h3 id="mcode:m19">M19 Orient Spindle</h3>
<ul>
  <li><p><em>M19 R- Q- [P-] [$-]</em> </p>
  </li>
  <li><p><em>R</em> Position to rotate to from 0, valid range is 0-360 degrees </p>
  </li>
  <li><p><em>Q</em> Number of seconds to wait until orient completes. If spindle.N.is-oriented does
    not become true within Q timeout an error occurs.</p>
  </li>
  <li><p><em>P</em> Direction to rotate to position.</p>
    <ul>
      <li><p><em>0</em> rotate for smallest angular movement (default) </p>
      </li>
      <li><p><em>1</em> always rotate clockwise (same as M3 direction) </p>
      </li>
      <li><p><em>2</em> always rotate counterclockwise (same as M4 direction) </p>
      </li>
    </ul>
  </li>
  <li><p><em>$</em> The spindle to orient (actually only determines which HAL pins carry the
    spindle position commands) </p>
  </li>
</ul>

<p>M19 is cleared by any of M3,M4,M5.</p>

<p>Spindle orientation requires a quadrature encoder with an index to sense the spindle shaft
position and direction of rotation.</p>

<p>INI Settings in the [RS274NGC] section.</p>

<p>ORIENT_OFFSET = 0-360 (fixed offset in degrees added to M19 R word)</p>

<p>HAL Pins</p>
<ul>
  <li><p><em>spindle.N.orient-angle</em> (out float) Desired spindle orientation for M19. Value of
    the M19 R word parameter plus the value of the [RS274NGC]ORIENT_OFFSET ini parameter.</p>
  </li>
  <li><p><em>spindle.N.orient-mode</em> (out s32) Desired spindle rotation mode. Reflects M19 P
    parameter word, Default = 0 </p>
  </li>
  <li><p><em>spindle.N.orient</em> (out bit) Indicates start of spindle orient cycle. Set by M19.
    Cleared by any of M3,M4,M5. If spindle-orient-fault is not zero during spindle-orient true, the
    M19 command fails with an error message.</p>
  </li>
  <li><p><em>spindle.N.is-oriented</em> (in bit) Acknowledge pin for spindle-orient. Completes
    orient cycle. If spindle-orient was true when spindle-is-oriented was asserted, the
    spindle-orient pin is cleared and the spindle-locked pin is asserted. Also, the spindle-brake
    pin is asserted.</p>
  </li>
  <li><p><em>spindle.N.orient-fault</em> (in s32) Fault code input for orient cycle. Any value
    other than zero will cause the orient cycle to abort.</p>
  </li>
  <li><p><em>spindle.N.locked</em> (out bit) Spindle orient complete pin. Cleared by any of
    M3,M4,M5.</p>
  </li>
</ul>

<h3 id="mcode:m48-m49">M48, M49 Speed and Feed Override Control</h3>
<ul>
  <li><p><em>M48</em> - enable the spindle speed and feed rate override controls.</p>
  </li>
  <li><p><em>M49</em> - disable both controls.</p>
  </li>
</ul>

<p>These commands also take an optional $ parameter to determine which spindle they operate on.</p>

<p>It is OK to enable or disable the controls when they are already enabled or disabled. See the <a
href="machining-center.html#sub:feed-rate">Feed Rate</a> Section for more details.</p>

<h3 id="mcode:m50">M50 Feed Override Control</h3>
<ul>
  <li><p><em>M50 &lt;P1&gt;</em> - enable the feed rate override control. The P1 is optional.</p>
  </li>
  <li><p><em>M50 P0</em> - disable the feed rate control.</p>
  </li>
</ul>

<p>While disabled the feed override will have no influence, and the motion will be executed at
programmed feed rate. (unless there is an adaptive feed rate override active).</p>

<h3 id="mcode:m51">M51 Spindle Speed Override Control</h3>
<ul>
  <li><p><em>M51 &lt;P1&gt; &lt;$-&gt;</em>- enable the spindle speed override control for the
    selected spindle. The P1 is optional.</p>
  </li>
  <li><p><em>M51 P0 &lt;$-&gt;</em> - disable the spindle speed override control program. While
    disabled the spindle speed override will have no influence, and the spindle speed will have the
    exact program specified value of the S-word (described in <a
    href="other-code.html#sec:set-spindle-speed">Spindle Speed</a> Section).</p>
  </li>
</ul>

<h3 id="mcode:m52">M52 Adaptive Feed Control</h3>
<ul>
  <li><p><em>M52 &lt;P1&gt;</em> - use an adaptive feed. The P1 is optional.</p>
  </li>
  <li><p><em>M52 P0</em> - stop using adaptive feed.</p>
  </li>
</ul>

<p>When adaptive feed is enabled, some external input value is used together with the user
interface feed override value and the commanded feed rate to set the actual feed rate. In LinuxCNC,
the HAL pin <em>motion.adaptive-feed</em> is used for this purpose. Values on
<em>motion.adaptive-feed</em> should range from -1 (programmed speed in reverse) to 1 (full speed).
0 is equivalent to feed-hold.</p>

<div class="info">
<strong>Note: </strong> The use of negative adaptive-feed for reverse run is a new feature and is
not very well tested as yet. The intended use is for plasma cutters and wire spark eroders but it
is not limited to such applications. </div>

<h3 id="mcode:m53">M53 Feed Stop Control</h3>
<ul>
  <li><p><em>M53 &lt;P1&gt;</em> - enable the feed stop switch. The P1 is optional. Enabling the
    feed stop switch will allow motion to be interrupted by means of the feed stop control. In
    LinuxCNC, the HAL pin <em>motion.feed-hold</em> is used for this purpose. A <em>true</em> value
    will cause the motion to stop when <em>M53</em> is active.</p>
  </li>
  <li><p><em>M53 P0</em> - disable the feed stop switch. The state of <em>motion.feed-hold</em>
    will have no effect on feed when M53 is not active.</p>
  </li>
</ul>

<h3 id="mcode:m61">M61 Set Current Tool</h3>
<ul>
  <li><p><em>M61 Q-</em> - change the current tool number while in MDI or Manual mode without a
    tool change. One use is when you power up LinuxCNC with a tool currently in the spindle you can
    set that tool number without doing a tool change.</p>
  </li>
</ul>

<div class="warning">
<strong>Warning: </strong> The tool length offset is not changed by <em>M61</em>, use <em><a
href="G-Code .html#gcode:g43">G43</a></em> after the <em>M61</em> to change the tool length offset. 

<p></p>
</div>

<p>It is an error if:</p>
<ul>
  <li><p>Q- is not 0 or greater </p>
  </li>
</ul>

<h3 id="mcode:m62-m65">M62 - M65 Digital Output Control</h3>
<ul>
  <li><p><em>M62 P-</em> - turn on digital output synchronized with motion. The P- word specifies
    the digital output number.</p>
  </li>
  <li><p><em>M63 P-</em> - turn off digital output synchronized with motion. The P- word specifies
    the digital output number.</p>
  </li>
  <li><p><em>M64 P-</em> - turn on digital output immediately. The P- word specifies the digital
    output number.</p>
  </li>
  <li><p><em>M65 P-</em> - turn off digital output immediately. The P- word specifies the digital
    output number.</p>
  </li>
</ul>

<p>The P-word ranges from 0 to a default value of 3. If needed the the number of I/O can be
increased by using the num_dio parameter when loading the motion controller. See the <a
href="../config/core-components.html#sec:motion">Motion Section</a> for more information.</p>

<p>The M62 &amp; M63 commands will be queued. Subsequent commands referring to the same output
number will overwrite the older settings. More than one output change can be specified by issuing
more than one M62/M63 command.</p>

<p>The actual change of the specified outputs will happen at the beginning of the next motion
command. If there is no subsequent motion command, the queued output changes won’t happen. It’s
best to always program a motion G code (G0, G1, etc) right after the M62/63.</p>

<p>M64 &amp; M65 happen immediately as they are received by the motion controller. They are not
synchronized with movement, and they will break blending.</p>

<div class="info">
<strong>Note: </strong> M62-65 will not function unless the appropriate motion.digital-out-nn pins
are connected in your hal file to outputs. 

<p></p>
</div>

<h3 id="mcode:m66">M66 Wait on Input</h3>
<pre><code class="language-gcode">M66 P- | E- &lt;L-&gt;</code></pre>
<ul>
  <li><p><em>P-</em> - specifies the digital input number from 0 to 3.</p>
  </li>
  <li><p><em>E-</em> - specifies the analog input number from 0 to 3.</p>
  </li>
  <li><p><em>L-</em> - specifies the wait mode type.</p>
    <ul>
      <li><p><em>Mode 0: IMMEDIATE</em> - no waiting, returns immediately. The current value of the
        input is stored in parameter #5399 </p>
      </li>
      <li><p><em>Mode 1: RISE</em> - waits for the selected input to perform a rise event.</p>
      </li>
      <li><p><em>Mode 2: FALL</em> - waits for the selected input to perform a fall event.</p>
      </li>
      <li><p><em>Mode 3: HIGH</em> - waits for the selected input to go to the HIGH state.</p>
      </li>
      <li><p><em>Mode 4: LOW</em> - waits for the selected input to go to the LOW state.</p>
      </li>
    </ul>
  </li>
  <li><p><em>Q-</em> - specifies the timeout in seconds for waiting. If the timeout is exceeded,
    the wait is interrupt, and the variable #5399 will be holding the value -1. The Q value is
    ignored if the L-word is zero (IMMEDIATE). A Q value of zero is an error if the L-word is
    non-zero.</p>
  </li>
  <li><p>Mode 0 is the only one permitted for an analog input.</p>
  </li>
</ul>

<p class="parag">M66 Example Lines</p>
<pre><code class="language-gcode">M66 P0 L3 Q5 (wait up to 5 seconds for digital input 0 to turn on)</code></pre>

<p>M66 wait on an input stops further execution of the program, until the selected event (or the
programmed timeout) occurs.</p>

<p>It is an error to program M66 with both a P-word and an E-word (thus selecting both an analog
and a digital input). In LinuxCNC these inputs are not monitored in real time and thus should not
be used for timing-critical applications.</p>

<p>The number of I/O can be increased by using the num_dio or num_aio parameter when loading the
motion controller. See the <a href="../config/core-components.html#sec:motion">Motion Section</a>
for more information.</p>

<div class="info">
<strong>Note: </strong> M66 will not function unless the appropriate motion.digital-in-nn pins or
motion.analog-in-nn pins are connected in your hal file to an input. 

<p></p>
</div>

<p class="parag">Example HAL Connection</p>
<pre><code class="language-gcode">net signal-name motion.digital-in-00 &lt;= parport.0.pin10-in</code></pre>

<h3 id="mcode:m67">M67 Analog Output,Synchronized</h3>
<pre><code class="language-gcode">M67 E- Q-</code></pre>
<ul>
  <li><p><em>M67</em> - set an analog output synchronized with motion.</p>
  </li>
  <li><p><em>E-</em> - output number ranging from 0 to 3.</p>
  </li>
  <li><p><em>Q-</em> - is the value to set (set to 0 to turn off).</p>
  </li>
</ul>

<p>The actual change of the specified outputs will happen at the beginning of the next motion
command. If there is no subsequent motion command, the queued output changes won’t happen. It’s
best to always program a motion G code (G0, G1, etc) right after the M67. M67 functions the same as
M62-63.</p>

<p>The number of I/O can be increased by using the num_dio or num_aio parameter when loading the
motion controller. See the <a href="../config/core-components.html#sec:motion">Motion Section</a>
for more information.</p>
<!-- Generator: GNU source-highlight 3.1.8 -->

<div class="info">
<strong>Note: </strong> M67 will not function unless the appropriate motion.analog-out-nn pins are
connected in your hal file to outputs. 

<p></p>
</div>

<h3 id="mcode:m68">M68 Analog Output, Immediate</h3>
<pre><code class="language-gcode">M68 E- Q-</code></pre>
<ul>
  <li><p><em>M68</em> - set an analog output immediately.</p>
  </li>
  <li><p><em>E-</em> - output number ranging from 0 to 3.</p>
  </li>
  <li><p><em>Q-</em> - is the value to set (set to 0 to turn off).</p>
  </li>
</ul>

<p>M68 output happen immediately as they are received by the motion controller. They are not
synchronized with movement, and they will break blending. M68 functions the same as M64-65.</p>

<p>The number of I/O can be increased by using the num_dio or num_aio parameter when loading the
motion controller. See the <a href="../config/core-components.html#sec:motion">Motion Section</a>
for more information.</p>

<div class="info">
<strong>Note: </strong> M68 will not function unless the appropriate motion.analog-out-nn pins are
connected in your hal file to outputs.</div>

<h3 id="mcode:m70">M70 Save Modal State</h3>

<p>To explicitly save the modal state at the current call level, program <em>M70</em>. Once modal
state has been saved with <em>M70</em>, it can be restored to exactly that state by executing an
<em>M72</em>.</p>

<p>A pair of <em>M70</em> and <em>M72</em> instructions will typically be used to protect a program
against inadvertant modal changes within subroutines.</p>

<div class="paragraph" id="mcode:m70-saved-state">
<p>The state saved consists of:</p>
<ul>
  <li><p>current G20/G21 settings (imperial/metric) </p>
  </li>
  <li><p>selected plane (G17/G18/G19 G17.1,G18.1,G19.1) </p>
  </li>
  <li><p>status of cutter compensation (G40,G41,G42,G41.1,G42,1) </p>
  </li>
  <li><p>distance mode - relative/absolute (G90/G91) </p>
  </li>
  <li><p>feed mode (G93/G94,G95) </p>
  </li>
  <li><p>current coordinate system (G54-G59.3) </p>
  </li>
  <li><p>tool length compensation status (G43,G43.1,G49) </p>
  </li>
  <li><p>retract mode (G98,G99) </p>
  </li>
  <li><p>spindle mode (G96-css or G97-RPM) </p>
  </li>
  <li><p>arc distance mode (G90.1, G91.1) </p>
  </li>
  <li><p>lathe radius/diameter mode (G7,G8) </p>
  </li>
  <li><p>path control mode (G61, G61.1, G64) </p>
  </li>
  <li><p>current feed and speed (<em>F</em> and <em>S</em> values) </p>
  </li>
  <li><p>spindle status (M3,M4,M5) - on/off and direction </p>
  </li>
  <li><p>mist (M7) and flood (M8) status </p>
  </li>
  <li><p>speed override (M51) and feed override (M50) settings </p>
  </li>
  <li><p>adaptive feed setting (M52) </p>
  </li>
  <li><p>feed hold setting (M53) </p>
  </li>
</ul>

<p>Note that in particular, the motion mode (G1 etc) is NOT restored.</p>

<p><em>current call level</em> means either:</p>
<ul>
  <li><p>executing in the main program. There is a single storage location for state at the main
    program level; if several <em>M70</em> instructions are executed in turn, only the most
    recently saved state is restored when an <em>M72</em> is executed.</p>
  </li>
  <li><p>executing within a G-Code subroutine. The state saved with <em>M70</em> within a
    subroutine behaves exactly like a local named parameter - it can be referred to only within
    this subroutine invocation with an <em>M72</em> and when the subroutine exits, the parameter
    goes away.</p>
  </li>
</ul>

<p>A recursive invocation of a subroutine introduces a new call level.</p>

<h3 id="mcode:m71">M71 Invalidate Stored Modal State</h3>

<p>Modal state saved with an <em>M70</em> or by an <em>M73</em> at the current call level is
invalidated (cannot be restored from anymore).</p>

<p>A subsequent <em>M72</em> at the same call level will fail.</p>

<p>If executed in a subroutine which protects modal state by an <em>M73</em>, a subsequent return
or endsub will <strong>not</strong> restore modal state.</p>

<p>The usefulness of this feature is dubious. It should not be relied upon as it might go away.</p>

<h3 id="mcode:m72">M72 Restore Modal State</h3>

<p><a href="#mcode:m70-saved-state">Modal state saved with an <em>M70</em></a> code can be restored
by executing an <em>M72</em>.</p>

<p>The handling of G20/G21 is specially treated as feeds are interpreted differently depending on
G20/G21: if length units (mm/in) are about to be changed by the restore operation, 'M72 'will
restore the distance mode first, and then all other state including feed to make sure the feed
value is interpreted in the correct unit setting.</p>

<p>It is an error to execute an <em>M72</em> with no previous <em>M70</em> save operation at that
level.</p>

<p>The following example demonstrates saving and explicitely restoring modal state around a
subroutine call using <em>M70</em> and <em>M72</em>. Note that the <em>imperialsub</em> subroutine
is not "aware" of the M7x features and can be used unmodified:</p>
<pre><code class="language-gcode">
O&lt;showstate&gt; sub
(DEBUG, imperial=#<_imperial> absolute=#<_absolute> feed=#<_feed> rpm=#<_rpm>)
O&lt;showstate&gt; endsub

O&lt;imperialsub&gt; sub
g20 (imperial)
g91 (relative mode)
F5 (low feed)
S300 (low rpm)
(debug, in subroutine, state now:)
o&lt;showstate&gt; call
O&lt;imperialsub&gt;  endsub

; main program
g21 (metric)
g90 (absolute)
f200 (fast speed)
S2500 (high rpm)

(debug, in main, state now:)
o&lt;showstate&gt; call

M70 (save caller state in at global level)
O&lt;imperialsub&gt;  call
M72 (explicitely restore state)

(debug, back in main, state now:)
o&lt;showstate&gt; call
m2</code></pre>

<h3 id="mcode:m73">M73 Save and Autorestore Modal State</h3>

<p>To save modal state within a subroutine, and restore state on subroutine <em>endsub</em> or any
<em>return</em> path, program <em>M73</em>.</p>

<p>Aborting a running program in a subroutine which has an <em>M73</em> operation will
<strong>not</strong> restore state .</p>

<p>Also, the normal end (<em>M2</em>) of a main program which contains an <em>M73</em> will
<strong>not</strong> restore state.</p>

<p>The suggested use is at the beginning of a O-word subroutine as in the following example. Using
<em>M73</em> this way enables designing subroutines which need to modify modal state but will
protect the calling program against inadvertant modal changes. Note the use of <a
href="overview.html#gcode:predefined-named-parameters">predefined named parameters</a> in the
<em>showstate</em> subroutine.</p>
<pre><code class="language-gcode">
O&lt;showstate&gt;  sub
(DEBUG, imperial=#<_imperial> absolute=#<_absolute> feed=#<_feed> rpm=#<_rpm>)
O&lt;showstate&gt;  endsub

O&lt;imperialsub&gt; sub
M73 (save caller state in current call context, restore on return or endsub)
g20 (imperial)
g91 (relative mode)
F5 (low feed)
S300 (low rpm)
(debug, in subroutine, state now:)
o&lt;showstate&gt;  call

; note - no M72 is needed here - the following endsub or an
; explicit 'return' will restore caller state
O&lt;imperialsub&gt; endsub

; main program
g21 (metric)
g90 (absolute)
f200 (fast speed)
S2500 (high rpm)
(debug, in main, state now:)
o&lt;showstate&gt;  call
o&lt;imperialsub&gt; call
(debug, back in main, state now:)
o&lt;showstate&gt;  call
m2</code></pre>

<h3 id="mcode:m98-m99">M98 and M99</h3>

<p>The interpreter supports Fanuc-style main- and sub-programs with the <em>M98</em> and
<em>M99</em> M-codes. See <a href="o-code.html#ocode:fanuc-style-programs">Fanuc-Style
Programs</a>.</p>

<h4 id="_selectively_restoring_modal_state">Selectively Restoring Modal State</h4>

<p>Executing an <em>M72</em> or returning from a subroutine which contains an <em>M73</em> will
restore <a href="#mcode:m70-saved-state"><strong>all</strong> modal state saved</a>.</p>

<p>If only some aspects of modal state should be preserved, an alternative is the usage of <a
href="overview.html#gcode:predefined-named-parameters">predefined named parameters</a>, local
parameters and conditional statements. The idea is to remember the modes to be restored at the
beginning of the subroutine, and restore these before exiting. Here is an example, based on snippet
of <em>nc_files/tool-length-probe.ngc</em>:</p>
<pre><code class="language-gcode">
O&lt;measure&gt; sub   (measure reference tool)
;
#&lt;absolute&gt; = #<_absolute>  (remember in local variable if G90 was set)
;
g30 (above switch)
g38.2 z0 f15 (measure)
g91 g0z.2 (off the switch)
#1000=#5063 (save reference tool length)
(print,reference length is #1000)
;
O&lt;restore_abs&gt; if [#<absolute>]
    g90 (restore G90 only if it was set on entry:)
O&lt;restore_abs&gt; endif
;
O&lt;measure&gt; endsub</code></pre>

<h3 id="mcode:m100-m199">M100 - M199 User Defined Commands</h3>
<pre><code class="language-gcode">M1-- &lt;P- Q-&gt;</code></pre>
<ul>
  <li><p><em>M1--</em> - an integer in the range of 100 - 199.</p>
  </li>
  <li><p><em>P-</em> - a number passed to the file as the first parameter.</p>
  </li>
  <li><p><em>Q-</em> - a number passed to the file as the second parameter.</p>
  </li>
</ul>

<div class="info">
<strong>Note: </strong> After creating a new <em>M1nn</em> file you must restart the GUI so it is
aware of the new file, otherwise you will get an <em>Unkown m code</em> error. </div>

<p>The external program named <em>M100</em> through <em>M199</em> (no extension and a capitol M) is
executed with the optional P and Q values as its two arguments. Execution of the G code file pauses
until the external program exits. Any valid executable file can be used. The file must be located
in the search path specificed in the ini file configuration. See the <a
href="../config/ini-config.html#sec:display-section">Display Section</a> for more information on
search paths.</p>

<div class="warning">
<strong>Warning: </strong> Do not use a word processor to create or edit the files. A word
processor will leave unseen codes that will cause problems and may prevent a bash or python file
from working. Use a text editor like Gedit in Ubuntu or Notepad++ in other operating systems to
create or edit the files. </div>

<p>The error <em>Unknown M code used</em> denotes one of the following</p>
<ul>
  <li><p>The specified User Defined Command does not exist </p>
  </li>
  <li><p>The file is not an executable file </p>
  </li>
  <li><p>The file name has an extension </p>
  </li>
  <li><p>The file name does not follow this format M1nn where nn = 00 through 99 </p>
  </li>
  <li><p>The file name used a lower case M </p>
  </li>
</ul>

<p>For example to open and close a collet closer that is controlled by a parallel port pin using a
bash script file using M101 and M102. Create two files named M101 and M102. Set them as executable
files (typically right click/properties/permissions) before running LinuxCNC. Make sure the
parallel port pin is not connected to anything in a HAL file.</p>

<p class="parag">M101 Example File</p>
<pre><code class="language-bash">#!/bin/bash
# file to turn on parport pin 14 to open the collet closer
halcmd setp parport.0.pin-14-out True
exit 0</code></pre>

<p class="parag">M102 Example File</p>
<pre><code class="language-bash">#!/bin/bash
# file to turn off parport pin 14 to open the collet closer
halcmd setp parport.0.pin-14-out False
exit 0</code></pre>

<p>To pass a variable to a M1nn file you use the P and Q option like this:</p>
<pre><code class="language-gcode">M100 P123.456 Q321.654</code></pre>

<p class="parag">M100 Example File</p>
<pre><code class="language-bash">#!/bin/bash
voltage=$1
feedrate=$2
halcmd setp thc.voltage $voltage
halcmd setp thc.feedrate $feedrate
exit 0</code></pre>

<p>To display a graphic message and stop until the message window is closed use a graphic display
program like Eye of Gnome to display the graphic file. When you close it the program will
resume.</p>

<p class="parag">M101 Example File</p>
<pre><code class="language-bash">#!/bin/bash
eog /home/john/linuxcnc/nc_files/message.png
exit 0</code></pre>

<p>To display a graphic message and continue processing the G code file suffix an ampersand to the
command.</p>

<p class="parag">M110 Example display and keep going</p>
<pre><code class="language-bash">#!/bin/bash
eog /home/john/linuxcnc/nc_files/message.png &amp;
exit 0</code></pre>

<h2 id="P-20">GCode Reference <a
href="http://linuxcnc.org/docs/html/gcode/g-code.html">[linuxcnc]</a></h2>

<p></p>

<table rules="all" width="60%" frame="border" cellspacing="0" cellpadding="4">
  <col width="28%">
  <col width="71%">
  <thead>
    <tr>
      <th>Code</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="#gcode:g0"></a><span style="color:#008080">G0</span></td>
      <td>Coordinated Motion at Rapid Rate</td>
    </tr>
    <tr>
      <td><a href="#gcode:g1"></a><span style="color:#008080">G1</span></td>
      <td>Coordinated Motion at Feed Rate</td>
    </tr>
    <tr>
      <td><a href="#gcode:g2-g3"></a>G2 G3</td>
      <td>Coordinated Helical Motion at Feed Rate</td>
    </tr>
    <tr>
      <td><a href="#gcode:g4"></a>G4</td>
      <td>Dwell</td>
    </tr>
    <tr>
      <td><a href="#gcode:g5"></a>G5</td>
      <td>Cubic Spline</td>
    </tr>
    <tr>
      <td><a href="#gcode:g5.1"></a>G5.1</td>
      <td>Quadratic B-Spline</td>
    </tr>
    <tr>
      <td><a href="#gcode:g5.2"></a>G5.2</td>
      <td>NURBS, add control point</td>
    </tr>
    <tr>
      <td><a href="#gcode:g7"></a>G7</td>
      <td>Diameter Mode (lathe)</td>
    </tr>
    <tr>
      <td><a href="#gcode:g8"></a>G8</td>
      <td>Radius Mode (lathe)</td>
    </tr>
    <tr>
      <td><a href="#gcode:g10-L1"></a>G10 L1</td>
      <td>Set Tool Table Entry</td>
    </tr>
    <tr>
      <td><a href="#gcode:g10-L10"></a>G10 L10</td>
      <td>Set Tool Table, Calculated, Workpiece</td>
    </tr>
    <tr>
      <td><a href="#gcode:g10-L11"></a>G10 L11</td>
      <td>Set Tool Table, Calculated, Fixture</td>
    </tr>
    <tr>
      <td><a href="#gcode:g10-L2"></a>G10 L2</td>
      <td>Coordinate System Origin Setting</td>
    </tr>
    <tr>
      <td><a href="#gcode:g10-L20"></a>G10 L20</td>
      <td>Coordinate System Origin Setting Calculated</td>
    </tr>
    <tr>
      <td><a href="#gcode:g17-g19"></a>G17 - G19.1</td>
      <td>Plane Select</td>
    </tr>
    <tr>
      <td><span style="color:#008080"><a href="#gcode:g20-g21"></a>G20 G21</span></td>
      <td>Set Units of Measure</td>
    </tr>
    <tr>
      <td><a href="#gcode:g28-g28.1"></a>G28 - G28.1</td>
      <td>Go to Predefined Position</td>
    </tr>
    <tr>
      <td><a href="#gcode:g30-g30.1"></a>G30 G30.1</td>
      <td>Go to Predefined Position</td>
    </tr>
    <tr>
      <td><a href="#gcode:g33"></a>G33</td>
      <td>Spindle Synchronized Motion</td>
    </tr>
    <tr>
      <td><a href="#gcode:g33.1"></a>G33.1</td>
      <td>Rigid Tapping</td>
    </tr>
    <tr>
      <td><a href="#gcode:g38.2-g38-5"></a>G38.2 - G38.5</td>
      <td>Probing</td>
    </tr>
    <tr>
      <td><a href="#gcode:g40"></a>G40</td>
      <td>Cancel Cutter Compensation</td>
    </tr>
    <tr>
      <td><a href="#gcode:g41-g42"></a>G41 G42</td>
      <td>Cutter Compensation</td>
    </tr>
    <tr>
      <td><a href="#gcode:g41.1-g42.2"></a>G41.1 G42.1</td>
      <td>Dynamic Cutter Compensation</td>
    </tr>
    <tr>
      <td><a href="#gcode:g43"></a>G43</td>
      <td>Use Tool Length Offset from Tool Table</td>
    </tr>
    <tr>
      <td><a href="#gcode:g43.1"></a>G43.1</td>
      <td>Dynamic Tool Length Offset</td>
    </tr>
    <tr>
      <td><a href="#gcode:g43.2"></a>G43.2</td>
      <td>Apply additional Tool Length Offset</td>
    </tr>
    <tr>
      <td><a href="#gcode:g49"></a>G49</td>
      <td>Cancel Tool Length Offset</td>
    </tr>
    <tr>
      <td><a href="#gcode:g52"></a>G52</td>
      <td>Local Coordinate System Offset</td>
    </tr>
    <tr>
      <td><a href="#gcode:g53"></a>G53</td>
      <td>Move in Machine Coordinates</td>
    </tr>
    <tr>
      <td><a href="#gcode:g54-g59.3"></a>G54 - G59.3</td>
      <td>Select Coordinate System (1 - 9)</td>
    </tr>
    <tr>
      <td><a href="#gcode:g61"></a>G61</td>
      <td>Exact Path Mode</td>
    </tr>
    <tr>
      <td><a href="#gcode:g61.1"></a>G61.1</td>
      <td>Exact Stop Mode</td>
    </tr>
    <tr>
      <td><a href="#gcode:g64"></a>G64</td>
      <td>Path Control Mode with Optional Tolerance</td>
    </tr>
    <tr>
      <td><a href="#gcode:g73"></a>G73</td>
      <td>Drilling Cycle with Chip Breaking</td>
    </tr>
    <tr>
      <td><a href="#gcode:g74"></a>G74</td>
      <td>Left-hand Tapping Cycle with Dwell</td>
    </tr>
    <tr>
      <td><a href="#gcode:g76"></a>G76</td>
      <td>Multi-pass Threading Cycle (Lathe)</td>
    </tr>
    <tr>
      <td><a href="#gcode:g"></a>G80</td>
      <td>Cancel Motion Modes</td>
    </tr>
    <tr>
      <td><a href="#gcode:g81"></a>G81</td>
      <td>Drilling Cycle</td>
    </tr>
    <tr>
      <td><a href="#gcode:g82"></a>G82</td>
      <td>Drilling Cycle with Dwell</td>
    </tr>
    <tr>
      <td><a href="#gcode:g83"></a>G83</td>
      <td>Drilling Cycle with Peck</td>
    </tr>
    <tr>
      <td><a href="#gcode:g84"></a>G84</td>
      <td>Right-hand Tapping Cycle with Dwell</td>
    </tr>
    <tr>
      <td><a href="#gcode:g85"></a>G85</td>
      <td>Boring Cycle, No Dwell, Feed Out</td>
    </tr>
    <tr>
      <td><a href="#gcode:g86"></a>G86</td>
      <td>Boring Cycle, Stop, Rapid Out</td>
    </tr>
    <tr>
      <td><a href="#gcode:g"></a>G89</td>
      <td>Boring Cycle, Dwell, Feed Out</td>
    </tr>
    <tr>
      <td><a href="#gcode:g90-g91"></a>G90 G91</td>
      <td>Distance Mode</td>
    </tr>
    <tr>
      <td><a href="#gcode:g90.1-g91.1"></a>G90.1 G91.1</td>
      <td>Arc Distance Mode</td>
    </tr>
    <tr>
      <td><a href="#gcode:g92"></a>G92</td>
      <td>Coordinate System Offset</td>
    </tr>
    <tr>
      <td><a href="#gcode:g92.1-g92.2"></a>G92.1 G92.2</td>
      <td>Cancel G92 Offsets</td>
    </tr>
    <tr>
      <td><a href="#gcode:g92.3"></a>G92.3</td>
      <td>Restore G92 Offsets</td>
    </tr>
    <tr>
      <td><a href="#gcode:g93-g94-g95"></a>G93 G94 G95</td>
      <td>Feed Modes</td>
    </tr>
    <tr>
      <td><a href="#gcode:g96"></a>G96</td>
      <td>Spindle Control Mode</td>
    </tr>
    <tr>
      <td><a href="#gcode:g98-g99"></a>G98 G99</td>
      <td>Canned Cycle Z Retract Mode</td>
    </tr>
  </tbody>
</table>

<p></p>

<h3 id="gcode:g0">G0 Rapid Move</h3>
<pre><code class="language-gcode">G0 axes</code></pre>

<p>For rapid motion, program <em>G0 axes</em>, where all the axis words are optional. The
<em>G0</em> is optional if the current motion mode is <em>G0</em>. This will produce coordinated
motion to the destination point at the maximum rapid rate (or slower). <em>G0</em> is typically
used as a positioning move.</p>

<p></p>

<h4>Rapid Velocity Rate</h4>

<p>The MAX_VELOCITY setting in the ini file [TRAJ] section defines the maximum rapid traverse rate.
The maximum rapid traverse rate can be higher than the individual axes MAX_VELOCITY setting during
a coordinated move. The maximum rapid traverse rate can be slower than the MAX_VELOCITY setting in
the [TRAJ] section if an axis MAX_VELOCITY or trajectory constraints limit it.</p>

<p class="parag">G0 Example</p>
<pre><code class="language-gcode">G90 (set absolute distance mode)
G0 X1 Y-2.3 (Rapid linear move from current location to X1 Y-2.3)
M2 (end program)</code></pre>
<ul>
  <li>See <em>G90</em> &amp; <em>M2</em> sections for more information.</li>
</ul>

<p>If cutter compensation is active, the motion will differ from the above; see the Cutter
Compensation Section.</p>

<p>If <em>G53</em> is programmed on the same line, the motion will also differ; see the
<em>G53</em> Section for more information.</p>

<p>The path of a <em>G0</em> rapid motion can be rounded at direction changes and depends on the
trajectory control settings and maximum acceleration of the axes.</p>

<p>It is an error if:</p>
<ul>
  <li>An axis letter is without a real value.</li>
  <li>An axis letter is used that is not configured</li>
</ul>

<p></p>

<h3 id="gcode:g1">G1 Linear Move</h3>
<pre><code class="language-gcode">G1 axes</code></pre>

<p>For linear (straight line) motion at programed feed rate (for cutting or not), program<em>G1
'axes'</em>, where all the axis words are optional. The <em>G1</em> is optional if the current
motion mode is G1. This will produce coordinated motion to the destination point at the current
feed rate (or slower).</p>

<p class="parag">G1 Example</p>
<pre><code class="language-gcode">G90 (set absolute distance mode)
G1 X1.2 Y-3 F10 (linear move at a feed rate of 10 from current position to
X1.2 Y-3)
Z-2.3 (linear move at same feed rate from current position to Z-2.3)
Z1 F25 (linear move at a feed rate of 25 from current position to Z1)
M2 (end program)</code></pre>
<ul>
  <li>See <em>G90</em> &amp; F &amp; <em>M2</em>. sections for more information.</li>
</ul>

<p>If cutter compensation is active, the motion will differ from the above; see the Cutter
Compensation Section.</p>

<p>If <em>G53</em> is programmed on the same line, the motion will also differ; see the
<em>G53</em> Section for more information.</p>

<p>It is an error if:</p>
<ul>
  <li>No feed rate has been set.</li>
  <li>An axis letter is without a real value.</li>
  <li>An axis letter is used that is not configured</li>
</ul>

<h3 id="gcode:g2">G2, G3 Arc Move</h3>
<pre><code class="language-gcode">G2 or G3 axes offsets (center format)
G2 or G3 axes R- (radius format)
G2 or G3 offsets|R- &lt;P-&gt; (full circles)</code></pre>

<p>A circular or helical arc is specified using either <em>G2</em> (clockwise arc) or <em>G3</em>
(counterclockwise arc) at the current feed rate. The direction (CW, CCW) is as viewed from the
positive end of the axis about which the circular motion occurs.</p>

<p>The axis of the circle or helix must be parallel to the X, Y, or Z axis of the machine
coordinate system. The axis (or, equivalently, the plane perpendicular to the axis) is selected
with <em>G17</em> (Z-axis, XY-plane), <em>G18</em> (Y-axis, XZ-plane), or <em>G19</em> (X-axis,
YZ-plane). Planes 17.1, 18.1, and 19.1 are not currently supported. If the arc is circular, it lies
in a plane parallel to the selected plane.</p>

<p>To program a helix, include the axis word perpendicular to the arc plane, for example, if in the
G17 plane, include a Z word. This will cause the Z axis to move to the programmed value during the
circular XY motion.</p>

<p>To program an arc that gives more than one full turn, use the P word specifying the number of
full turns plus the programmed arc. The P word must be an integer. If P is unspecified, the
behavior is as if P1 was given that is, only one full or partial turn will result. For example, if
a 180 degree arc is programmed with a P2, the resulting motion will be 1 1/2 rotations. For each P
increment above 1 an extra full circle is added to the programmed arc. Multi turn helical arcs are
supported and give motion useful for milling holes or threads.</p>

<div class="warning">
<strong>Warning:</strong> If the pitch of the helix is very small (less than the naive CAM
tolerance then the helix might be converted into a straight line. Bug #222</div>

<p>If a line of code makes an arc and includes rotary axis motion, the rotary axes turn at a
constant rate so that the rotary motion starts and finishes when the XYZ motion starts and
finishes. Lines of this sort are hardly ever programmed.</p>

<p>If cutter compensation is active, the motion will differ from the above; see the Cutter
Compensation Section.</p>

<p>The arc center is absolute or relative as set by <em>G90.1</em> or <em>G91.1</em>
respectively.</p>

<p>Two formats are allowed for specifying an arc: Center Format and Radius Format.</p>

<p>It is an error if:</p>
<ul>
  <li>No feed rate has been set.</li>
  <li>The P word is not an integer.</li>
</ul>

<h4>Center Format Arcs</h4>

<p>Center format arcs are more accurate than radius format arcs and are the preferred format to
use.</p>

<p>The end point of the arc along with the offset to the center of the arc from the current
location are used to program arcs that are less than a full circle. It is OK if the end point of
the arc is the same as the current location.</p>

<p>The offset to the center of the arc from the current location and optionally the number of turns
are used to program full circles.</p>

<p>When programming arcs an error due to rounding can result from using a precision of less than 4
decimal places (0.0000) for inch and less than 3 decimal places (0.000) for millimeters.</p>

<p class="parag">Incremental Arc Distance Mode</p>

<p>Arc center offsets are a relative distance from the start location of the arc. Incremental Arc
Distance Mode is default.</p>

<p>One or more axis words and one or more offsets must be programmed for an arc that is less than
360 degrees.</p>

<p>No axis words and one or more offsets must be programmed for full circles. The P word defaults
to 1 and is optional.</p>

<p>For more information on 'Incremental Arc Distance Mode see the <em>G91.1</em> section.</p>

<p class="parag">Absolute Arc Distance Mode</p>

<p>Arc center offsets are the absolute distance from the current 0 position of the axis.</p>

<p>One or more axis words and both offsets must be programmed for arcs less than 360 degrees.</p>

<p>No axis words and both offsets must be programmed for full circles. The P word defaults to 1 and
is optional.</p>

<p>For more information on 'Absolute Arc Distance Mode see the <em>G90.1</em> section.</p>

<p class="parag">XY-plane (G17)</p>
<pre><code class="language-gcode">G2 or G3 &lt;X- Y- Z- I- J- P-&gt;</code></pre>
<ul>
  <li><em>Z</em> - helix</li>
  <li><em>I</em> - X offset</li>
  <li><em>J</em> - Y offset</li>
  <li><em>P</em> - number of turns</li>
</ul>

<p class="parag">XZ-plane (G18)</p>
<pre><code class="language-gcode">G2 or G3 &lt;X- Z- Y- I- K- P-&gt;</code></pre>
<ul>
  <li><em>Y</em> - helix</li>
  <li><em>I</em> - X offset</li>
  <li><em>K</em> - Z offset</li>
  <li><em>P</em> - number of turns</li>
</ul>

<p class="parag">YZ-plane (G19)</p>
<pre><code class="language-gcode">G2 or G3 &lt;Y- Z- X- J- K- P-&gt;</code></pre>
<ul>
  <li><em>X</em> - helix</li>
  <li><em>J</em> - Y offset</li>
  <li><em>K</em> - Z offset</li>
  <li><em>P</em> - number of turns</li>
</ul>

<p>It is an error if:</p>
<ul>
  <li>No feed rate is set with the F word.</li>
  <li>No offsets are programmed.</li>
</ul>

<p>When the arc is projected on the selected plane, the distance from the current point to the
center differs from the distance from the end point to the center by more than (.05 inch/.5 mm) OR
((.0005 inch/.005mm) AND .1% of radius).</p>

<p>Deciphering the Error message Radius to end of arc differs from radius to start:</p>
<ul>
  <li><em>start</em> - the current position</li>
  <li><em>center</em> - the center position as calculated using the i, j, or k words</li>
  <li><em>end</em> - the programmed end point</li>
  <li><em>r1</em> - radius from the start position to the center</li>
  <li><em>r2</em> - radius from the end position to the center</li>
</ul>

<h4>5.2. Center Format Examples</h4>

<p>Calculating arcs by hand can be difficult at times. One option is to draw the arc with a cad
program to get the coordinates and offsets. Keep in mind the tolerance mentioned above, you may
have to change the precision of your cad program to get the desired results. Another option is to
calculate the coordinates and offset using formulas. As you can see in the following figures a
triangle can be formed from the current position the end position and the arc center.</p>

<p>In the following figure you can see the start position is X0 Y0, the end position is X1 Y1. The
arc center position is at X1 Y0. This gives us an offset from the start position of 1 in the X axis
and 0 in the Y axis. In this case only an I offset is needed.</p>

<p class="parag">G2 Example Line</p>
<pre><code class="language-gcode">G0 X0 Y0
G2 X1 Y1 I1 F10 (clockwise arc in the XY plane)</code></pre>
<img src="cnc-doc/images/20_GcodeReference/G2-example1.svg"></img> 

<p>Figure 1. G2 Example</p>

<p>In the next example we see the difference between the offsets for Y if we are doing a
<em>G2</em> or a G3 move. For the <em>G2</em> move the start position is X0 Y0, for the <em>G3</em>
move it is X0 Y1. The arc center is at X1 Y0.5 for both moves. The <em>G2</em> move the J offset is
0.5 and the <em>G3</em> move the J offset is -0.5.</p>
<img src="cnc-doc/images/20_GcodeReference/G2-G3-example1.svg"></img> 

<p>Figure 2. G2-G3 Example Line</p>
<pre><code class="language-gcode">G0 X0 Y0
G2 X0 Y1 I1 J0.5 F25 (clockwise arc in the XY plane)
G3 X0 Y0 I1 J-0.5 F25 (counterclockwise arc in the XY plane)</code></pre>

<p>In the next example we show how the arc can make a helix in the Z axis by adding the Z word.</p>

<p class="parag">G2 Example Helix</p>
<pre><code class="language-gcode">G0 X0 Y0 Z0
G17 G2 X10 Y16 I3 J4 Z-1 (helix arc with Z added)</code></pre>

<p>In the next example we show how to make more than one turn using the P word.</p>

<p class="parag">P word Example</p>
<pre><code class="language-gcode">G0 X0 Y0 Z0
G2 X0 Y1 Z-1 I1 J0.5 P2 F25</code></pre>

<p>In the center format, the radius of the arc is not specified, but it may be found easily as the
distance from the center of the circle to either the current point or the end point of the arc.</p>

<h4>5.3. Radius Format Arcs</h4>
<pre><code class="language-gcode">G2 or G3 axes R- &lt;P-&gt;</code></pre>
<ul>
  <li><em>R</em> - radius from current position</li>
</ul>

<p>It is not good practice to program radius format arcs that are nearly full circles or nearly
semicircles because a small change in the location of the end point will produce a much larger
change in the location of the center of the circle (and, hence, the middle of the arc). The
magnification effect is large enough that rounding error in a number can produce out-of-tolerance
cuts. For instance, a 1% displacement of the endpoint of a 180 degree arc produced a 7%
displacement of the point 90 degrees along the arc. Nearly full circles are even worse. Other size
arcs (in the range tiny to 165 degrees or 195 to 345 degrees) are OK.</p>

<p>In the radius format, the coordinates of the end point of the arc in the selected plane are
specified along with the radius of the arc. Program <em>G2</em> axes R- (or use <em>G3</em> instead
of <em>G2</em> ). R is the radius. The axis words are all optional except that at least one of the
two words for the axes in the selected plane must be used. The R number is the radius. A positive
radius indicates that the arc turns through less than 180 degrees, while a negative radius
indicates a turn of more than 180 degrees. If the arc is helical, the value of the end point of the
arc on the coordinate axis parallel to the axis of the helix is also specified.</p>

<p>It is an error if:</p>
<ul>
  <li>both of the axis words for the axes of the selected plane are omitted</li>
  <li>the end point of the arc is the same as the current point.</li>
</ul>

<p class="parag">G2 Example Line</p>
<pre><code class="language-gcode">G17 G2 X10 Y15 R20 Z5 (radius format with arc)</code></pre>

<p>The above example makes a clockwise (as viewed from the positive Z-axis) circular or helical arc
whose axis is parallel to the Z-axis, ending where X=10, Y=15, and Z=5, with a radius of 20. If the
starting value of Z is 5, this is an arc of a circle parallel to the XY-plane; otherwise it is a
helical arc.</p>

<h3 id="gcode:g4">G4 Dwell</h3>
<pre><code class="language-gcode">G4 P-</code></pre>
<ul>
  <li><em>P</em> - seconds to dwell (floating point)</li>
</ul>

<p>The P number is the time in seconds that all axes will remain unmoving. The P number is a
floating point number so fractions of a second may be used. <em>G4</em> does not affect spindle,
coolant and any I/O.</p>

<p class="parag">G4 Example Line</p>
<pre><code class="language-gcode">G4 P0.5 (wait for 0.5 seconds before proceeding)</code></pre>

<p>It is an error if:</p>
<ul>
  <li>the P number is negative or not specified.</li>
</ul>

<h3 id="gcode:g5">G5 Cubic Spline</h3>
<pre><code class="language-gcode">G5 X- Y- &lt;I- J-&gt; P- Q-</code></pre>
<ul>
  <li><em>I</em> - X incremental offset from start point to first control point</li>
  <li><em>J</em> - Y incremental offset from start point to first control point</li>
  <li><em>P</em> - X incremental offset from end point to second control point</li>
  <li><em>Q</em> - Y incremental offset from end point to second control point</li>
</ul>

<p>G5 creates a cubic B-spline in the XY plane with the X and Y axes only. P and Q must both be
specified for every <em>G5</em> command.</p>

<p>For the first <em>G5</em> command in a series of <em>G5</em> commands, I and J must both be
specified. For subsequent <em>G5</em> commands, either both I and J must be specified, or neither.
If I and J are unspecified, the starting direction of this cubic will automatically match the
ending direction of the previous cubic (as if I and J are the negation of the previous P and Q).</p>

<p>For example, to program a curvy N shape:</p>

<p class="parag">G5 Sample initial cubic spline</p>
<pre><code class="language-gcode">G90 G17
G0 X0 Y0
G5 I0 J3 P0 Q-3 X1 Y1</code></pre>

<p>A second curvy N that attaches smoothly to this one can now be made without specifying I and
J:</p>

<p class="parag">G5 Sample subsequent cubic spline</p>
<pre><code class="language-gcode">G5 P0 Q-3 X2 Y2</code></pre>

<p>It is an error if:</p>
<ul>
  <li>P and Q are not both specified</li>
  <li>Just one of I or J are specified</li>
  <li>I or J are unspecified in the first of a series of <em>G5</em> commands</li>
  <li>An axis other than X or Y is specified</li>
  <li>The active plane is not G17</li>
</ul>

<h3 id="gcode:g5.1">G5.1 Quadratic Spline</h3>
<pre><code class="language-gcode">G5.1 X- Y- I- J-</code></pre>
<ul>
  <li><em>I</em> - X incremental offset from start point to control point</li>
  <li><em>J</em> - Y incremental offset from start point to control point</li>
</ul>

<p>G5.1 creates a quadratic B-spline in the XY plane with the X and Y axis only. Not specifying I
or J gives zero offset for the unspecified axis, so one or both must be given.</p>

<p>For example, to program a parabola, through the origin, from X-2 Y4 to X2 Y4:</p>

<p class="parag">G5.1 Sample quadratic spline</p>
<pre><code class="language-gcode">G90 G17
G0 X-2 Y4
G5.1 X2 I2 J-8</code></pre>

<p>It is an error if:</p>
<ul>
  <li>both I and J offset are unspecified or zero</li>
  <li>An axis other than X or Y is specified</li>
  <li>The active plane is not G17</li>
</ul>

<h3 id="gcode:g5.2-g5.3">G5.2 G5.3 NURBS Block</h3>
<pre><code class="language-gcode">G5.2 &lt;P-&gt; &lt;X- Y-&gt; &lt;L-&gt;
X- Y- &lt;P-&gt;
 ...
G5.3</code></pre>

<div class="warning">
<strong>Warning: </strong><em>G5.2</em>, <em>G5.3</em> is experimental and not fully tested.</div>

<p>G5.2 is for opening the data block defining a NURBS and <em>G5.3</em> for closing the data
block. In the lines between these two codes the curve control points are defined with both their
related weights (P) and the parameter (L) which determines the order of the curve.</p>

<p>The current coordinate, before the first <em>G5.2</em> command, is always taken as the first
NURBS control point. To set the weight for this first control point, first program G5.2 P- without
giving any X Y.</p>

<p>The default weight if P is unspecified is 1. The default order if L is unspecified is 3.</p>

<p class="parag">G5.2 Example</p>
<pre><code class="language-gcode">G0 X0 Y0 (rapid move)
F10 (set feed rate)
G5.2 P1 L3
X0 Y1 P1
X2 Y2 P1
X2 Y0 P1
X0 Y0 P2
G5.3
; The rapid moves show the same path without the NURBS Block
G0 X0 Y1
X2 Y2
X2 Y0
X0 Y0
M2</code></pre>

<p>Sample NURBS Output</p>
<img src="cnc-doc/images/20_GcodeReference/G5.2-example1.png" width="335"> 

<p>More information on NURBS can be found here: <a
href="http://wiki.linuxcnc.org/cgi-bin/wiki.pl?NURBS">http://wiki.linuxcnc.org/cgi-bin/wiki.pl?NURBS</a>
</p>

<h3 id="gcode:g7">G7 Lathe Diameter Mode</h3>
<pre><code class="language-gcode">G7</code></pre>

<p>Program <em>G7</em> to enter the diameter mode for axis X on a lathe. When in the diameter mode
the X axis moves on a lathe will be 1/2 the distance to the center of the lathe. For example X1
would move the cutter to 0.500” from the center of the lathe thus giving a 1” diameter part.</p>

<h3 id="gcode:g8">G8 Lathe Radius Mode</h3>
<pre><code class="language-gcode">G8</code></pre>

<p>Program <em>G8</em> to enter the radius mode for axis X on a lathe. When in Radius mode the X
axis moves on a lathe will be the distance from the center. Thus a cut at X1 would result in a part
that is 2" in diameter. <em>G8</em> is default at power up.</p>

<h3 id="gcode:g10-L0">G10 L0 Reload Tool Table Data</h3>
<pre><code class="language-gcode">G10 L0</code></pre>

<p>G10 L0 reload all tool table data. Requires that there is no current tool loaded in spindle.</p>

<div class="info">
<strong>Note: </strong> When using G10 L0, tool parameters (#5401-#5413) will be updated
immediately and any altered tool diameters will be used for subsequent G41,42 cutter radius
compensation commands. Existing G43 tool length compensation values will remain in effect until
updated by new G43 commands.</div>

<h3 id="gcode:g10-L1">G10 L1 Set Tool Table</h3>
<pre><code class="language-gcode">G10 L1 P- axes &lt;R- I- J- Q-&gt;</code></pre>
<ul>
  <li><em>P</em> - tool number</li>
  <li><em>R</em> - radius of tool</li>
  <li><em>I</em> - front angle (lathe)</li>
  <li><em>J</em> - back angle (lathe)</li>
  <li><em>Q</em> - orientation (lathe)</li>
</ul>

<p>G10 L1 sets the tool table for the P tool number to the values of the words.</p>

<p>A valid <em>G10</em> L1 rewrites and reloads the tool table.</p>

<p class="parag">G10 L1 Example Line</p>
<pre><code class="language-gcode">G10 L1 P1 Z1.5 (set tool 1 Z offset from the machine origin to 1.5)
G10 L1 P2 R0.015 Q3 (lathe example setting tool 2 radius to 0.015 and
orientation to 3)</code></pre>

<p>It is an error if:</p>
<ul>
  <li>Cutter Compensation is on</li>
  <li>The P number is unspecified</li>
  <li>The P number is not a valid tool number from the tool table</li>
  <li>The P number is 0</li>
</ul>

<p>For more information on cutter orientation used by the Q word, see the Lathe Tool Orientation
diagram.</p>

<h3 id="gcode:g10-L2">G10 L2 Set Coordinate System</h3>
<pre><code class="language-gcode">G10 L2 P- &lt;axes R-&gt;</code></pre>
<ul>
  <li><em>P</em> - coordinate system (0-9)</li>
  <li><em>R</em> - rotation about the Z axis</li>
</ul>

<p>G10 L2 offsets the origin of the axes in the coordinate system specified to the value of the
axis word. The offset is from the machine origin established during homing. The offset value will
replace any current offsets in effect for the coordinate system specified. Axis words not used will
not be changed.</p>

<p>Program P0 to P9 to specify which coordinate system to change.</p>

<p class="parag">Table 1. Coordinate System</p>

<table class="linuxcnc" style="width:500px">
  <tbody class="linuxcnc">
    <tr class="linuxcnc">
      <td style="width:150px">P Value</td>
      <td style="width:200px">Coordinate System</td>
      <td style="width:150px">G code</td>
    </tr>
    <tr class="linuxcnc">
      <td>0</td>
      <td>Active</td>
      <td>n/a</td>
    </tr>
    <tr class="linuxcnc">
      <td>1</td>
      <td>1</td>
      <td class="td_linuxcnc">G54</td>
    </tr>
    <tr class="linuxcnc">
      <td>2</td>
      <td>2</td>
      <td>G55</td>
    </tr>
    <tr class="linuxcnc">
      <td>3</td>
      <td>3</td>
      <td>G56</td>
    </tr>
    <tr class="linuxcnc">
      <td>4</td>
      <td>4</td>
      <td>G57</td>
    </tr>
    <tr class="linuxcnc">
      <td>5</td>
      <td>5</td>
      <td>G58</td>
    </tr>
    <tr class="linuxcnc">
      <td>6</td>
      <td>6</td>
      <td>G59</td>
    </tr>
    <tr class="linuxcnc">
      <td>7</td>
      <td>7</td>
      <td>G59.1</td>
    </tr>
    <tr class="linuxcnc">
      <td>8</td>
      <td>8</td>
      <td>G59.2</td>
    </tr>
    <tr class="linuxcnc">
      <td>9</td>
      <td>9</td>
      <td>G59.3</td>
    </tr>
  </tbody>
</table>

<p>Optionally program R to indicate the rotation of the XY axis around the Z axis. The direction of
rotation is CCW as viewed from the positive end of the Z axis.</p>

<p>All axis words are optional.</p>

<p>Being in incremental distance mode (<em>G91</em>) has no effect on <em>G10 L2</em>.</p>

<p>Important Concepts:</p>
<ul>
  <li>G10 L2 Pn does not change from the current coordinate system to the one specified by P, you
    have to use G54-59.3 to select a coordinate system.</li>
  <li>When a rotation is in effect jogging an axis will only move that axis in a positive or
    negative direction and not along the rotated axis.</li>
  <li>If a <em>G52</em> local offset or <em>G92</em> origin offset was in effect before
    <em>G10</em> L2, it will continue to be in effect afterwards.</li>
  <li>When programming a coordinate system with R, any <em>G52</em> or <em>G92</em> will be applied
    after the rotation.</li>
  <li>The coordinate system whose origin is set by a <em>G10</em> command may be active or inactive
    at the time the <em>G10</em> is executed. If it is currently active, the new coordinates take
    effect immediately.</li>
</ul>

<p>It is an error if:</p>
<ul>
  <li>The P number does not evaluate to an integer in the range 0 to 9.</li>
  <li>An axis is programmed that is not defined in the configuration.</li>
</ul>

<p class="parag">G10 L2 Example Line</p>
<pre><code class="language-gcode">G10 L2 P1 X3.5 Y17.2</code></pre>

<p>In the above example the origin of the first coordinate system (the one selected by G54) is set
to be X=3.5 and Y=17.2. Because only X and Y are specified, the origin point is only moved in X and
Y; the other coordinates are not changed.</p>

<p class="parag">G10 L2 Example Line</p>
<pre><code class="language-gcode">G10 L2 P1 X0 Y0 Z0 (clear offsets for X,Y &amp; Z axes in coordinate system
1)</code></pre>

<p>The above example sets the XYZ coordinates of the coordinate system 1 to the machine origin.</p>

<p>The coordinate system is described in the Coordinate System section.</p>

<h3 id="gcode:g10-L10">G10 L10 Set Tool Table</h3>
<pre><code class="language-gcode">G10 L10 P- axes &lt;R- I- J- Q-&gt;</code></pre>
<ul>
  <li><em>P</em> - tool number</li>
  <li><em>R</em> - radius of tool</li>
  <li><em>I</em> - front angle (lathe)</li>
  <li><em>J</em> - back angle (lathe)</li>
  <li><em>Q</em> - orientation (lathe)</li>
</ul>

<p>G10 L10 changes the tool table entry for tool P so that if the tool offset is reloaded, with the
machine in its current position and with the current G5x and G52/G92 offsets active, the current
coordinates for the given axes will become the given values. The axes that are not specified in the
G10 L10 command will not be changed. This could be useful with a probe move as described in the G38
section.</p>

<p class="parag">G10 L10 Example</p>
<pre><code class="language-gcode">T1 M6 G43 (load tool 1 and tool length offsets)
G10 L10 P1 Z1.5 (set the current position for Z to be 1.5)
G43 (reload the tool length offsets from the changed tool table)
M2 (end program)</code></pre>

<p>See <em>T</em> &amp; <em>M6</em>, and <em>G43</em>/<em>G43.1</em> sections for more
information.</p>

<p>It is an error if:</p>
<ul>
  <li>Cutter Compensation is on</li>
  <li>The P number is unspecified</li>
  <li>The P number is not a valid tool number from the tool table</li>
  <li>The P number is 0</li>
</ul>

<h3 id="gcode:g10-L11">G10 L11 Set Tool Table</h3>
<pre><code class="language-gcode">G10 L11 P- axes &lt;R- I- J- Q-&gt;</code></pre>
<ul>
  <li><em>P</em> - tool number</li>
  <li><em>R</em> - radius of tool</li>
  <li><em>I</em> - front angle (lathe)</li>
  <li><em>J</em> - back angle (lathe)</li>
  <li><em>Q</em> - orientation (lathe)</li>
</ul>

<p>G10 L11 is just like <em>G10</em> L10 except that instead of setting the entry according to the
current offsets, it is set so that the current coordinates would become the given value if the new
tool offset is reloaded and the machine is placed in the <em>G59.3</em> coordinate system without
any G52/G92 offset active.</p>

<p>This allows the user to set the <em>G59.3</em> coordinate system according to a fixed point on
the machine, and then use that fixture to measure tools without regard to other currently-active
offsets.</p>

<p>It is an error if:</p>
<ul>
  <li>Cutter Compensation is on</li>
  <li>The P number is unspecified</li>
  <li>The P number is not a valid tool number from the tool table</li>
  <li>The P number is 0</li>
</ul>

<h3 id="gcode:g10-L20">G10 L20 Set Coordinate System</h3>
<pre><code class="language-gcode">G10 L20 P- axes</code></pre>

<p></p>
<ul>
  <li><em>P</em> - coordinate system (0-9)</li>
</ul>

<p>G10 L20 is similar to <em>G10</em> L2 except that instead of setting the offset/entry to the
given value, it is set to a calculated value that makes the current coordinates become the given
value.</p>

<p class="parag">G10 L20 Example Line</p>
<pre><code class="language-gcode">G10 L20 P1 X1.5 (set the X axis current location in coordinate system 1 to 1.5)</code></pre>

<p>It is an error if:</p>
<ul>
  <li>The P number does not evaluate to an integer in the range 0 to 9.</li>
  <li>An axis is programmed that is not defined in the configuration.</li>
</ul>

<h3 id="gcode:g17">G17 - G19.1 Plane Select</h3>

<p>These codes set the current plane as follows:</p>
<ul>
  <li><em>G17</em> - XY (default)</li>
  <li><em>G18</em> - ZX</li>
  <li><em>G19</em> - YZ</li>
  <li><em>G17.1</em> - UV</li>
  <li><em>G18.1</em> - WU</li>
  <li><em>G19.1</em> - VW</li>
</ul>

<p>The UV, WU and VW planes do not support arcs.</p>

<p>It is a good idea to include a plane selection in the preamble of each G code file.</p>

<p>The effects of having a plane selected are discussed in Section <em>G2</em> <em>G3</em> Arcs and
Section G81 G89</p>

<h3 id="gcode:g20">G20, G21 Units</h3>
<ul>
  <li><em>G20</em> - to use inches for length units.</li>
  <li><em>G21</em> - to use millimeters for length units.</li>
</ul>

<p>It is a good idea to include units in the preamble of each G code file.</p>

<h3 id="gcode:g28">G28, G28.1 Go/Set Predefined Position</h3>

<div class="warning">
<strong>Warning: </strong> Only use <em>G28</em> when your machine is homed to a repeatable
position and the desired <em>G28</em> position has been stored with <em>G28.1</em>.</div>

<p>G28 uses the values stored in parameters 5161-5169 as the X Y Z A B C U V W final point to move
to. The parameter values are absolute machine coordinates in the native machine units as specified
in the ini file. All axes defined in the ini file will be moved when a <em>G28</em> is issued. If
no positions are stored with <em>G28.1</em> then all axes will go to the machine origin.</p>
<ul>
  <li><em>G28</em> - makes a rapid move from the current position to the absolute position of the
    values in parameters 5161-5166.</li>
  <li><em>G28 axes</em> - makes a rapid move to the position specified by axes including any
    offsets, then will make a rapid move to the absolute position of the values in parameters
    5161-5166 for all axes specified. Any axis not specified will not move.</li>
  <li><em>G28.1</em> - stores the current absolute position into parameters 5161-5166.</li>
</ul>

<p class="parag">G28 Example Line</p>
<pre><code class="language-gcode">G28 Z2.5 (rapid to Z2.5 then to Z location specified in #5163)</code></pre>

<p>It is an error if :</p>
<ul>
  <li>Cutter Compensation is turned on<!--öli--></li>
</ul>

<h3 id="gcode:g30">G30, G30.1 Go/Set Predefined Position</h3>

<div class="warning">
<strong>Warning: </strong> Only use <em>G30</em> when your machine is homed to a repeatable
position and the desired <em>G30</em> position has been stored with <em>G30.1</em>.</div>

<p>G30 functions the same as <em>G28</em> but uses the values stored in parameters 5181-5189 as the
X Y Z A B C U V W final point to move to. The parameter values are absolute machine coordinates in
the native machine units as specified in the ini file. All axes defined in the ini file will be
moved when a <em>G30</em> is issued. If no positions are stored with <em>G30.1</em> then all axes
will go to the machine origin.</p>

<div class="info">
<strong>Note: </strong> <em>G30</em> parameters will be used to move the tool when a <em>M6</em>.
is programmed if TOOL_CHANGE_AT_G30=1 is in the [EMCIO] section of the ini file.</div>
<ul>
  <li><em>G30</em> - makes a rapid move from the current position to the absolute position of the
    values in parameters 5181-5189.</li>
  <li><em>G30 axes</em> - makes a rapid move to the position specified by axes including any
    offsets, then will make a rapid move to the absolute position of the values in parameters
    5181-5189 for all axes specified. Any axis not specified will not move.</li>
  <li><em>G30.1</em> - stores the current absolute position into parameters 5181-5186.</li>
</ul>

<p class="parag">G30 Example Line</p>
<pre><code class="language-gcode">G30 Z2.5 (rapid to Z2.5 then to the Z location specified in #5i83)</code></pre>

<p>It is an error if :</p>
<ul>
  <li>Cutter Compensation is turned on</li>
</ul>

<h3 id="gcode:g33">G33 Spindle Synchronized Motion</h3>
<pre><code class="language-gcode">G33 X- Y- Z- K- $-</code></pre>
<ul>
  <li><em>K</em> - distance per revolution</li>
</ul>

<p>For spindle-synchronized motion in one direction, code G33 X- Y- Z- K- where K gives the
distance moved in XYZ for each revolution of the spindle. For instance, if starting at Z=0, G33 Z-1
K.0625 produces a 1 inch motion in Z over 16 revolutions of the spindle. This command might be part
of a program to produce a 16TPI thread. Another example in metric, G33 Z-15 K1.5 produces a
movement of 15mm while the spindle rotates 10 times for a thread of 1.5mm.</p>

<p>The (optional) $ argument sets which spindle the motion is synchronised to (default is zero).
For example G33 Z10 K1 $1 will move the spindle in synchrony with the spindle.N.revs HAL pin
value.</p>

<p>Spindle-synchronized motion waits for the spindle index and spindle at speed pins, so multiple
passes line up. <em>G33</em> moves end at the programmed endpoint. <em>G33</em> could be used to
cut tapered threads or a fusee.</p>

<p>All the axis words are optional, except that at least one must be used.</p>

<div class="info">
<strong>Note: </strong> K follows the drive line described by X- Y- Z-. K is not parallel to the Z
axis if X or Y endpoints are used for example when cutting tapered threads.</div>

<p class="parag">Technical Info</p>

<p>At the beginning of each <em>G33</em> pass, LinuxCNC uses the spindle speed and the machine
acceleration limits to calculate how long it will take Z to accelerate after the index pulse, and
determines how many degrees the spindle will rotate during that time. It then adds that angle to
the index position and computes the Z position using the corrected spindle angle. That means that Z
will reach the correct position just as it finishes accelerating to the proper speed, and can
immediately begin cutting a good thread.</p>

<p class="parag">HAL Connections</p>

<p>The pin spindle.N.at-speed must be set or driven true for the motion to start. Additionally
spindle.N.revs must increase by 1 for each revolution of the spindle and the spindle.N.index-enable
pin must be connected to an encoder (or resolver) counter which resets index-enable once per
rev.</p>

<p>See the Integrators Manual for more information on spindle synchronized motion.</p>

<p class="parag">G33 Example</p>
<pre><code class="language-gcode">G90 (absolute distance mode)
G0 X1 Z0.1 (rapid to position)
S100 M3 (start spindle turning)
G33 Z-2 K0.125 (move Z axis to -2 at a rate to equal 0.125 per revolution)
G0 X1.25 (rapid move tool away from work)
Z0.1 (rapid move to starting Z position)
M2 (end program)</code></pre>
<ul>
  <li>See <em>G90</em> &amp; <em>G0</em> &amp; <em>M2</em>. sections for more information.</li>
</ul>

<p>It is an error if:</p>
<ul>
  <li>All axis words are omitted.</li>
  <li>The spindle is not turning when this command is executed</li>
  <li>The requested linear motion exceeds machine velocity limits due to the spindle speed</li>
</ul>

<h3 id="gcode:g33.1">G33.1 Rigid Tapping</h3>
<pre><code class="language-gcode">G33.1 X- Y- Z- K- I- $-</code></pre>
<ul>
  <li><em>K</em> - distance per revolution</li>
  <li><em>I</em> - optional spindle speed multiplier for faster return move</li>
  <li><em>$</em> - optional spindle selector</li>
</ul>

<div class="warning">
<strong>Warning: </strong> For Z only tapping preposition the XY location prior to calling
<em>G33.1</em> and only use a Z word in the <em>G33.1</em>. If the coordinates specified are not
the current coordinates when calling <em>G33.1</em> for tapping the move will not be along the Z
axis but will be a coordinated, spindle-synchronized move from the current location to the location
specified and back.</div>

<p>For rigid tapping (spindle synchronized motion with return), code G33.1 X- Y- Z- K- where K-
gives the distance moved for each revolution of the spindle.</p>

<p>A rigid tapping move consists of the following sequence:</p>
<ul>
  <li>A move from the current coordinate to the specified coordinate, synchronized with the
    selected spindle at the given ratio and starting from the current coordinate with a spindle
    index pulse.</li>
  <li>When reaching the endpoint, a command to reverse the spindle, and speed up by a factor set by
    the multiplier (e.g., from clockwise to counterclockwise).</li>
  <li>Continued synchronized motion beyond the specified end coordinate until the spindle actually
    stops and reverses.</li>
  <li>Continued synchronized motion back to the original coordinate.</li>
  <li>When reaching the original coordinate, a command to reverse the spindle a second time (e.g.,
    from counterclockwise to clockwise).</li>
  <li>Continued synchronized motion beyond the original coordinate until the spindle actually stops
    and reverses.</li>
  <li>An unsynchronized move back to the original coordinate.</li>
</ul>

<p>Spindle-synchronized motions wait for spindle index, so multiple passes line up <em>G33.1</em>
moves end at the original coordinate.</p>

<p>All the axis words are optional, except that at least one must be used.</p>

<p class="parag">G33.1 Example</p>
<pre><code class="language-gcode">G90 (set absolute mode)
G0 X1.000 Y1.000 Z0.100 (rapid move to starting position)
S100 M3 (turn on the spindle, 100 RPM)
G33.1 Z-0.750 K0.05 (rigid tap a 20 TPI thread 0.750 deep)
M2 (end program)</code></pre>

<p>See <em>G90</em> &amp; <em>G0</em> &amp; <em>M2</em>. sections for more information.</p>

<p>It is an error if:</p>
<ul>
  <li>All axis words are omitted.</li>
  <li>The spindle is not turning when this command is executed</li>
  <li>The requested linear motion exceeds machine velocity limits due to the spindle speed</li>
</ul>

<h3 id="gcode:g38.n">G38.n Straight Probe</h3>
<pre><code class="language-gcode">G38.n axes</code></pre>
<ul>
  <li><em>G38.2</em> - probe toward workpiece, stop on contact, signal error if failure</li>
  <li><em>G38.3</em> - probe toward workpiece, stop on contact</li>
  <li><em>G38.4</em> - probe away from workpiece, stop on loss of contact, signal error if
  failure</li>
  <li><em>G38.5</em> - probe away from workpiece, stop on loss of contact</li>
</ul>

<div class="danger">
<strong>Important: </strong> You will not be able to use a probe move until your machine has been
set up to provide a probe input signal. The probe input signal must be connected to
motion.probe-input in a .hal file. G38.n uses motion.probe-input to determine when the probe has
made (or lost) contact. TRUE for probe contact closed (touching), FALSE for probe contact
open.</div>

<p>Program G38.n axes to perform a straight probe operation. The axis words are optional, except
that at least one of them must be used. The axis words together define the destination point that
the probe will move towards, starting from the current location. If the probe is not tripped before
the destination is reached <em>G38.2</em> and <em>G38.4</em> will signal an error.</p>

<p>The tool in the spindle must be a probe or contact a probe switch.</p>

<p>In response to this command, the machine moves the controlled point (which should be at the
center of the probe ball) in a straight line at the current feed rate toward the programmed point.
In inverse time feed mode, the feed rate is such that the whole motion from the current point to
the programmed point would take the specified time. The move stops (within machine acceleration
limits) when the programmed point is reached, or when the requested change in the probe input takes
place, whichever occurs first.</p>

<table class="tableblock" rules="all" width="90%" frame="border" cellspacing="0" cellpadding="4">
  <caption class="title">Table 2. Probing G-Codes</caption>
  <colgroup><col width="25%">
    <col width="25%">
    <col width="25%">
    <col width="25%">
  </colgroup>
  <thead>
    <tr class="linuxcnc">
      <th align="left" valign="top">Code </th>
      <th align="left" valign="top">Target State </th>
      <th align="left" valign="top">Move orientation </th>
      <th align="left" valign="top">Error Signal</th>
    </tr>
  </thead>
  <tbody>
    <tr class="linuxcnc">
      <td align="left" valign="top"><p class="table">G38.2</p>
      </td>
      <td align="left" valign="top"><p class="table">Touched</p>
      </td>
      <td align="left" valign="top"><p class="table">Toward piece</p>
      </td>
      <td align="left" valign="top"><p class="table">Yes</p>
      </td>
    </tr>
    <tr class="linuxcnc">
      <td align="left" valign="top"><p class="table">G38.3</p>
      </td>
      <td align="left" valign="top"><p class="table">Touched</p>
      </td>
      <td align="left" valign="top"><p class="table">Toward piece</p>
      </td>
      <td align="left" valign="top"><p class="table">No</p>
      </td>
    </tr>
    <tr class="linuxcnc">
      <td align="left" valign="top"><p class="table">G38.4</p>
      </td>
      <td align="left" valign="top"><p class="table">Untouched</p>
      </td>
      <td align="left" valign="top"><p class="table">From piece</p>
      </td>
      <td align="left" valign="top"><p class="table">Yes</p>
      </td>
    </tr>
    <tr class="linuxcnc">
      <td align="left" valign="top"><p class="table">G38.5</p>
      </td>
      <td align="left" valign="top"><p class="table">Untouched</p>
      </td>
      <td align="left" valign="top"><p class="table">From piece</p>
      </td>
      <td align="left" valign="top"><p class="table">No</p>
      </td>
    </tr>
  </tbody>
</table>

<p>After successful probing, parameters #5061 to #5069 will be set to the X, Y, Z, A, B, C, U, V, W
coordinates of the location of the controlled point at the time the probe changed state (in the
current work coordinate system). After unsuccessful probing, they are set to the coordinates of the
programmed point. Parameter 5070 is set to 1 if the probe succeeded and 0 if the probe failed. If
the probing operation failed, <em>G38.2</em> and <em>G38.4</em> will signal an error by posting an
message on screen if the selected GUI supports that. And by halting program execution.</p>

<p>Here is an example formula to probe tool height with conversion from a local coordinate system Z
offset to machine coordinates which is stored in the tool table. The existing tool height
compensation is first cancelled with G49 to avoid including it in the calculation of height, and
the new height is loaded from the tool table. The start position must be high enough above the tool
height probe to compensate for the use of G49. </p>

<p class="parag">G38.2 Example</p>
<pre><code class="language-gcode">G49
G38.2 Z-100 F100
#<zworkoffset> = [#[5203 + #5220 * 20] + #5213 * #5210]
G10 L1 P#5400 Z#<zworkoffset> (set new tool offset)
G43</code></pre>

<p>A comment of the form (PROBEOPEN filename.txt) will open filename.txt and store the 9-number
coordinate consisting of XYZABCUVW of each successful straight probe in it. The file must be closed
with (PROBECLOSE). For more information see the Comments Section.</p>

<p>An example file smartprobe.ngc is included (in the examples directory) to demonstrate using
probe moves to log to a file the coordinates of a part. The program smartprobe.ngc could be used
with ngcgui with minimal changes.</p>

<p>It is an error if:</p>
<ul>
  <li>the current point is the same as the programmed point.</li>
  <li>no axis word is used</li>
  <li>cutter compensation is enabled</li>
  <li>the feed rate is zero</li>
  <li>the probe is already in the target state</li>
</ul>

<h3 id="gcode:g40">G40 Compensation Off</h3>
<ul>
  <li><em>G40</em> - turn cutter compensation off. If tool compensation was on the next move must
    be a linear move and longer than the tool diameter. It is OK to turn compensation off when it
    is already off.</li>
</ul>

<p class="parag">G40 Example</p>
<pre><code class="language-gcode">; current location is X1 after finishing cutter compensated move
G40 (turn compensation off)
G0 X1.6 (linear move longer than current cutter diameter)
M2 (end program)</code></pre>

<p>See <em>G0</em> &amp; <em>M2</em>. sections for more information.</p>

<p>It is an error if:</p>
<ul>
  <li>A G2/G3 arc move is programmed next after a G40.</li>
  <li>The linear move after turning compensation off is less than the tool diameter.</li>
</ul>

<h3 id="gcode:g41">G41, G42 Cutter Compensation</h3>
<pre><code class="language-gcode">G41 &lt;D-&gt; (left of programmed path)
G42 &lt;D-&gt; (right of programmed path)</code></pre>
<ul>
  <li><em>D</em> - tool number</li>
</ul>

<p>The D word is optional; if there is no D word the radius of the currently loaded tool will be
used (if no tool is loaded and no D word is given, a radius of 0 will be used).</p>

<p>If supplied, the D word is the tool number to use. This would normally be the number of the tool
in the spindle (in which case the D word is redundant and need not be supplied), but it may be any
valid tool number.</p>

<div class="info">
<strong>Note: </strong> <em>G41/G42 D0</em> is a little special. Its behavior is different on
random tool changer machines and nonrandom tool changer machines (see the Tool Change section). On
nonrandom tool changer machines, G41/G42 D0 applies the TLO of the tool currently in the spindle,
or a TLO of 0 if no tool is in the spindle. On random tool changer machines, <em>G41/G42 D0</em>
applies the TLO of the tool T0 defined in the tool table file (or causes an error if T0 is not
defined in the tool table).</div>

<p>To start cutter compensation to the left of the part profile, use <em>G41</em>. <em>G41</em>
starts cutter compensation to the left of the programmed line as viewed from the positive end of
the axis perpendicular to the plane.</p>

<p>To start cutter compensation to the right of the part profile, use <em>G42</em>. <em>G42</em>
starts cutter compensation to the right of the programmed line as viewed from the positive end of
the axis perpendicular to the plane.</p>

<p>The lead in move must be at least as long as the tool radius. The lead in move can be a rapid
move.</p>

<p>Cutter compensation may be performed if the XY-plane or XZ-plane is active.</p>

<p>User M100-M199 commands are allowed when Cutter Compensation is on.</p>

<p>The behavior of the machining center when cutter compensation is on is described in the Cutter
Compensation Section along with code examples.</p>

<p>It is an error if:</p>
<ul>
  <li>The D number is not a valid tool number or 0.</li>
  <li>The YZ plane is active.</li>
  <li>Cutter compensation is commanded to turn on when it is already on.</li>
</ul>

<h3 id="gcode:g41.1">G41.1, G42.1 Dynamic Cutter Compensation</h3>
<pre><code class="language-gcode">G41.1 D- &lt;L-&gt; (left of programmed path)
G42.1 D- &lt;L-&gt; (right of programmed path)</code></pre>
<ul>
  <li><em>D</em> - cutter diameter</li>
  <li><em>L</em> - tool orientation (see lathe tool orientation)</li>
</ul>

<p><em>G41.1</em> &amp; <em>G42.1</em> function the same as <em>G41</em> &amp; <em>G42</em> with
the added scope of being able to program the tool diameter. The L word defaults to 0 if
unspecified.</p>

<p>It is an error if:</p>
<ul>
  <li>The YZ plane is active.</li>
  <li>The L number is not in the range from 0 to 9 inclusive.</li>
  <li>The L number is used when the XZ plane is not active.</li>
  <li>Cutter compensation is commanded to turn on when it is already on.</li>
</ul>

<h3 id="gcode:g43">G43 Tool Length Offset</h3>
<pre><code class="language-gcode">G43 &lt;H-&gt;</code></pre>
<ul>
  <li><em>H</em> - tool number (optional)</li>
</ul>

<p>G43 enables tool length compensation. <em>G43</em> changes subsequent motions by offsetting the
axis coordinates by the length of the offset. <em>G43</em> does not cause any motion. The next time
a compensated axis is moved, that axis’s endpoint is the compensated location.</p>

<p>G43 without an H word uses the currently loaded tool from the last Tn M6.</p>

<p>G43 Hn uses the offset for tool n.</p>

<div class="info">
<strong>Note: </strong> G43 H0 is a little special. Its behavior is different on random tool
changer machines and nonrandom tool changer machines (see the Tool Changers section). On nonrandom
tool changer machines, G43 H0 applies the TLO of the tool currently in the spindle, or a TLO of 0
if no tool is in the spindle. On random tool changer machines, G43 H0 applies the TLO of the tool
T0 defined in the tool table file (or causes an error if T0 is not defined in the tool table).</div>

<p class="parag">G43 H- Example Line</p>
<pre><code class="language-gcode">G43 H1 (set tool offsets using the values from tool 1 in the tool table)</code></pre>

<p>It is an error if:</p>
<ul>
  <li>the H number is not an integer, or</li>
  <li>the H number is negative, or</li>
  <li>the H number is not a valid tool number (though note that 0 is a valid tool number on
    nonrandom tool changer machines, it means "the tool currently in the spindle")</li>
</ul>

<h3 id="gcode:g43.1">G43.1 Dynamic Tool Length Offset</h3>
<pre><code class="language-gcode">G43.1 axes</code></pre>
<ul>
  <li>G43.1 axes - change subsequent motions by replacing the current offset(s) of axes.
    <em>G43.1</em> does not cause any motion. The next time a compensated axis is moved, that
    axis’s endpoint is the compensated location.</li>
</ul>

<p class="parag">G43.1 Example</p>
<pre><code class="language-gcode">G90 (set absolute mode)
T1 M6 G43 (load tool 1 and tool length offsets, Z is at machine 0 and DRO shows Z1.500)
G43.1 Z0.250 (offset current tool offset by 0.250, DRO now shows Z1.250)
M2 (end program)</code></pre>

<p>See <em>G90</em> &amp; <em>T</em> &amp; <em>M6</em>. sections for more information.</p>

<p>It is an error if:</p>
<ul>
  <li>motion is commanded on the same line as <em>G43.1</em></li>
</ul>

<div class="info">
<strong>Note: </strong> <em>G43.1</em> does not write to the tool table.</div>

<h3 id="gcode:g43.2">G43.2 Apply additional Tool Length Offset</h3>
<pre><code class="language-gcode">G43.2 H- axes-</code></pre>
<ul>
  <li><em>H</em> - tool number</li>
  <li><em>G43.2</em> - applies an additional simultaneous tool offset.</li>
</ul>

<p class="parag">G43.2 Example</p>
<pre><code class="language-gcode">G90 (set absolute mode)
T1 M6 (load tool 1)
G43 (or G43 H1 - replace all tool offsets with T1's offset)
G43.2 H10 (also add in T10's tool offset)
M2 (end program)</code></pre>

<p>You can sum together an arbitrary number of offsets by calling <em>G43.2</em> more times. There
are no built-in assumptions about which numbers are geometry offsets and which are wear offsets, or
that you should have only one of each.</p>

<p>Like the other <em>G43</em> commands, <em>G43.2</em> does not cause any motion. The next time a
compensated axis is moved, that axis’s endpoint is the compensated location.</p>

<p>It is an error if:</p>
<ul>
  <li>H is unspecified and no axis offsets are specified.</li>
  <li>H is specified and the given tool number does not exist in the tool table.</li>
  <li>H is specified and axes are also specified.</li>
</ul>

<div class="info">
<strong>Note: </strong> <em>G43.2</em> does not write to the tool table.</div>

<h3 id="gcode:g49">G49 Cancel Tool Length Compensation</h3>
<ul>
  <li><em>G49</em> - cancels tool length compensation</li>
</ul>

<p>It is OK to program using the same offset already in use. It is also OK to program using no tool
length offset if none is currently being used.</p>

<h3 id="gcode:g52">G52 Local Coordinate System Offset</h3>
<pre><code class="language-gcode">G53 axes</code></pre>

<p>G52 is used in a part program as a temporary "local coordinate system offset" within the
workpiece coordinate system. More information on <em>G52</em> is in the Local and Global Offsets
section.</p>

<h3 id="gcode:g53">G53 Move in Machine Coordinates</h3>
<pre><code class="language-gcode">G53 axes</code></pre>

<p>To move in the machine coordinate system, program <em>G53</em> on the same line as a linear
move. <em>G53</em> is not modal and must be programmed on each line. <em>G0</em> or <em>G1</em>
does not have to be programmed on the same line if one is currently active.</p>

<p>For example <em>G53</em> <em>G0</em> X0 Y0 Z0 will move the axes to the home position even if
the currently selected coordinate system has offsets in effect.</p>

<p class="parag">G53 Example</p>
<pre><code class="language-gcode">G53 G0 X0 Y0 Z0 (rapid linear move to the machine origin)
G53 X2 (rapid linear move to absolute coordinate X2)
See <em>G0</em> section for more information.</code></pre>

<p>It is an error if:</p>
<ul>
  <li>G53 is used without <em>G0</em> or <em>G1</em> being active,</li>
  <li>or <em>G53</em> is used while cutter compensation is on.</li>
</ul>

<h3 id="gcode:g54">G54-G59.3 Select Coordinate System</h3>
<ul>
  <li><em>G54</em> - select coordinate system 1</li>
  <li><em>G55</em> - select coordinate system 2</li>
  <li><em>G56</em> - select coordinate system 3</li>
  <li><em>G57</em> - select coordinate system 4</li>
  <li><em>G58</em> - select coordinate system 5</li>
  <li><em>G59</em> - select coordinate system 6</li>
  <li><em>G59.1</em> - select coordinate system 7</li>
  <li><em>G59.2</em> - select coordinate system 8</li>
  <li><em>G59.3</em> - select coordinate system 9</li>
</ul>

<p>The coordinate systems store the axis values and the XY rotation angle around the Z axis in the
parameters shown in the following table.</p>

<p class="parag">Table 3. Coordinate System Parameters</p>

<table class="linuxcnc">
  <tbody class="linuxcnc">
    <tr class="linuxcnc">
      <th>Select</th>
      <th>CS</th>
      <th>X</th>
      <th>Y</th>
      <th>Z</th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>U</th>
      <th>V</th>
      <th>W</th>
      <th>R</th>
    </tr>
    <tr class="linuxcnc">
      <td>G54</td>
      <td>1</td>
      <td>5221</td>
      <td>5222</td>
      <td>5223</td>
      <td>5224</td>
      <td>5225</td>
      <td>5226</td>
      <td>5227</td>
      <td>5228</td>
      <td>5229</td>
      <td>5230</td>
    </tr>
    <tr class="linuxcnc">
      <td>G55</td>
      <td>2</td>
      <td>5241</td>
      <td>5242</td>
      <td>5243</td>
      <td>5244</td>
      <td>5245</td>
      <td>5246</td>
      <td>5247</td>
      <td>5248</td>
      <td>5249</td>
      <td>5250</td>
    </tr>
    <tr class="linuxcnc">
      <td>G56</td>
      <td>3</td>
      <td>5261</td>
      <td>5262</td>
      <td>5263</td>
      <td>5264</td>
      <td>5265</td>
      <td>5266</td>
      <td>5267</td>
      <td>5268</td>
      <td>5269</td>
      <td>5270</td>
    </tr>
    <tr class="linuxcnc">
      <td>G57</td>
      <td>4</td>
      <td>5281</td>
      <td>5282</td>
      <td>5283</td>
      <td>5284</td>
      <td>5285</td>
      <td>5286</td>
      <td>5287</td>
      <td>5288</td>
      <td>5289</td>
      <td>5290</td>
    </tr>
    <tr class="linuxcnc">
      <td>G58</td>
      <td>5</td>
      <td>5301</td>
      <td>5302</td>
      <td>5303</td>
      <td>5304</td>
      <td>5305</td>
      <td>5306</td>
      <td>5307</td>
      <td>5308</td>
      <td>5309</td>
      <td>5310</td>
    </tr>
    <tr class="linuxcnc">
      <td>G59</td>
      <td>6</td>
      <td>5321</td>
      <td>5322</td>
      <td>5323</td>
      <td>5324</td>
      <td>5325</td>
      <td>5326</td>
      <td>5327</td>
      <td>5328</td>
      <td>5329</td>
      <td>5330</td>
    </tr>
    <tr class="linuxcnc">
      <td>G59.1</td>
      <td>7</td>
      <td>5341</td>
      <td>5342</td>
      <td>5343</td>
      <td>5344</td>
      <td>5345</td>
      <td>5346</td>
      <td>5347</td>
      <td>5348</td>
      <td>5349</td>
      <td>5350</td>
    </tr>
    <tr class="linuxcnc">
      <td>G59.2</td>
      <td>8</td>
      <td>5361</td>
      <td>5362</td>
      <td>5363</td>
      <td>5364</td>
      <td>5365</td>
      <td>5366</td>
      <td>5367</td>
      <td>5368</td>
      <td>5369</td>
      <td>5370</td>
    </tr>
    <tr class="linuxcnc">
      <td>G59.3</td>
      <td>9</td>
      <td>5381</td>
      <td>5382</td>
      <td>5383</td>
      <td>5384</td>
      <td>5385</td>
      <td>536</td>
      <td>5387</td>
      <td>5388</td>
      <td>5389</td>
      <td>5390</td>
    </tr>
  </tbody>
</table>

<p>It is an error if:</p>
<ul>
  <li>selecting a coordinate system is used while cutter compensation is on.</li>
</ul>

<p>See the Coordinate System Section for an overview of coordinate systems.</p>

<h3 id="gcode:g61">G61 Exact Path Mode</h3>
<ul>
  <li><em>G61</em> - Exact path mode, movement exactly as programed. Moves will slow or stop as
    needed to reach every programed point. If two sequential moves are exactly co-linear movement
    will not stop.</li>
</ul>

<h3 id="gcode:g61.1">G61.1 Exact Stop Mode</h3>
<ul>
  <li><em>G61.1</em> - Exact stop mode, movement will stop at the end of each programed
  segment.</li>
</ul>

<h3 id="gcode:g64">G64 Path Blending</h3>
<pre><code class="language-gcode">G64 &lt;P- &lt;Q-&gt;&gt;</code></pre>
<ul>
  <li><em>P</em> - motion blending tolerance</li>
  <li><em>Q</em> - naive cam tolerance</li>
  <li><em>G64</em> - best possible speed. Without P means to keep the best speed possible, no
    matter how far away from the programmed point you end up.</li>
  <li><em>G64 P-</em> - Blend between best speed and deviation tolerance</li>
  <li><em>G64 P- &lt;Q- &gt;</em> blending with tolerance. It is a way to fine tune your system for
    best compromise between speed and accuracy. The P- tolerance means that the actual path will be
    no more than P- away from the programmed endpoint. The velocity will be reduced if needed to
    maintain the path. In addition, when you activate G64 P- Q- it turns on the naive cam detector;
    when there are a series of linear XYZ feed moves at the same feed rate that are less than Q-
    away from being collinear, they are collapsed into a single linear move. On G2/G3 moves in the
    G17 (XY) plane when the maximum deviation of an arc from a straight line is less than the G64
    P- tolerance the arc is broken into two lines (from start of arc to midpoint, and from midpoint
    to end). those lines are then subject to the naive cam algorithm for lines. Thus, line-arc,
    arc-arc, and arc-line cases as well as line-line benefit from the naive cam detector. This
    improves contouring performance by simplifying the path. It is OK to program for the mode that
    is already active. See also the Trajectory Control Section for more information on these modes.
    If Q is not specified then it will have the same behavior as before and use the value of P-.
    Set Q to zero to disable the Naive CAM Detector.</li>
</ul>

<p class="parag">G64 P- Example Line</p>
<pre><code class="language-gcode">G64 P0.015 (set path following to be within 0.015 of the actual path)</code></pre>

<p>It is a good idea to include a path control specification in the preamble of each G code
file.</p>

<h3 id="gcode:g70">G70 Lathe finishing cycle</h3>
<pre><code class="language-gcode">G70 Q- &lt;X-&gt; &lt;Z-&gt; &lt;D-&gt; &lt;E-&gt; &lt;P-&gt;</code></pre>
<ul>
  <li><em>Q</em> - The subroutine number.</li>
  <li><em>X</em> - The starting X position, defaults to the initial position.</li>
  <li><em>Z</em> - The starting Z position, defaults to the initial position.</li>
  <li><em>D</em> - The starting distance of the profile, defaults to 0.</li>
  <li><em>E</em> - The ending distance of the profile, defaults to 0.</li>
  <li><em>P</em> - The number of passes to use, defaults to 1.</li>
</ul>

<p>The G70 cycle is intended to be used after the shape of the profile given in the subroutine with
number Q has been cut with G71 or G72.</p>
<ul>
  <li>Preliminary motion. 
    <ul>
      <li>If Z or X are used a rapid move to that position is done. This position is also used
        between each finishing pass.</li>
      <li>Then a rapid move to the start of the profile is executed.</li>
      <li>The path given in Q- is followed using the G1 and [gcode:g2-g3] commands.</li>
      <li>If a next pass is required there is another rapid to the intermediate location, before a
        rapid is done to the start of the profile.</li>
      <li>After the final pass, the tool is left at the end of the profile including E-.</li>
    </ul>
  </li>
  <li>Multiple passes. The distance between the pass and the final profile is (pass-1)*(D-E)/P+E.
    Where pass the pass number and D,E and P are the D/E/P numbers.</li>
  <li>The distance is computed using the starting position of the cycle, with a positive distance
    towards this point.</li>
  <li>Fillet and chamfers in the profile. It is possible to add fillets or chamfers in the profile,
    see [gcode:g71-g72] for more details.</li>
</ul>

<p>It is an error if:</p>
<ul>
  <li>There is no subroutine defined with the number given in Q.</li>
  <li>The path given in the profile is not monotonic in Z or X.</li>
  <li>[gcode:g17-g19.1] has not been used to select the ZX plane.</li>
</ul>

<h3 id="gcode:g70">G71 G72 Lathe roughing cycles</h3>

<div class="info">
<strong>Note: </strong>The G71 and G72 cycles are currently somewhat fragile. See issues #707 and
#1146.</div>
<pre><code class="language-gcode">G71   Q- &lt;X-&gt; &lt;Z-&gt; &lt;D-&gt; &lt;I-&gt; &lt;R-&gt;
G71.1 Q- &lt;X-&gt; &lt;Z-&gt; &lt;D-&gt; &lt;I-&gt; &lt;R-&gt;
G71.2 Q- &lt;X-&gt; &lt;Z-&gt; &lt;D-&gt; &lt;I-&gt; &lt;R-&gt;
G72   Q- &lt;X-&gt; &lt;Z-&gt; &lt;D-&gt; &lt;I-&gt; &lt;R-&gt;
G72.1 Q- &lt;X-&gt; &lt;Z-&gt; &lt;D-&gt; &lt;I-&gt; &lt;R-&gt;
G72.2 Q- &lt;X-&gt; &lt;Z-&gt; &lt;D-&gt; &lt;I-&gt; &lt;R-&gt;</code></pre>
<ul>
  <li><em>Q</em> - The subroutine number.</li>
  <li><em>X</em> - The starting X position, defaults to the initial position.</li>
  <li><em>Z</em> - The starting Z position, defaults to the initial position.</li>
  <li><em>D</em> - The remaining distance to the profile, defaults to 0.</li>
  <li><em>I</em> - The cutting increment, defaults to 1.</li>
  <li><em>R</em> - The retracting distance, defaults to 0.5.</li>
</ul>

<p>The G71/G72 cycle is intended to rough cut a profile on a lathe. The G71 cycles remove layers of
the material while traversing in the Z direction. The G72 cycles remove material while traversing
the X axis, the so called facing cycle. The direction of travel is the same as in the path given in
the subroutine. For the G71 cycle the Z coordinate must be monotonically changing, for the G72 this
is required for the X axis.</p>
The profile is given in a subroutine with number Q-. This subroutine may contain G0, G1, G2 and G3
motion commands. All other commands are ignored, including feed and speed settings. The [gcode:g0]
commands are interpreted as G1 commands. Each motion command may also include an optional A- or C-
number. If the number A- is added a fillet with the radius given by A will be inserted at the
endpoint of that motion, if this radius is too large the algorithm will fail with a non-monotonic
path error. It is also possible to use the C- number, which allows a chamfer to be inserted. This
chamfer has the same endpoints as a fillet of the same dimension would have but a straight line is
inserted instead of an arc.

<p>When in absolute mode the U (for X) and W (for Z) can be used as incremental displacements.</p>

<p>The G7x.1 cycles do not cut pockets. The G7x.2 cycles only cut after the first pocket and
continue where G7x.1 stopped. It is advisible to leave some additional material to cut before the
G7x.2 cycle, so if G7x.1 used a D1.0 the G7x.2 can use D0.5 and 0.5mm will be removed while moving
from one pocket to the next.</p>

<p>The normal G7x cycles cut the entire profile in one cycle.</p>
<ol>
  <li>Preliminary motion. 
    <ul>
      <li>If Z or X are used a rapid move to that position is done.</li>
      <li>After the profile has been cut, the tool stops at the end of the profile, including the
        distance specified in D.</li>
    </ul>
  </li>
  <li>The D number is used to keep a distance from the final profile, to allow material to remain
    for finishing.</li>
</ol>

<p>It is an error if:</p>
<ul>
  <li>There is no subroutine defined with the number given in Q.</li>
  <li>The path given in the profile is not monotonic in Z or X.</li>
  <li>[gcode:g17-g19.1] has not been used to select the ZX plane.</li>
  <li>[gcode:g41-g42] is active.</li>
</ul>

<h3 id="gcode:g73">G73 Drilling Cycle with Chip Breaking</h3>
<pre><code class="language-gcode">G73 X- Y- Z- R- Q- &lt;L-&gt;</code></pre>
<ul>
  <li><em>R</em> - retract position along the Z axis.</li>
  <li><em>Q</em> - delta increment along the Z axis.</li>
  <li><em>L</em> - repeat</li>
</ul>

<p>The <em>G73</em> cycle is drilling or milling with chip breaking. This cycle takes a Q number
which represents a delta increment along the Z axis.</p>
<ul>
  <li>Preliminary motion. 
    <ul>
      <li>If the current Z position is below the R position, The Z axis does a rapid move to the R
        position.</li>
      <li>Move to the X Y coordinates</li>
    </ul>
  </li>
  <li>Move the Z-axis only at the current feed rate downward by delta or to the Z position,
    whichever is less deep.</li>
  <li>Rapid up a bit.</li>
  <li>Repeat steps 2 and 3 until the Z position is reached at step 2.</li>
  <li>The Z axis does a rapid move to the R position.</li>
</ul>

<p>It is an error if:</p>
<ul>
  <li>the Q number is negative or zero.</li>
  <li>the R number is not specified</li>
</ul>

<h3 id="gcode:g74">G74 Left-hand Tapping Cycle, Dwell</h3>
<pre><code class="language-gcode">G74 (X- Y- Z-) or (U- V- W-) R- L- P- $-</code></pre>
<ul>
  <li><em>R-</em> - Retract position along the Z axis.</li>
  <li><em>L-</em> - Used in incremental mode; number of times to repeat the cycle. See G81 for
    examples.</li>
  <li><em>P-</em> - Dwell time (seconds).</li>
  <li><em>$-</em> - Selected spindle. </li>
  <li><em>F-</em> - Feed rate (spindle speed multiplied by distance traveled per revolution (thread
    pitch)).</li>
</ul>

<div class="warning">
<strong>Warning: </strong>G74 does not use synchronized motion.</div>

<p>The <em>G74</em> cycle is intended for tapping with floating chuck and dwell at the bottom of
the hole.</p>
<ol>
  <li>Preliminary motion, as described in the Preliminary and In-Between Motion section.</li>
  <li>Disable Feed and Speed Overrides.</li>
  <li>Move the Z-axis at the current feed rate to the Z position.</li>
  <li>Stop the selected spindle (chosen by the $ parameter)</li>
  <li>Start spindle rotation clockwise.</li>
  <li>Dwell for the P number of seconds.</li>
  <li>Move the Z-axis at the current feed rate to clear Z</li>
  <li>Restore Feed and Speed override enables to previous state</li>
</ol>

<p>The length of the dwell is specified by a P- word in the <em>G74</em> block. Thread pitch is F
divided by S. In example S100 F125 gives pitch of 1.25MM per revolution.</p>

<h3 id="gcode:g76">G76 Threading Cycle</h3>
<pre><code class="language-gcode">G76 P- Z- I- J- R- K- Q- H- E- L- $-</code></pre>
<img src="cnc-doc/images/20_GcodeReference/G76-example1.svg"></img> 

<p class="parag">Figure 3. G76 Threading</p>
<ul>
  <li><em>Drive Line</em> - A line through the initial X position parallel to the Z.</li>
  <li><em>P-</em> - The thread pitch in distance per revolution.</li>
  <li><em>Z-</em> - The final position of threads. At the end of the cycle the tool will be at this
    Z position.</li>
</ul>

<div class="info">
<strong>Note: </strong> When <em>G7</em> Lathe Diameter Mode is in force the values for I, J and K
are diameter measurements. When <em>G8</em> Lathe Radius Mode is in force the values for I, J and K
are radius measurements.</div>
<ul>
  <li><em>I-</em> - The thread peak offset from the drive line. Negative I values are external
    threads, and positive I values are internal threads. Generally the material has been turned to
    this size before the <em>G76</em> cycle.</li>
  <li><em>J-</em> - A positive value specifying the initial cut depth. The first threading cut will
    be J beyond the thread peak position.</li>
  <li><em>K-</em> - A positive value specifying the full thread depth. The final threading cut will
    be K beyond the thread peak position.</li>
</ul>

<p>Optional settings</p>
<ul>
  <li><em>$-</em> - The spindle number to which the motion will be synchronised (default 0). For
    example is $1 is programmed then the motion will begin on the reset od spindle.1.index-enable
    and proceed in synchrony with the value of spindle.1.revs</li>
  <li><em>R-</em> - The depth degression. R1.0 selects constant depth on successive threading
    passes. R2.0 selects constant area. Values between 1.0 and 2.0 select decreasing depth but
    increasing area. Values above 2.0 select decreasing area. Beware that unnecessarily high
    degression values will cause a large number of passes to be used. (degression = a descent by
    stages or steps.)</li>
  <li><em>Q-</em> - The compound slide angle is the angle (in degrees) describing to what extent
    successive passes should be offset along the drive line. This is used to cause one side of the
    tool to remove more material than the other. A positive Q value causes the leading edge of the
    tool to cut more heavily. Typical values are 29, 29.5 or 30.</li>
  <li><em>H-</em> - The number of spring passes. Spring passes are additional passes at full thread
    depth. If no additional passes are desired, program H0.</li>
  <li><em>E-</em> - Specifies the distance along the drive line used for the taper. The angle of
    the taper will be so the last pass tapers to the thread crest over the distance specified with
    E.' E0.2' will give a taper for the first/last 0.2 length units along the thread. For a 45
    degree taper program E the same as K</li>
  <li><em>L-</em> - Specifies which ends of the thread get the taper. Program L0 for no taper (the
    default), L1 for entry taper, L2 for exit taper, or L3 for both entry and exit tapers. Entry
    tapers will pause at the drive line to synchronize with the index pulse then move at the feed
    rate in to the beginning of the taper. No entry taper and the tool will rapid to the cut depth
    then synchronize and begin the cut.</li>
</ul>

<p>The tool is moved to the initial X and Z positions prior to issuing the <em>G76</em>. The X
position is the drive line and the Z position is the start of the threads.</p>

<p>The tool will pause briefly for synchronization before each threading pass, so a relief groove
will be required at the entry unless the beginning of the thread is past the end of the material or
an entry taper is used.</p>

<p>Unless using an exit taper, the exit move is not synchronized to the spindle speed and will be a
rapid move. With a slow spindle, the exit move might take only a small fraction of a revolution. If
the spindle speed is increased after several passes are complete, subsequent exit moves will
require a larger portion of a revolution, resulting in a very heavy cut during the exit move. This
can be avoided by providing a relief groove at the exit, or by not changing the spindle speed while
threading.</p>

<p>The final position of the tool will be at the end of the drive line. A safe Z move will be
needed with an internal thread to remove the tool from the hole.</p>

<p>It is an error if:</p>
<ul>
  <li>The active plane is not the ZX plane</li>
  <li>Other axis words, such as X- or Y-, are specified</li>
  <li>The R- degression value is less than 1.0.</li>
  <li>All the required words are not specified</li>
  <li>P-, J-, K- or H- is negative</li>
  <li>E- is greater than half the drive line length</li>
</ul>

<p class="parag">HAL Connections</p>

<p>The pins spindle.N.at-speed and the encoder.n.phase-Z for the spindle must be connected in your
HAL file before <em>G76</em> will work. See the spindle pins in the Motion section for more
information.</p>

<p class="parag">Technical Info</p>

<p>The <em>G76</em> canned cycle is based on the <em>G33</em> Spindle Synchronized Motion. For more
information see the <em>G33</em> Technical Info.</p>

<p>The sample program g76.ngc shows the use of the <em>G76</em> canned cycle, and can be previewed
and executed on any machine using the sim/lathe.ini configuration.</p>

<p class="parag">G76 Example</p>
<pre><code class="language-gcode">G0 Z-0.5 X0.2
G76 P0.05 Z-1 I-.075 J0.008 K0.045 Q29.5 L2 E0.045</code></pre>

<p>In the figure the tool is in the final position after the <em>G76</em> cycle is completed. You
can see the entry path on the right from the Q29.5 and the exit path on the left from the L2
E0.045. The white lines are the cutting moves.</p>
<img src="cnc-doc/images/20_GcodeReference/G76-example2.png" width="488"> 

<p class="parag">Figure 4. G76 Example</p>

<h3>G80-G89 Canned Cycles</h3>

<p>The canned cycles <em>G81</em> through <em>G89</em> and the canned cycle stop <em>G80</em> are
described in this section.</p>

<p>All canned cycles are performed with respect to the currently-selected plane. Any of the nine
planes may be selected. Throughout this section, most of the descriptions assume the XY-plane has
been selected. The behavior is analogous if another plane is selected, and the correct words must
be used. For instance, in the <em>G17.1</em> plane, the action of the canned cycle is along W, and
the locations or increments are given with U and V. In this case substitute U,V,W for X,Y,Z in the
instructions below.</p>

<p>Rotary axis words are not allowed in canned cycles. When the active plane is one of the XYZ
family, the UVW axis words are not allowed. Likewise, when the active plane is one of the UVW
family, the XYZ axis words are not allowed.</p>

<h4>Common Words</h4>

<p>All canned cycles use X, Y, Z, or U, V, W groups depending on the plane selected and R words.
The R (usually meaning retract) position is along the axis perpendicular to the currently selected
plane (Z-axis for XY-plane, etc.) Some canned cycles use additional arguments.</p>

<h4>Sticky Words</h4>

<p>For canned cycles, we will call a number sticky if, when the same cycle is used on several lines
of code in a row, the number must be used the first time, but is optional on the rest of the lines.
Sticky numbers keep their value on the rest of the lines if they are not explicitly programmed to
be different. The R number is always sticky.</p>

<p>In incremental distance mode X, Y, and R numbers are treated as increments from the current
position and Z as an increment from the Z-axis position before the move involving Z takes place. In
absolute distance mode, the X, Y, R, and Z numbers are absolute positions in the current coordinate
system.</p>

<h4>Repeat Cycle</h4>

<p>The L number is optional and represents the number of repeats. L=0 is not allowed. If the repeat
feature is used, it is normally used in incremental distance mode, so that the same sequence of
motions is repeated in several equally spaced places along a straight line. When L- is greater than
1 in incremental mode with the XY-plane selected, the X and Y positions are determined by adding
the given X and Y numbers either to the current X and Y positions (on the first go-around) or to
the X and Y positions at the end of the previous go-around (on the repetitions). Thus, if you
program L10 , you will get 10 cycles. The first cycle will be distance X,Y from the original
location. The R and Z positions do not change during the repeats. The L number is not sticky. In
absolute distance mode, L&gt;1 means do the same cycle in the same place several times, Omitting
the L word is equivalent to specifying L=1.</p>

<h4>Retract Mode</h4>

<p>The height of the retract move at the end of each repeat (called clear Z in the descriptions
below) is determined by the setting of the retract mode, either to the original Z position (if that
is above the R position and the retract mode is G98, OLD_Z), or otherwise to the R position. See
the <em>G98</em> G99 Section.</p>

<h4>Canned Cycle Errors</h4>

<p>It is an error if:</p>
<ul>
  <li>axis words are all missing during a canned cycle,</li>
  <li>axis words from different groups (XYZ) (UVW) are used together,</li>
  <li>a P number is required and a negative P number is used,</li>
  <li>an L number is used that does not evaluate to a positive integer,</li>
  <li>rotary axis motion is used during a canned cycle,</li>
  <li>inverse time feed rate is active during a canned cycle,</li>
  <li>or cutter compensation is active during a canned cycle.</li>
</ul>

<p>If the XY plane is active, the Z number is sticky, and it is an error if:</p>
<ul>
  <li>the Z number is missing and the same canned cycle was not already active,</li>
  <li>or the R number is less than the Z number.</li>
</ul>

<p>If other planes are active, the error conditions are analogous to the XY conditions above.</p>

<h4>Preliminary and In-Between Motion</h4>

<p>Preliminary motion is a set of motions that is common to all of the milling canned cycles. If
the current Z position is below the R position, the Z axis does a rapid move to the R position.
This happens only once, regardless of the value of L.</p>

<p>In addition, at the beginning of the first cycle and each repeat, the following one or two moves
are made</p>
<ul>
  <li>A rapid move parallel to the XY-plane to the given XY-position,</li>
  <li>The Z-axis make a rapid move to the R position, if it is not already at the R position.</li>
</ul>

<p>If another plane is active, the preliminary and in-between motions are analogous.</p>

<h4>Why use a canned cycle?</h4>

<p>There are at least two reasons for using canned cycles. The first is the economy of code. A
single bore would take several lines of code to execute.</p>

<p>The <em>G81</em> Example 1 demonstrates how a canned cycle could be used to produce 8 holes with
ten lines of G code within the canned cycle mode. The program below will produce the same set of 8
holes using five lines for the canned cycle. It does not follow exactly the same path nor does it
drill in the same order as the earlier example. But the program writing economy of a good canned
cycle should be obvious.</p>

<div class="info">
<strong>Note: </strong> Line numbers are not needed but help clarify these examples</div>

<p class="parag">Eight Holes</p>
<pre><code class="language-gcode">N100 G90 G0 X0 Y0 Z0 (move coordinate home)
N110 G1 F10 X0 G4 P0.1
N120 G91 G81 X1 Y0 Z-1 R1 L4 (canned drill cycle)
N130 G90 G0 X0 Y1
N140 Z0
N150 G91 G81 X1 Y0 Z-0.5 R1 L4 (canned drill cycle)
N160 G80 (turn off canned cycle)
N170 M2 (program end)</code></pre>

<p>The <em>G98</em> to the second line above means that the return move will be to the value of Z
in the first line since it is higher that the R value specified.</p>
<img src="cnc-doc/images/20_GcodeReference/G80-example1.svg"></img> 

<p class="parag">Twelve Holes in a Square</p>

<p>This example demonstrates the use of the L word to repeat a set of incremental drill cycles for
successive blocks of code within the same <em>G81</em> motion mode. Here we produce 12 holes using
five lines of code in the canned motion mode.</p>
<pre><code class="language-gcode">N1000 G90 G0 X0 Y0 Z0 (move coordinate home)
N1010 G1 F50 X0 G4 P0.1
N1020 G91 G81 X1 Y0 Z-0.5 R1 L4 (canned drill cycle)
N1030 X0 Y1 R0 L3 (repeat)
N1040 X-1 Y0 L3 (repeat)
N1050 X0 Y-1 L2 (repeat)
N1060 G80 (turn off canned cycle)
N1070 G90 G0 X0 (rapid move home)
N1080 Y0
N1090 Z0
N1100 M2 (program end)</code></pre>
<img src="cnc-doc/images/20_GcodeReference/G80-example2.svg"></img> 

<p>The second reason to use a canned cycle is that they all produce preliminary moves and returns
that you can anticipate and control regardless of the start point of the canned cycle.</p>

<h3 id="gcode:g80">G80 Cancel Canned Cycle</h3>
<ul>
  <li><em>G80</em> - cancel canned cycle modal motion. G80 is part of modal group 1, so programming
    any other G code from modal group 1 will also cancel the canned cycle.</li>
</ul>

<p>It is an error if:</p>
<ul>
  <li>Axis words are programmed when <em>G80</em> is active.</li>
</ul>

<p class="parag">G80 Example</p>
<pre><code class="language-gcode">G90 G81 X1 Y1 Z1.5 R2.8 (absolute distance canned cycle)
G80 (turn off canned cycle motion)
G0 X0 Y0 Z0 (rapid move to coordinate home)</code></pre>

<p>The following code produces the same final position and machine state as the previous code.</p>

<p class="parag">G90 Example</p>
<pre><code class="language-gcode">G90 G81 X1 Y1 Z1.5 R2.8 (absolute distance canned cycle)
G0 X0 Y0 Z0 (rapid move to coordinate home)</code></pre>

<p>The advantage of the first set is that, the <em>G80</em> line clearly turns off the <em>G81</em>
canned cycle. With the first set of blocks, the programmer must turn motion back on with G0, as is
done in the next line, or any other motion mode G word.</p>

<p>If a canned cycle is not turned off with <em>G80</em> or another motion word, the canned cycle
will attempt to repeat itself using the next block of code that contains an X, Y, or Z word. The
following file drills (G81) a set of eight holes as shown in the following caption.</p>

<p class="parag">G80 Example 1</p>
<pre><code class="language-gcode">N100 G90 G0 X0 Y0 Z0 (coordinate home)
N110 G1 X0 G4 P0.1
N120 G81 X1 Y0 Z0 R1 (canned drill cycle)
N130 X2
N140 X3
N150 X4
N160 Y1 Z0.5
N170 X3
N180 X2
N190 X1
N200 G80 (turn off canned cycle)
N210 G0 X0 (rapid move home)
N220 Y0
N230 Z0
N240 M2 (program end)</code></pre>

<div class="info">
<strong>Note: </strong> Notice the z position change after the first four holes. Also, this is one
of the few places where line numbers have some value, being able to point a reader to a specific
line of code.</div>

<p class="parag">Figure 5. G80 Cycle</p>

<p>The use of <em>G80</em> in line N200 is optional because the <em>G0</em> on the next line will
turn off the G81 cycle. But using the <em>G80</em> as shown in Example 1, will provide for easier
to read canned cycle. Without it, it is not so obvious that all of the blocks between N120 and N200
belong to the canned cycle.</p>

<h3 id="gcode:g81">G81 Drilling Cycle</h3>
<pre><code class="language-gcode">G81 (X- Y- Z-) or (U- V- W-) R- L-</code></pre>

<p>The <em>G81</em> cycle is intended for drilling.</p>

<p>The cycle functions as follows:</p>
<ul>
  <li>Preliminary motion, as described in the Preliminary and In-Between Motion section.</li>
  <li>Move the Z-axis at the current feed rate to the Z position.</li>
  <li>The Z-axis does a rapid move to clear Z.</li>
</ul>
<img src="cnc-doc/images/20_GcodeReference/G81-example1.svg"></img> 

<p class="parag">Example 1 - Absolute Position G81</p>

<p>Suppose the current position is (X1, Y2, Z3) and the following line of NC code is
interpreted.</p>
<pre><code class="language-gcode">G90 G98 G81 X4 Y5 Z1.5 R2.8</code></pre>

<p>This calls for absolute distance mode (G90) and OLD_Z retract mode (G98) and calls for the G81
drilling cycle to be performed once.</p>
<ul>
  <li>The X value and X position are 4.</li>
  <li>The Y value and Y position are 5.</li>
  <li>The Z value and Z position are 1.5.</li>
  <li>The R value and clear Z are 2.8. OLD_Z is 3.</li>
</ul>

<p>The following moves take place:</p>
<ul>
  <li>a rapid move parallel to the XY plane to (X4, Y5)</li>
  <li>a rapid move move parallel to the Z-axis to (Z2.8).</li>
  <li>move parallel to the Z-axis at the feed rate to (Z1.5)</li>
  <li>a rapid move parallel to the Z-axis to (Z3)</li>
</ul>
<img src="cnc-doc/images/20_GcodeReference/G81-example2.svg"></img> 

<p class="parag">Example 2 - Relative Position G81</p>

<p>Suppose the current position is (X1, Y2, Z3) and the following line of NC code is
interpreted.</p>
<pre><code class="language-gcode">G91 G98 G81 X4 Y5 Z-0.6 R1.8 L3</code></pre>

<p>This calls for incremental distance mode (G91) and OLD_Z retract mode (G98). It also calls for
the <em>G81</em> drilling cycle to be repeated three times. The X value is 4, the Y value is 5, the
Z value is -0.6 and the R value is 1.8. The initial X position is 5 (=1+4), the initial Y position
is 7 (=2+5), the clear Z position is 4.8 (=1.8+3), and the Z position is 4.2 (=4.8-0.6). OLD_Z is
3.</p>

<p>The first preliminary move is a maximum rapid move along the Z axis to (X1,Y2,Z4.8), since OLD_Z
&lt; clear Z.</p>

<p>The first repeat consists of 3 moves.</p>
<ul>
  <li>a rapid move parallel to the XY-plane to (X5, Y7)</li>
  <li>move parallel to the Z-axis at the feed rate to (Z4.2)</li>
  <li>a rapid move parallel to the Z-axis to (X5, Y7, Z4.8)</li>
</ul>

<p>The second repeat consists of 3 moves. The X position is reset to 9 (=5+4) and the Y position to
12 (=7+5).</p>
<ul>
  <li>a rapid move parallel to the XY-plane to (X9, Y12, Z4.8)</li>
  <li>move parallel to the Z-axis at the feed rate to (X9, Y12, Z4.2)</li>
  <li>a rapid move parallel to the Z-axis to (X9, Y12, Z4.8)</li>
</ul>

<p>The third repeat consists of 3 moves. The X position is reset to 13 (=9+4) and the Y position to
17 (=12+5).</p>
<ul>
  <li>a rapid move parallel to the XY-plane to (X13, Y17, Z4.8)</li>
  <li>move parallel to the Z-axis at the feed rate to (X13, Y17, Z4.2)</li>
  <li>a rapid move parallel to the Z-axis to (X13, Y17, Z4.8)</li>
</ul>
<img src="cnc-doc/images/20_GcodeReference/G81-example3.svg"></img> 

<p class="parag">Example 3 - Relative Position G81</p>

<p>Now suppose that you execute the first <em>G81</em> block of code but from (X0, Y0, Z0) rather
than from (X1, Y2, Z3).</p>
<pre><code class="language-gcode">G90 G98 G81 X4 Y5 Z1.5 R2.8</code></pre>

<p>Since OLD_Z is below the R value, it adds nothing for the motion but since the initial value of
Z is less than the value specified in R, there will be an initial Z move during the preliminary
moves.</p>
<img src="cnc-doc/images/20_GcodeReference/G81-example4.svg" width="640"></img> 

<p class="parag">Example 4 - Absolute G81 R &gt; Z</p>

<p>This is a plot of the path of motion for the second <em>G81</em> block of code.</p>

<p>G91 G98 G81 X4 Y5 Z-0.6 R1.8 L3</p>

<p>Since this plot starts with (X0, Y0, Z0), the interpreter adds the initial Z0 and R1.8 and rapid
moves to that location. After that initial Z move, the repeat feature works the same as it did in
example 3 with the final Z depth being 0.6 below the R value.</p>
<img src="cnc-doc/images/20_GcodeReference/G81-example5.svg"></img> 

<p class="parag">Example 5 - Relative position R &gt; Z</p>
<pre><code class="language-gcode">G90 G98 G81 X4 Y5 Z-0.6 R1.8</code></pre>

<p>Since this plot starts with (X0, Y0, Z0), the interpreter adds the initial Z0 and R1.8 and rapid
moves to that location as in Example 4. After that initial Z move, the rapid move to X4 Y5 is done.
Then the final Z depth being 0.6 below the R value. The repeat function would make the Z move in
the same location again.</p>

<h3 id="gcode:g82">G82 Drilling Cycle, Dwell</h3>
<pre><code class="language-gcode">G82 (X- Y- Z-) or (U- V- W-) R- L- P-</code></pre>

<p>The <em>G82</em> cycle is intended for drilling with a dwell at the bottom of the hole.</p>
<ul>
  <li>Preliminary motion, as described in the Preliminary and In-Between Motion section.</li>
  <li>Move the Z-axis at the current feed rate to the Z position.</li>
  <li>Dwell for the P number of seconds.</li>
  <li>The Z-axis does a rapid move to clear Z.</li>
</ul>

<p>The motion of a <em>G82</em> canned cycle looks just like <em>G81</em> with the addition of a
dwell at the bottom of the Z move. The length of the dwell is specified by a P- word in the
<em>G82</em> block.</p>
<pre><code class="language-gcode">G90 G82 G98 X4 Y5 Z1.5 R2.8 P2</code></pre>

<p>This will be similar to example 3 above, just with an added dwell of 2 seconds at the bottom of
the hole.</p>

<h3 id="gcode:g83">G83 Peck Drilling Cycle</h3>
<pre><code class="language-gcode">G83 (X- Y- Z-) or (U- V- W-) R- L- Q-</code></pre>

<p>The <em>G83</em> cycle (often called peck drilling) is intended for deep drilling or milling
with chip breaking. The retracts in this cycle clear the hole of chips and cut off any long
stringers (which are common when drilling in aluminum). This cycle takes a Q number which
represents a delta increment along the Z-axis. The retract before final depth will always be to the
retract plane even if <em>G98</em> is in effect. The final retract will honor the G98/99 in effect.
<em>G83</em> functions the same as G81 with the addition of retracts during the drilling
operation.</p>
<ul>
  <li>Preliminary motion, as described in the Preliminary and In-Between Motion section.</li>
  <li>Move the Z-axis at the current feed rate downward by delta or to the Z position, whichever is
    less deep.</li>
  <li>Rapid move back out to the retract plane specified by the R word.</li>
  <li>Rapid move back down to the current hole bottom, backed off a bit.</li>
  <li>Repeat steps 2, 3, and 4 until the Z position is reached at step 2.</li>
  <li>The Z-axis does a rapid move to clear Z.</li>
</ul>

<p>It is an error if:</p>
<ul>
  <li>the Q number is negative or zero.</li>
</ul>

<h3 id="gcode:g84">G84 Right-hand Tapping Cycle, Dwell</h3>
<pre><code class="language-gcode">G84 (X- Y- Z-) or (U- V- W-) R- L- P- $-</code></pre>
<ul>
  <li><em>R-</em> - Retract position along the Z axis.</li>
  <li><em>L-</em> - Used in incremental mode; number of times to repeat the cycle. See G81 for
    examples.</li>
  <li><em>P-</em> - Dwell time (seconds).</li>
  <li><em>$-</em> - Selected spindle.</li>
  <li><em>F-</em> - Feed rate (spindle speed multiplied by distance traveled per revolution (thread
    pitch)).</li>
</ul>

<div class="warning">
<strong>Warning: </strong> G84 does not use synchronized motion.</div>

<p>The <em>G84</em> cycle is intended for tapping with floating chuck and dwell at the bottom of
the hole.</p>
<ul>
  <li>Preliminary motion, as described in the Preliminary and In-Between Motion section.</li>
  <li>Disable Feed and Speed Overrides.</li>
  <li>Move the Z-axis at the current feed rate to the Z position.</li>
  <li>Stop the seleted spindle (chosen by the $ parameter)</li>
  <li>Start spindle rotation counterclockwise.</li>
  <li>Dwell for the P number of seconds.</li>
  <li>Move the Z-axis at the current feed rate to clear Z</li>
  <li>Restore Feed and Speed override enables to previous state</li>
</ul>

<p>The length of the dwell is specified by a P- word in the <em>G84</em> block. Thread pitch is F
divided by S. In example S100 F125 gives pitch of 1.25MM per revolution.</p>

<h3 id="gcode:g85">G85 Boring Cycle, Feed Out</h3>
<pre><code class="language-gcode">G85 (X- Y- Z-) or (U- V- W-) R- L-</code></pre>

<p>The <em>G85</em> cycle is intended for boring or reaming, but could be used for drilling or
milling.</p>
<ul>
  <li>Preliminary motion, as described in the Preliminary and In-Between Motion section.</li>
  <li>Move the Z-axis only at the current feed rate to the Z position.</li>
  <li>Retract the Z-axis at the current feed rate to the R plane if it is lower than the initial
  Z.</li>
  <li>Retract at the traverse rate to clear Z.</li>
</ul>

<h3 id="gcode:g86">G86 Boring Cycle, Spindle Stop, Rapid Move Out</h3>
<pre><code class="language-gcode">G86 (X- Y- Z-) or (U- V- W-) R- L- P- $-</code></pre>

<p>The <em>G86</em> cycle is intended for boring. This cycle uses a P number for the number of
seconds to dwell.</p>
<ul>
  <li>Preliminary motion, as described in the Preliminary and In-Between Motion section.</li>
  <li>Move the Z-axis only at the current feed rate to the Z position.</li>
  <li>Dwell for the P number of seconds.</li>
  <li>Stop the selected spindle turning. (Chosen by the $ parameter)</li>
  <li>The Z-axis does a rapid move to clear Z.</li>
  <li>Restart the spindle in the direction it was going.</li>
</ul>

<p>It is an error if:</p>
<ul>
  <li>the spindle is not turning before this cycle is executed.</li>
</ul>

<h3 id="gcode:g87">G87 Back Boring Cycle</h3>

<p>This code is currently unimplemented in LinuxCNC. It is accepted, but the behavior is
undefined.</p>

<h3 id="gcode:g88">G88 Boring Cycle, Spindle Stop, Manual Out</h3>

<p>This code is currently unimplemented in LinuxCNC. It is accepted, but the behavior is
undefined.</p>

<h3 id="gcode:g89">G89 Boring Cycle, Dwell, Feed Out</h3>
<pre><code class="language-gcode">G89 (X- Y- Z-) or (U- V- W-) R- L- P-</code></pre>

<p>The <em>G89</em> cycle is intended for boring. This cycle uses a P number, where P specifies the
number of seconds to dwell.</p>
<ul>
  <li>Preliminary motion, as described in the Preliminary and In-Between Motion section.</li>
  <li>Move the Z-axis only at the current feed rate to the Z position.</li>
  <li>Dwell for the P number of seconds.</li>
  <li>Retract the Z-axis at the current feed rate to clear Z.</li>
</ul>

<h3 id="gcode:g90-g91">G90, G91 Distance Mode</h3>
<ul>
  <li><em>G90</em> - absolute distance mode In absolute distance mode, axis numbers (X, Y, Z, A, B,
    C, U, V, W) usually represent positions in terms of the currently active coordinate system. Any
    exceptions to that rule are described explicitly in the <em>G80</em> G89 Section.</li>
  <li><em>G91</em> - incremental distance mode In incremental distance mode, axis numbers usually
    represent increments from the current coordinate.</li>
</ul>

<p class="parag">G90 Example</p>
<pre><code class="language-gcode">G90 (set absolute distance mode)
G0 X2.5 (rapid move to coordinate X2.5 including any offsets in effect)</code></pre>

<p class="parag">G91 Example</p>

<p></p>
<pre><code class="language-gcode">G91 (set incremental distance mode)
G0 X2.5 (rapid move 2.5 from current position along the X axis)</code></pre>

<p>See <em>G0</em> section for more information.</p>

<h3 id="gcode:g90.1-g91.1">G90.1, G91.1 Arc Distance Mode</h3>
<ul>
  <li><em>G90.1</em> - absolute distance mode for I, J &amp; K offsets. When <em>G90.1</em> is in
    effect I and J both must be specified with G2/3 for the XY plane or J and K for the XZ plane or
    it is an error.</li>
  <li><em>G91.1</em> - incremental distance mode for I, J &amp; K offsets. <em>G91.1</em> Returns
    I, J &amp; K to their default behavior.</li>
</ul>

<h3 id="gcode:g92">G92 Coordinate System Offset</h3>
<pre><code class="language-gcode">G92 axes</code></pre>

<div class="warning">
<strong>Warning: </strong>Only use <em>G92</em> after your machine has been positioned to the
desired point.</div>

<p>G92 makes the current point have the coordinates you want (without motion), where the axis words
contain the axis numbers you want. All axis words are optional, except that at least one must be
used. If an axis word is not used for a given axis, the offset for that axis will be zero.</p>

<p>When <em>G92</em> is executed, the origins of all coordinate systems move. They move such that
the value of the current controlled point, in the currently active coordinate system, becomes the
specified value. All of the coordinate system’s origins (G53-G59.3) are offset this same
distance.</p>

<p>G92 uses the values stored in parameters 5211-5219 as the X Y Z A B C U V W offset values for
each axis. The parameter values are absolute machine coordinates in the native machine units as
specified in the ini file. All axes defined in the ini file will be offset when <em>G92</em> is
active. If an axis was not entered following the G92, that axis' offset will be zero.</p>

<p>For example, suppose the current point is at X=4 and there is currently no <em>G92</em> offset
active. Then G92 X7 is programmed. This moves all origins -3 in X, which causes the current point
to become X=7. This -3 is saved in parameter 5211.</p>

<p>Being in incremental distance mode (G91 instead of G90) has no effect on the action of G92.</p>

<p>G92 offsets may be already be in effect when the <em>G92</em> is called. If this is the case,
the offset is replaced with a new offset that makes the current point become the specified
value.</p>

<p>It is an error if all axis words are omitted.</p>

<p>LinuxCNC stores the <em>G92</em> offsets and reuses them on the next run of a program. To
prevent this, one can program a <em>G92.1</em> (to erase them), or program a <em>G92.2</em> (to
remove them - they are still stored).</p>

<div class="info">
<strong>Note: </strong> The <em>G52</em> command can also be used to change this offset; see the
Offsets Section for more details about <em>G92</em> and <em>G52</em> and how they interact.</div>

<p>See the Coordinate System Section for an overview of coordinate systems.</p>

<p>See the Parameters Section for more information.</p>

<h3 id="gcode:g92.1-g92.2">G92.1, G92.2 Reset G92 Offsets</h3>
<ul>
  <li><em>G92.1</em> - turn off <em>G92</em> offsets and reset parameters 5211 - 5219 to zero.</li>
  <li><em>G92.2</em> - turn off <em>G92</em> offsets but keep parameters 5211 - 5219 available.</li>
</ul>

<div class="info">
<strong>Note: </strong> <em>G92.1</em> only clears <em>G92</em> offsets, to change G53-G59.3
coordinate system offsets in G code use either G10 L2 or G10 L20.</div>

<h3 id="gcode:g92.3">G92.3 Restore G92 Offsets</h3>
<ul>
  <li><em>G92.3</em> - set the <em>G92</em> offset to the values saved in parameters 5211 to
  5219</li>
</ul>

<p>You can set axis offsets in one program and use the same offsets in another program. Program G92
in the first program. This will set parameters 5211 to 5219. Do not use <em>G92.1</em> in the
remainder of the first program. The parameter values will be saved when the first program exits and
restored when the second one starts up. Use <em>G92.3</em> near the beginning of the second
program. That will restore the offsets saved in the first program.</p>

<h3 id="gcode:g93-g94-g95">G93, G94, G95 Feed Rate Mode</h3>
<ul>
  <li><em>G93</em> - is Inverse Time Mode. In inverse time feed rate mode, an F word means the move
    should be completed in [one divided by the F number] minutes. For example, if the F number is
    2.0, the move should be completed in half a minute.</li>
  <li>When the inverse time feed rate mode is active, an F word must appear on every line which has
    a G1, G2, or <em>G3</em> motion, and an F word on a line that does not have G1, G2, or
    <em>G3</em> is ignored. Being in inverse time feed rate mode does not affect <em>G0</em> (rapid
    move) motions.</li>
  <li><em>G94</em> - is Units per Minute Mode. In units per minute feed mode, an F word is
    interpreted to mean the controlled point should move at a certain number of inches per minute,
    millimeters per minute, or degrees per minute, depending upon what length units are being used
    and which axis or axes are moving.</li>
  <li><em>G95</em> - is Units per Revolution Mode In units per revolution mode, an F word is
    interpreted to mean the controlled point should move a certain number of inches per revolution
    of the spindle, depending on what length units are being used and which axis or axes are
    moving. <em>G95</em> is not suitable for threading, for threading use <em>G33</em> or
    <em>G76</em>. <em>G95</em> requires that spindle.N.speed-in to be connected. The actual spindle
    to which the feed is synchronised is chosen by the $ parameter</li>
</ul>

<p>It is an error if:</p>
<ul>
  <li>Inverse time feed mode is active and a line with G1, G2, or <em>G3</em> (explicitly or
    implicitly) does not have an F word.</li>
  <li>A new feed rate is not specified after switching to <em>G94</em> or G95</li>
</ul>

<h3 id="gcode:g96-g97">G96, G97 Spindle Control Mode</h3>
<pre><code class="language-gcode">G96 &lt;D-&gt; S- &lt;$-&gt; (Constant Surface Speed Mode)
G97 S- &lt;$-&gt; (RPM Mode)</code></pre>
<ul>
  <li><em>D</em> - maximum spindle RPM</li>
  <li><em>S</em> - surface speed</li>
  <li><em>$</em> - the spindle of which the speed will be varied, optional 
    <ul>
      <li><em>G96 D- S-</em> - selects constant surface speed of S 
        <ul>
          <li>In feet per minute if <em>G20</em> is in effect</li>
          <li>or meters per minute if <em>G21</em> is in effect</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p>When using G96, ensure that X0 in the current coordinate system (including offsets and tool
lengths) is the center of rotation or LinuxCNC will not give the desired ssurface speed.
<em>G96</em> is not affected by radius or diameter mode.</p>

<p>To achieve CSS mode on selected spindles programme successive <em>G96</em> commands for each
spindle prior to issuing M3.</p>
<ul>
  <li><em>G97</em> selects RPM mode.</li>
</ul>

<p class="parag">G96 Example Line</p>
<pre><code class="language-gcode">G96 D2500 S250 (set CSS with a max rpm of 2500 and a surface speed of 250)</code></pre>

<p>It is an error if:</p>
<ul>
  <li>S is not specified with G96</li>
  <li>A feed move is specified in <em>G96</em> mode while the spindle is not turning</li>
</ul>

<h3 id="gcode:g98-99">G98, G99 Canned Cycle Return Level</h3>
<ul>
  <li><em>G98</em> - retract to the position that axis was in just before this series of one or
    more contiguous canned cycles was started.</li>
  <li><em>G99</em> - retract to the position specified by the R word of the canned cycle.</li>
</ul>

<p>Program a <em>G98</em> and the canned cycle will use the Z position prior to the canned cycle as
the Z return position if it is higher than the R value specified in the cycle. If it is lower, the
R value will be used. The R word has different meanings in absolute distance mode and incremental
distance mode.</p>

<p class="parag">G98 Retract to Origin</p>
<pre><code class="language-gcode">G0 X1 Y2 Z3
G90 G98 G81 X4 Y5 Z-0.6 R1.8 F10</code></pre>

<p>The <em>G98</em> to the second line above means that the return move will be to the value of Z
in the first line since it is higher that the R value specified.</p>

<p>The initial (G98) plane is reset any time cycle motion mode is abandoned, whether explicitly
(G80) or implicitly (any motion code that is not a cycle). Switching among cycle modes (say
<em>G81</em> to G83) does NOT reset the initial plane. It is possible to switch between
<em>G98</em> and <em>G99</em> during a series of cycles.</p>

<div style="height:30px">
</div>
<!-- ----------------------------------------------------------------------------------------------------------->
<!-- ----------------------------------------------------------------------------------------------------------->

<h2 id="P-98">Resources</h2>

<h3 id="P-98-01">Candle</h3>

<p>The well known Grbl controller</p>

<h3 id="P-98-02"><a href="https://ncnetic.com/">NCnetic</a></h3>

<p>A excellent gcode viewer, standalone app or as plugin for notepad++</p>

<h3 id="P-98-03">NCCorrector</h3>

<p>Similar to NCnetic, not yet tested by myself</p>

<h3 id="P-98-04"><a
href="https://sunspire.site/software-products/cnc-milling-simulator">SunSpire</a></h3>

<p>Superb GCode simulator - 3 € on googleplay or applestore/ipad, 25€ on desktop</p>
<!-- ----------------------------------------------------------------------------------------------------------->
<!-- ----------------------------------------------------------------------------------------------------------->

<h2 id="P-99">Spindles Kits</h2>

<p>The standard spindle is by no way powerfull enough. Here are some possibility of upgrade</p>

<div style="height:10px">
</div>

<h3 id="P-99-01">LD 42 WS 250W + Driver LD-WS4810 [Ali Express - 80 + 40 €]</h3>

<p>https://de.aliexpress.com/i/4001272081797.html</p>

<p>Dimensions</p>
<ul>
  <li>Diameter : 42 mm.</li>
  <li>Length : 130 mm. [ 93 mm + shaft: 37mm ]</li>
</ul>

<p>Properties</p>
<ul>
  <li>ER 11</li>
  <li><span style="color: #0000ff;">24 Volts</span> power supply</li>
  <li>12000 rpm</li>
  <li><span style="color: #000000;">Spindle net weight: 0,65 KG</span></li>
</ul>

<h4>Advantages</h4>
<ul>
  <li>pro: ok for CNC-1310 (correction: needs new holes in the bottom plate for the spindle mounting screws)</li>
  <li>contra: heats a lot (needs for a fan)</li>
</ul>

<div style="height:20px">
</div>

<h3 id="P-99-02">500W Spindle Motor [Banggood - 60 €]</h3>

<p>Dimensions</p>
<ul>
  <li>Diameter : 52 mm.</li>
  <li>Length : 208 mm.</li>
</ul>

<p>Properties</p>
<ul>
  <li>ER 11</li>
  <li><span style="color: #0000ff;">100 Volts</span> power supply</li>
  <li>12000 rpm</li>
</ul>

<h4>Advantages</h4>
<ul>
  <li>pro: cheap (60€)</li>
  <li>contra: not really 500W </li>
</ul>

<div style="height:20px">
</div>

<h3 id="P-99-03">Machifit Brushless 300W / 400W / 500W / 600 W + Driver WS55-140/220 [Banggood -
130€]</h3>

<p>Dimensions</p>
<ul>
  <li>Diameter : 55 mm.</li>
  <li>300W : length : 140 mm = 99 mm + 06 + shaft : 35 mm</li>
  <li>400W : length : 166 mm = 120 mm + 06 + shaft : 40 mm</li>
  <li>500W : length : 192 mm = 138 mm + 14 + shaft : 40 mm</li>
  <li>600W : length : 213 mm = 158 mm + 15 + shaft : 40 mm</li>
</ul>

<p>Properties</p>
<ul>
  <li>ER 11</li>
  <li>300W : <span style="color: #0000ff;">36 Volts</span> 400W/500W/600W - <span
    style="color: #0000ff;">48 Volts</span> power supply</li>
  <li>300W/400W/500W: 12000 rpm; 600W: 9000 rpm</li>
  <li>Spindle net weight: 
    <ul>
      <li>300W: 1.1 kg</li>
      <li>400W: 1,5 kg</li>
      <li>500W: 1,8 kg</li>
      <li>600W: x.x kg</li>
    </ul>
  </li>
</ul>

<h4>Advantages</h4>
<ul>
  <li>pro: not too much expensive; can be mounted directly on the CNC-1419</li>
  <li>contra:</li>
</ul>

<h3>Flashing GRBL on the board with Arduino IDE</h3>

<p>We will use the arduino IDE for this task. GRBL is indeed an arduino program.</p>

<h4>Load into the arduino IDE the grblUpload sketch</h4>
<img src="cnc-doc/images/99_Arduino_Grbl/arduino.png" width="791" height="903"> 

<h4>Select the right board</h4>
<img src="cnc-doc/images/99_Arduino_Grbl/arduino_board_selection.png" width="793" height="904"> 

<h3>Android GRBL-CONTROLLER App</h3>

<p>After having connected my machine with my phone with the GRBL-CONTROLLER App installed on it,
Candle did not get the machine coordinates anymore. And setting the X/Y to ZERO do not work
either.</p>

<p>But when using the Android GRBL-CONTROLLER App, it does work !!?? Obviously, the GRBL-CONTROLLER
App has overwritten something on the board. </p>

<p>Let's compare the GRBL settings with the (saved) initial settings</p>

<table>
  <tbody>
    <tr>
      <th width="50px"></th>
      <th width="250px"></th>
      <th width="150px">Board overwritten</th>
      <th width="150px">Initial Settings</th>
      <th width="600px">Commentar</th>
    </tr>
    <tr>
      <td>$0</td>
      <td>Step pulse, microseconds</td>
      <td>10</td>
      <td>10</td>
      <td></td>
    </tr>
    <tr>
      <td>$1</td>
      <td>Step idle delay, milliseconds</td>
      <td>25</td>
      <td>25</td>
      <td></td>
    </tr>
    <tr>
      <td>$2</td>
      <td>Step port invert, mask</td>
      <td>0</td>
      <td>0</td>
      <td></td>
    </tr>
    <tr>
      <td>$3</td>
      <td>Direction port invert, mask</td>
      <td>1</td>
      <td>2</td>
      <td>Every board has its own settings for the directions of movement</td>
    </tr>
    <tr>
      <td>$4</td>
      <td>Step enable invert, boolean</td>
      <td>0</td>
      <td>0</td>
      <td></td>
    </tr>
    <tr>
      <td>$5</td>
      <td>Limit pins invert, boolean</td>
      <td>0</td>
      <td>0</td>
      <td></td>
    </tr>
    <tr>
      <td>$6</td>
      <td>Probe pin invert, boolean</td>
      <td>0</td>
      <td>0</td>
      <td></td>
    </tr>
    <tr>
      <td>$10</td>
      <td>Status report, mask</td>
      <td>2</td>
      <td>1</td>
      <td><span style="color:red"><strong>Wow! this caused the board to be 'broken' (with
        Candle)</strong></span></td>
    </tr>
    <tr>
      <td>$11</td>
      <td>Junction deviation, mm</td>
      <td>0.010</td>
      <td>0.010</td>
      <td></td>
    </tr>
    <tr>
      <td>$12</td>
      <td>rc tolerance, mm</td>
      <td>0.002</td>
      <td>0.002</td>
      <td></td>
    </tr>
    <tr>
      <td>$13</td>
      <td>Report inches, boolean</td>
      <td>0</td>
      <td>0</td>
      <td></td>
    </tr>
    <tr>
      <td>$20</td>
      <td>Soft limits, boolean</td>
      <td>0</td>
      <td>0</td>
      <td></td>
    </tr>
    <tr>
      <td>$21</td>
      <td>Hard limits, boolean</td>
      <td>0</td>
      <td>1</td>
      <td><strong>Hard limits</strong> : better set it to 0 on machines without limit swithes</td>
    </tr>
    <tr>
      <td>$22</td>
      <td>Homing cycle, boolean</td>
      <td>0</td>
      <td>1</td>
      <td><strong>Homing cycle: guess it should be 0</strong></td>
    </tr>
    <tr>
      <td>$23</td>
      <td>Homing dir invert, mask</td>
      <td>0</td>
      <td>7</td>
      <td><strong>I guess not used if $22 = 0</strong></td>
    </tr>
    <tr>
      <td>$24</td>
      <td>Homing feed, mm/min</td>
      <td>25.00</td>
      <td>25.00</td>
      <td></td>
    </tr>
    <tr>
      <td>$25</td>
      <td>Homing seek, mm/min</td>
      <td>500.00</td>
      <td>500.00</td>
      <td></td>
    </tr>
    <tr>
      <td>$26</td>
      <td>Homing debounce, milliseconds</td>
      <td>250</td>
      <td>250</td>
      <td></td>
    </tr>
    <tr>
      <td>$27</td>
      <td>Homing pull-off, mm</td>
      <td>1.00</td>
      <td>2.00</td>
      <td></td>
    </tr>
    <tr>
      <td>$30</td>
      <td>Max spindle speed, RPM</td>
      <td>1000</td>
      <td>1000</td>
      <td></td>
    </tr>
    <tr>
      <td>$31</td>
      <td>Min spindle speed, RPM</td>
      <td>0</td>
      <td>0</td>
      <td></td>
    </tr>
    <tr>
      <td>$32</td>
      <td>Laser mode, boolean</td>
      <td>0</td>
      <td>0</td>
      <td></td>
    </tr>
    <tr>
      <td>$100</td>
      <td>X steps/mm</td>
      <td>800.00</td>
      <td>800.00</td>
      <td></td>
    </tr>
    <tr>
      <td>$101</td>
      <td>Y steps/mm</td>
      <td>800.00</td>
      <td>800.00</td>
      <td></td>
    </tr>
    <tr>
      <td>$102</td>
      <td>Z steps/mm</td>
      <td>800.00</td>
      <td>800.00</td>
      <td></td>
    </tr>
    <tr>
      <td>$110</td>
      <td>X Max rate, mm/min</td>
      <td>500.00</td>
      <td>2000.00</td>
      <td></td>
    </tr>
    <tr>
      <td>$111</td>
      <td>Y Max rate, mm/min</td>
      <td>500.00 </td>
      <td>2000.00</td>
      <td></td>
    </tr>
    <tr>
      <td>$112</td>
      <td>Z Max rate, mm/min</td>
      <td>500.00</td>
      <td>100.00</td>
      <td></td>
    </tr>
    <tr>
      <td>$120</td>
      <td>X Acceleration, mm/sec^2</td>
      <td>10.00</td>
      <td>20.00</td>
      <td></td>
    </tr>
    <tr>
      <td>$121</td>
      <td>Y Acceleration, mm/sec^2</td>
      <td>10.00</td>
      <td>20.00</td>
      <td></td>
    </tr>
    <tr>
      <td>$122</td>
      <td>Z Acceleration, mm/sec^2</td>
      <td>10.00</td>
      <td>20.00</td>
      <td></td>
    </tr>
    <tr>
      <td>$130</td>
      <td>X Max travel, mm</td>
      <td>200.00</td>
      <td>500.00</td>
      <td></td>
    </tr>
    <tr>
      <td>$131</td>
      <td>Y Max travel, mm</td>
      <td>200.00</td>
      <td>500.00</td>
      <td></td>
    </tr>
    <tr>
      <td>$132</td>
      <td>Z Max travel, mm</td>
      <td>200.00</td>
      <td>200.00</td>
      <td></td>
    </tr>
  </tbody>
</table>

<h4>Acrylic settings</h4>
<ul>
  <li>Bit: 3.0 mm</li>
</ul>

<p>Cut Settings:</p>
<ul>
  <li>Feed Rate: 200 mm/min</li>
  <li>Plunge Rate: 120 mm/min</li>
  <li>Depth per pass: 0.5</li>
</ul>
</div>
</div>
</body>
</html>